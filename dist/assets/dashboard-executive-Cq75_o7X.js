import{r as g,j as e,i as V,U as D,T as Y,g as B,O as ue,_ as me,P as ne,f as ge,Z as le,h as S,w as z,e as xe,u as pe,R as _,v as De,V as Le,W as Pe,F as Me,X as Re,C as Fe,b as Ve,c as re,M as ie,a4 as Be,a5 as Ee,z as Ie,E as Oe}from"./react-vendor-Di6K3Iht.js";import{C as f,c as N,B as b,d as E,j as w,k as y,a as Ue,b as Ge,e as Ke,W as $e,r as ze,s as Ye,t as K,u as $,X as Xe}from"./ui-components-5QhQq56U.js";import{g as oe,f as A,c as F,i as ce,j as qe,k as He,u as We,e as Ze,l as _e,m as Je,n as Qe}from"./utils-pQyXRPC2.js";import{m as es}from"./animation-vendor-BAkK5ra0.js";import{R as J,A as ss,C as Q,X as ee,Y as se,T as te,a as ae,f as ts,b as as,B as de,c as R}from"./chart-vendor-BSHhUw40.js";import{E as ns}from"./dashboard-discounts-Dc5yoikb.js";import{P as ls}from"./dashboard-formats-B45yOpnz.js";const je=g.createContext(void 0),ve=()=>{const l=g.useContext(je);if(!l)throw new Error("useGlobalFilters must be used within a GlobalFiltersProvider");return l},vs=({children:l})=>{const[T,x]=g.useState(()=>({dateRange:oe(),location:[],category:[],product:[],soldBy:[],paymentMethod:[],source:[],associate:[],stage:[],status:[],channel:[],trialStatus:[],conversionStatus:[],retentionStatus:[],minLTV:void 0,maxLTV:void 0})),m=a=>{x(n=>({...n,...a}))},j=()=>{const a=oe();x({dateRange:a,location:[],category:[],product:[],soldBy:[],paymentMethod:[],source:[],associate:[],stage:[],status:[],channel:[],trialStatus:[],conversionStatus:[],retentionStatus:[],minLTV:void 0,maxLTV:void 0})},d=()=>{const a=oe();m({dateRange:a})};return e.jsx(je.Provider,{value:{filters:T,updateFilters:m,clearFilters:j,resetToDefaultDates:d},children:l})},rs=({data:l})=>{const T=g.useMemo(()=>{const x=l.sales.reduce((h,c)=>h+(c.paymentValue||0),0),m=l.sales.reduce((h,c)=>h+(c.paymentVAT||0),0),j=x-m,d=l.sales.length,a=new Set(l.sales.map(h=>h.memberId)).size,n=l.sessions.length,s=l.sessions.reduce((h,c)=>h+(c.checkedInCount||0),0),t=l.sessions.reduce((h,c)=>h+(c.capacity||0),0),r=l.newClients.filter(h=>(h.isNew?.toString().toLowerCase()||"").includes("new")).length,i=d>0?x/d:0,o=t>0?s/t*100:0;l.sessions.filter(h=>(h.checkedInCount||0)===0).length;const C=l.sessions.filter(h=>h.cleanedClass?.toLowerCase().includes("cycle")||h.classType?.toLowerCase().includes("cycle")).length,X=l.leads.length,L=l.leads.filter(h=>h.conversionStatus==="Converted").length,q=X>0?L/X*100:0,H=l.newClients.filter(h=>h.retentionStatus==="Retained").length,W=r>0?H/r*100:0,I=n>0?s/n:0,Z=l.discounts?.reduce((h,c)=>h+(c.discountAmount||0),0)||0,P=l.discounts?.length||0;return[{title:"Total Revenue",value:A(x),change:"+12.5%",changeType:"positive",icon:V,color:"from-green-500 to-emerald-600",description:"Total sales revenue from all transactions",rawValue:x},{title:"Net Revenue",value:A(j),change:"+10.2%",changeType:"positive",icon:V,color:"from-emerald-500 to-green-600",description:"Revenue after VAT deduction",rawValue:j},{title:"Active Members",value:F(a),change:"+8.2%",changeType:"positive",icon:D,color:"from-blue-500 to-cyan-600",description:"Unique paying members",rawValue:a},{title:"Lead Conversion",value:`${q.toFixed(1)}%`,change:"+3.1%",changeType:"positive",icon:Y,color:"from-purple-500 to-violet-600",description:"Lead to member conversion",rawValue:q},{title:"Session Attendance",value:F(s),change:"+15.3%",changeType:"positive",icon:B,color:"from-orange-500 to-red-600",description:"Total sessions attended",rawValue:s},{title:"New Clients",value:F(r),change:"+7.8%",changeType:"positive",icon:ue,color:"from-teal-500 to-cyan-600",description:"New member acquisitions",rawValue:r},{title:"Avg. Transaction",value:A(i),change:"+4.2%",changeType:"positive",icon:me,color:"from-indigo-500 to-blue-600",description:"Average transaction value from sales",rawValue:i},{title:"Retention Rate",value:`${W.toFixed(1)}%`,change:"+2.1%",changeType:"positive",icon:ne,color:"from-emerald-500 to-green-600",description:"Client retention rate",rawValue:W},{title:"Class Utilization",value:`${o.toFixed(1)}%`,change:o<70?"-1.2%":"+2.3%",changeType:o<70?"negative":"positive",icon:ge,color:"from-yellow-500 to-orange-600",description:"Average class capacity filled",rawValue:o},{title:"Total VAT",value:A(m),change:"+9.5%",changeType:"positive",icon:V,color:"from-red-500 to-pink-600",description:"Total VAT collected from sales",rawValue:m},{title:"PowerCycle Classes",value:F(C),change:"+9.4%",changeType:"positive",icon:le,color:"from-violet-500 to-purple-600",description:"PowerCycle sessions held",rawValue:C},{title:"Avg. Session Size",value:I.toFixed(1),change:"+11.2%",changeType:"positive",icon:D,color:"from-lime-500 to-green-600",description:"Average attendees per session",rawValue:I},{title:"Discount Amount",value:A(Z),change:"+5.8%",changeType:"positive",icon:ne,color:"from-pink-500 to-rose-600",description:"Total discount amount given",rawValue:Z},{title:"Discount Transactions",value:F(P),change:"+3.7%",changeType:"positive",icon:me,color:"from-amber-500 to-orange-600",description:"Transactions with discounts",rawValue:P}]},[l]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Key Performance Metrics"}),e.jsx("p",{className:"text-slate-600",children:"Real-time insights from previous month's data"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:T.map((x,m)=>e.jsx(es.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.05},children:e.jsx(f,{className:"bg-white/80 backdrop-blur-sm shadow-xl border-0 overflow-hidden hover:shadow-2xl transition-all duration-300 hover:scale-105 h-full",children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${x.color} rounded-xl flex items-center justify-center shadow-lg`,children:e.jsx(x.icon,{className:"w-6 h-6 text-white"})}),e.jsxs(b,{className:`${x.changeType==="positive"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"} transition-colors font-semibold`,children:[x.changeType==="positive"?e.jsx(S,{className:"w-3 h-3 mr-1"}):e.jsx(z,{className:"w-3 h-3 mr-1"}),x.change]})]}),e.jsx("h3",{className:"text-sm font-medium text-slate-600 mb-2",children:x.title}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 mb-1",children:x.value}),e.jsx("p",{className:"text-xs text-slate-500",children:x.description})]})})},x.title))}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs(E,{onClick:()=>window.location.href="/",className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[e.jsx(xe,{className:"w-5 h-5 mr-2"}),"View Detailed Dashboard"]})})]})},he=({data:l,showTrends:T=!1})=>{const x=g.useMemo(()=>{const d=l.sales.reduce((a,n)=>{const s=new Date(n.paymentDate).toLocaleDateString();return a[s]||(a[s]={date:s,revenue:0,transactions:0}),a[s].revenue+=n.paymentValue||0,a[s].transactions+=1,a},{});return Object.values(d).slice(0,7)},[l.sales]),m=g.useMemo(()=>{const d=l.leads.reduce((a,n)=>{const s=n.source||"Unknown";return a[s]||(a[s]={source:s,leads:0,conversions:0,rate:0}),a[s].leads+=1,n.conversionStatus==="Converted"&&(a[s].conversions+=1),a},{});return Object.values(d).map(a=>({...a,rate:a.leads>0?a.conversions/a.leads*100:0}))},[l.leads]),j=g.useMemo(()=>{const d=l.sessions.reduce((n,s)=>{const t=s.cleanedClass||"Unknown";return n[t]=(n[t]||0)+1,n},{}),a=["#8B5CF6","#06B6D4","#10B981","#F59E0B","#EF4444"];return Object.entries(d).map(([n,s],t)=>({name:n,value:s,color:a[t%a.length]}))},[l.sessions]);return g.useMemo(()=>l.payroll.sort((d,a)=>(a.totalPaid||0)-(d.totalPaid||0)).slice(0,5).map(d=>({trainer:d.teacherName||"Unknown",revenue:d.totalPaid||0,sessions:d.totalSessions||0,customers:d.totalCustomers||0})),[l.payroll]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:T?"Performance Trends":"Business Analytics Charts"}),e.jsx("p",{className:"text-slate-600",children:"Visual insights from previous month's real data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Daily Revenue Trend",e.jsx(b,{className:"bg-white/20 text-white",children:"Last 7 Days"})]})}),e.jsx(N,{className:"p-6",children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(ss,{data:x,children:[e.jsx(Q,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:"date"}),e.jsx(se,{}),e.jsx(te,{formatter:d=>A(d)}),e.jsx(ae,{}),e.jsx(ts,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#8B5CF6",fill:"#8B5CF6",fillOpacity:.6,name:"Revenue ($)"}),e.jsx(as,{type:"monotone",dataKey:"transactions",stroke:"#06B6D4",strokeWidth:3,name:"Transactions"})]})})})]}),e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),"Lead Conversion by Source",e.jsxs(b,{className:"bg-white/20 text-white",children:[l.leads.length," leads"]})]})}),e.jsx(N,{className:"p-6",children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(de,{data:m,children:[e.jsx(Q,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:"source"}),e.jsx(se,{}),e.jsx(te,{}),e.jsx(ae,{}),e.jsx(R,{dataKey:"leads",fill:"#94A3B8",name:"Total Leads"}),e.jsx(R,{dataKey:"conversions",fill:"#10B981",name:"Conversions"})]})})})]}),e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Class Type Performance",e.jsxs(b,{className:"bg-white/20 text-white",children:[l.sessions.length," sessions"]})]})}),e.jsx(N,{className:"p-6",children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(de,{data:j.slice(0,6),children:[e.jsx(Q,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),e.jsx(se,{}),e.jsx(te,{}),e.jsx(ae,{}),e.jsx(R,{dataKey:"value",fill:"#8B5CF6",name:"Sessions"})]})})})]}),e.jsxs(f,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Funnel Performance",e.jsx(b,{className:"bg-white/20 text-white",children:"Leads to Conversion"})]})}),e.jsx(N,{className:"p-6",children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(de,{data:m.slice(0,5),children:[e.jsx(Q,{strokeDasharray:"3 3"}),e.jsx(ee,{dataKey:"source"}),e.jsx(se,{}),e.jsx(te,{formatter:(d,a)=>a==="rate"?`${d.toFixed(1)}%`:d}),e.jsx(ae,{}),e.jsx(R,{dataKey:"leads",fill:"#94A3B8",name:"Total Leads"}),e.jsx(R,{dataKey:"conversions",fill:"#10B981",name:"Conversions"}),e.jsx(R,{dataKey:"rate",fill:"#F59E0B",name:"Conversion Rate %"})]})})})]})]})]})},is=({data:l,selectedLocation:T})=>{const x=g.useMemo(()=>{const s=l.sales.reduce((t,r)=>{const i=r.cleanedProduct||"Unknown Product",o=r.cleanedCategory||"Uncategorized";return t[i]||(t[i]={product:i,category:o,revenue:0,transactions:0,avgValue:0}),t[i].revenue+=r.paymentValue||0,t[i].transactions+=1,t[i].avgValue=t[i].revenue/t[i].transactions,t},{});return Object.values(s).sort((t,r)=>r.revenue-t.revenue).slice(0,10)},[l.sales]),m=g.useMemo(()=>{const s=l.leads.reduce((t,r)=>{const i=r.source||"Unknown Source";return t[i]||(t[i]={source:i,total:0,converted:0,conversionRate:0}),t[i].total+=1,r.conversionStatus==="Converted"&&(t[i].converted+=1),t[i].conversionRate=t[i].total>0?t[i].converted/t[i].total*100:0,t},{});return Object.values(s).sort((t,r)=>r.total-t.total).slice(0,8)},[l.leads]),j=g.useMemo(()=>{const s=l.newClients.reduce((t,r)=>{const i=r.firstClassType||"Unknown Class";return t[i]||(t[i]={className:i,newClients:0,retained:0,retentionRate:0}),t[i].newClients+=1,r.retentionStatus==="Retained"&&(t[i].retained+=1),t[i].retentionRate=t[i].newClients>0?t[i].retained/t[i].newClients*100:0,t},{});return Object.values(s).sort((t,r)=>r.newClients-t.newClients).slice(0,8)},[l.newClients]),d=g.useMemo(()=>{const s=l.sessions.reduce((r,i)=>{const o=i.cleanedClass||"Unknown Class";return r[o]||(r[o]={className:o,sessions:0,totalAttendance:0,totalCapacity:0,fillRate:0,avgAttendance:0}),r[o].sessions+=1,r[o].totalAttendance+=i.checkedInCount||0,r[o].totalCapacity+=i.capacity||0,r[o].avgAttendance=r[o].totalAttendance/r[o].sessions,r[o].fillRate=r[o].totalCapacity>0?r[o].totalAttendance/r[o].totalCapacity*100:0,r},{}),t=Object.values(s).sort((r,i)=>i.fillRate-r.fillRate);return{top:t.slice(0,5),bottom:t.slice(-5).reverse()}},[l.sessions]),a=g.useMemo(()=>{const s=l.sessions.reduce((r,i)=>{const o=i.trainerName||"Unknown Trainer";return r[o]||(r[o]={trainer:o,sessions:0,totalAttendance:0,avgAttendance:0,fillRate:0}),r[o].sessions+=1,r[o].totalAttendance+=i.checkedInCount||0,r[o].avgAttendance=r[o].totalAttendance/r[o].sessions,r},{}),t=Object.values(s).sort((r,i)=>i.avgAttendance-r.avgAttendance);return{top:t.slice(0,5),bottom:t.slice(-5).reverse()}},[l.sessions]),n=g.useMemo(()=>{const s=l.sessions.filter(o=>o.cleanedClass?.toLowerCase().includes("cycle")||o.classType?.toLowerCase().includes("cycle")),t=l.sessions.filter(o=>o.cleanedClass?.toLowerCase().includes("barre")),r={sessions:s.length,attendance:s.reduce((o,C)=>o+(C.checkedInCount||0),0),avgAttendance:s.length>0?s.reduce((o,C)=>o+(C.checkedInCount||0),0)/s.length:0},i={sessions:t.length,attendance:t.reduce((o,C)=>o+(C.checkedInCount||0),0),avgAttendance:t.length>0?t.reduce((o,C)=>o+(C.checkedInCount||0),0)/t.length:0};return{powerCycle:r,barre:i}},[l.sessions]);return!l||Object.values(l).every(s=>s.length===0)?e.jsxs("div",{className:"text-center text-gray-600 p-8",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No data available for the selected location and time period."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{className:"bg-gradient-to-br from-white via-blue-50/30 to-white border-0 shadow-lg",children:[e.jsx(w,{className:"pb-4",children:e.jsxs(y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-blue-600"}),"Top Products by Revenue",e.jsxs(b,{variant:"secondary",children:[x.length," items"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:x.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.product}),e.jsx("p",{className:"text-xs text-slate-500",children:s.category})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-slate-900",children:A(s.revenue)}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.transactions," sales"]})]})]},s.product))})})]}),e.jsxs(f,{className:"bg-gradient-to-br from-white via-green-50/30 to-white border-0 shadow-lg",children:[e.jsx(w,{className:"pb-4",children:e.jsxs(y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-green-600"}),"Lead Sources & Conversion",e.jsxs(b,{variant:"secondary",children:[m.length," sources"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:m.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.source}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.total," leads"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[s.conversionRate.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.converted," converted"]})]})]},s.source))})})]}),e.jsxs(f,{className:"bg-gradient-to-br from-white via-purple-50/30 to-white border-0 shadow-lg",children:[e.jsx(w,{className:"pb-4",children:e.jsxs(y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-purple-600"}),"New Clients by Class Type",e.jsxs(b,{variant:"secondary",children:[j.length," classes"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:j.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-purple-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.className}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.newClients," new clients"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-slate-900",children:[s.retentionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"retention"})]})]},s.className))})})]}),e.jsxs(f,{className:"bg-gradient-to-br from-white via-orange-50/30 to-white border-0 shadow-lg",children:[e.jsx(w,{className:"pb-4",children:e.jsxs(y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-orange-600"}),"Class Performance Rankings"]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-green-700 mb-2 flex items-center gap-1",children:[e.jsx(S,{className:"w-4 h-4"}),"Top Performing"]}),e.jsx("div",{className:"space-y-2",children:d.top.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:s.className})]}),e.jsxs("span",{className:"text-sm font-bold text-green-700",children:[s.fillRate.toFixed(1),"%"]})]},s.className))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-red-700 mb-2 flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),"Needs Improvement"]}),e.jsx("div",{className:"space-y-2",children:d.bottom.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:s.className})]}),e.jsxs("span",{className:"text-sm font-bold text-red-700",children:[s.fillRate.toFixed(1),"%"]})]},s.className))})]})]})})]}),e.jsxs(f,{className:"bg-gradient-to-br from-white via-indigo-50/30 to-white border-0 shadow-lg lg:col-span-2",children:[e.jsx(w,{className:"pb-4",children:e.jsxs(y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-indigo-600"}),"PowerCycle vs Barre Performance"]})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(le,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-800",children:"PowerCycle"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.powerCycle.sessions}),e.jsx("p",{className:"text-xs text-blue-600",children:"Sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.powerCycle.attendance}),e.jsx("p",{className:"text-xs text-blue-600",children:"Total Attendance"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.powerCycle.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-blue-600",children:"Avg per Session"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(B,{className:"w-5 h-5 text-pink-600"}),e.jsx("h4",{className:"font-semibold text-pink-800",children:"Barre"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-900",children:n.barre.sessions}),e.jsx("p",{className:"text-xs text-pink-600",children:"Sessions"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-900",children:n.barre.attendance}),e.jsx("p",{className:"text-xs text-pink-600",children:"Total Attendance"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-pink-900",children:n.barre.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-pink-600",children:"Avg per Session"})]})]})]})]})})]}),e.jsxs(f,{className:"bg-gradient-to-br from-white via-teal-50/30 to-white border-0 shadow-lg lg:col-span-2",children:[e.jsx(w,{className:"pb-4",children:e.jsxs(y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-teal-600"}),"Trainer Performance Rankings"]})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-green-700 mb-3 flex items-center gap-1",children:[e.jsx(S,{className:"w-4 h-4"}),"Top Performers"]}),e.jsx("div",{className:"space-y-3",children:a.top.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.trainer}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.sessions," sessions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-green-700",children:s.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-slate-500",children:"avg attendance"})]})]},s.trainer))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-orange-700 mb-3 flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),"Needs Support"]}),e.jsx("div",{className:"space-y-3",children:a.bottom.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-bold text-orange-600",children:["#",t+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800 text-sm",children:s.trainer}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.sessions," sessions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-orange-700",children:s.avgAttendance.toFixed(1)}),e.jsx("p",{className:"text-xs text-slate-500",children:"avg attendance"})]})]},s.trainer))})]})]})})]})]})},os=({data:l})=>{const T=_.useMemo(()=>{const a=l.sessions.reduce((n,s)=>{const t=s.cleanedClass||"Unknown";return n[t]||(n[t]={classType:t,totalAttendance:0,sessions:0,avgAttendance:0}),n[t].totalAttendance+=s.checkedInCount||0,n[t].sessions+=1,n},{});return Object.values(a).map(n=>({...n,avgAttendance:n.sessions>0?n.totalAttendance/n.sessions:0})).sort((n,s)=>s.totalAttendance-n.totalAttendance).slice(0,5).map((n,s)=>({...n,rank:s+1}))},[l.sessions]),x=_.useMemo(()=>{const a=l.sales.reduce((n,s)=>{const t=s.paymentItem||"Unknown";return n[t]||(n[t]={product:t,revenue:0,transactions:0}),n[t].revenue+=s.paymentValue||0,n[t].transactions+=1,n},{});return Object.values(a).sort((n,s)=>s.revenue-n.revenue).slice(0,5).map((n,s)=>({...n,rank:s+1}))},[l.sales]),m=_.useMemo(()=>l.sessions.sort((a,n)=>(n.checkedInCount||0)-(a.checkedInCount||0)).slice(0,5).map((a,n)=>({...a,rank:n+1})),[l.sessions]),j=_.useMemo(()=>l.newClients.filter(a=>a.ltv>0).sort((a,n)=>(n.ltv||0)-(a.ltv||0)).slice(0,5).map((a,n)=>({...a,rank:n+1})),[l.newClients]),d=({rank:a})=>{const n=()=>{switch(a){case 1:return e.jsx(Pe,{className:"w-3 h-3"});case 2:return e.jsx(Le,{className:"w-3 h-3"});case 3:return e.jsx(De,{className:"w-3 h-3"});default:return e.jsx(pe,{className:"w-3 h-3"})}},s=()=>{switch(a){case 1:return"bg-yellow-500 text-yellow-50";case 2:return"bg-gray-400 text-gray-50";case 3:return"bg-amber-600 text-amber-50";default:return"bg-blue-500 text-blue-50"}};return e.jsxs(b,{className:`${s()} font-bold`,children:[n(),"#",a]})};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(f,{className:"shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-purple-600 to-violet-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Top Class Types by Attendance",e.jsx(b,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(N,{className:"p-6 space-y-4",children:T.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.classType}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.sessions," sessions"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:F(a.totalAttendance)}),e.jsx("p",{className:"text-sm text-gray-600",children:"total attendance"})]})]},a.classType))})]}),e.jsxs(f,{className:"shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"Top Products by Revenue",e.jsx(b,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(N,{className:"p-6 space-y-4",children:x.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.product}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.transactions," transactions"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-bold text-lg",children:A(a.revenue)})})]},a.product))})]}),e.jsxs(f,{className:"shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),"Top Sessions by Attendance",e.jsx(b,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(N,{className:"p-6 space-y-4",children:m.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.cleanedClass}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.trainerName," • ",a.date]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:a.checkedInCount||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"attendees"})]})]},a.sessionId))})]}),e.jsxs(f,{className:"shadow-xl border-0",children:[e.jsx(w,{className:"bg-gradient-to-r from-orange-600 to-red-600 text-white",children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Top Clients by LTV",e.jsx(b,{className:"bg-white/20 text-white",children:"Previous Month"})]})}),e.jsx(N,{className:"p-6 space-y-4",children:j.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{rank:a.rank}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.homeLocation})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:A(a.ltv||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"LTV"})]})]},a.memberId))})]})]})},cs=({availableLocations:l})=>{const[T,x]=g.useState(!1),{filters:m,updateFilters:j,clearFilters:d}=ve(),a=t=>{const r=Array.isArray(m.location)?m.location:[];if(t==="all")j({location:[]});else{const i=r.includes(t);j(i?{location:r.filter(o=>o!==t)}:{location:[t]})}},n=Array.isArray(m.location)?m.location[0]:m.location,s=m.location&&m.location.length>0;return e.jsx(f,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:e.jsxs(Ue,{open:T,onOpenChange:x,children:[e.jsx(Ge,{asChild:!0,children:e.jsx(w,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(y,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Filters & Controls"}),e.jsxs("p",{className:"text-sm text-gray-600 font-normal",children:["Data filtered for ",ce(),n&&` • ${n}`]})]}),s&&e.jsxs(b,{className:"bg-blue-100 text-blue-800 ml-2",children:[m.location?.length||0," filter",m.location?.length!==1?"s":""," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsxs(E,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),d()},className:"text-gray-600 hover:text-red-600",children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),"Clear"]}),T?e.jsx(Fe,{className:"w-5 h-5 text-gray-500"}):e.jsx(Ve,{className:"w-5 h-5 text-gray-500"})]})]})})}),e.jsx(Ke,{children:e.jsxs(N,{className:"pt-0 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(re,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Date Range"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Showing data for ",ce()," (Previous Month)"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Location Filter"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(E,{variant:n?"outline":"default",size:"sm",onClick:()=>a("all"),className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"All Locations"]}),l.map(t=>e.jsxs(E,{variant:n===t?"default":"outline",size:"sm",onClick:()=>a(t),className:"flex items-center gap-2",children:[t,n===t&&e.jsx(b,{className:"bg-white/20 text-current ml-1",children:"Active"})]},t))]})]}),s&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Active Filters Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsxs("span",{children:["Location: ",n||"All"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{children:["Period: ",ce()]})]})]})]})]})})]})})},ds=()=>{const[l,T]=g.useState(!1),[x,m]=g.useState("overview"),[j,d]=g.useState(!1),a=g.useRef(null),{filters:n}=ve(),{setLoading:s}=qe(),{data:t,loading:r}=He(),{data:i,loading:o}=We(),{data:C,isLoading:X}=Ze(),{data:L,loading:q}=_e(),{data:H,loading:W}=Je(),{data:I,loading:Z}=Qe(),P=r||o||X||q||W||Z;g.useEffect(()=>{s(P,"Loading executive dashboard overview...")},[P,s]);const h=g.useMemo(()=>{const u=new Set;return t?.forEach(p=>{p.calculatedLocation&&u.add(p.calculatedLocation)}),i?.forEach(p=>{p.location&&u.add(p.location)}),L?.forEach(p=>{p.homeLocation&&u.add(p.homeLocation)}),C?.forEach(p=>{p.location&&u.add(p.location)}),Array.from(u).sort()},[t,i,L,C]),c=g.useMemo(()=>{const u=new Date,p=new Date(u.getFullYear(),u.getMonth()-1,1),Ne=new Date(u.getFullYear(),u.getMonth(),1),U=v=>{const k=new Date(v);return k>=p&&k<Ne},M=(v,k)=>{if(!n.location||n.location.length===0)return v;const G=Array.isArray(n.location)?n.location[0]:n.location;return v.filter(Se=>Se[k]===G)},be=M(t?.filter(v=>U(v.paymentDate))||[],"calculatedLocation"),we=M(i?.filter(v=>U(v.date))||[],"location"),ye=M(C?.filter(v=>{const k=v.monthYear,G=p.toLocaleDateString("en-US",{month:"short",year:"numeric"});return k===G})||[],"location"),Ce=M(L?.filter(v=>U(v.firstVisitDate))||[],"homeLocation"),Te=`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}`,Ae=M(H?.filter(v=>{const k=v.createdAt?U(v.createdAt):!1,G=v.period?v.period===Te:!1;return k||G})||[],"center"),ke=M(I?.filter(v=>U(v.paymentDate))||[],"location");return{sales:be,sessions:we,payroll:ye,newClients:Ce,leads:Ae,discounts:ke}},[t,i,C,L,H,I,n.location]);if(P)return null;const O=Array.isArray(n.location)?n.location[0]:n.location,fe=()=>{if(a.current)if(j)a.current.pause(),d(!1);else{const u=O==="Kwality House"?"/kwality-house-audio.mp3":"/placeholder-audio.mp3";a.current.src=u,a.current.play(),d(!0)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20 p-6",children:[e.jsxs("audio",{ref:a,onEnded:()=>d(!1),preload:"metadata",children:[e.jsx("source",{src:"/placeholder-audio.mp3",type:"audio/mpeg"}),"Your browser does not support the audio element."]}),e.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-900 via-purple-800 to-indigo-700 rounded-3xl text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-4 -left-4 w-32 h-32 bg-white/10 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute top-20 right-10 w-24 h-24 bg-indigo-300/20 rounded-full animate-bounce delay-1000"}),e.jsx("div",{className:"absolute bottom-10 left-20 w-40 h-40 bg-purple-300/10 rounded-full animate-pulse delay-500"})]}),e.jsx("div",{className:"relative p-12",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 border border-white/20 animate-fade-in-up",children:[e.jsx(xe,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"Executive Dashboard"})]}),e.jsx("h1",{className:"text-6xl md:text-7xl font-bold bg-gradient-to-r from-white via-indigo-100 to-purple-100 bg-clip-text text-transparent animate-fade-in-up delay-200",children:"Executive Overview"}),e.jsxs("p",{className:"text-xl text-indigo-100 max-w-4xl mx-auto leading-relaxed animate-fade-in-up delay-300",children:["Comprehensive real-time insights across Sales, Leads, Sessions, Trainers, and Client Conversions",O&&` - ${O}`]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 animate-fade-in-up delay-400",children:[e.jsxs(b,{className:"bg-white/10 text-white border-white/20 px-4 py-2",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Previous Month Data"]}),e.jsxs(b,{className:"bg-green-500/20 text-green-100 border-green-400/30 px-4 py-2",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Live Analytics"]}),e.jsxs(b,{className:"bg-blue-500/20 text-blue-100 border-blue-400/30 px-4 py-2",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),c.sales.length+c.sessions.length+c.newClients.length," Records"]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs(E,{onClick:fe,className:"bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm px-6 py-3 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[j?e.jsx(Be,{className:"w-5 h-5 mr-2"}):e.jsx(Ee,{className:"w-5 h-5 mr-2"}),j?"Pause":"Play"]}),e.jsx($e,{salesData:c.sales,sessionsData:c.sessions,newClientData:c.newClients,payrollData:c.payroll,lateCancellationsData:[],discountData:c.discounts,defaultFileName:"executive-dashboard-export",size:"lg",variant:"outline"}),e.jsxs(E,{onClick:()=>window.location.href="/",className:"bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm px-6 py-3 rounded-full text-lg font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"Back to Main Dashboard"]})]})]})})]}),e.jsx(cs,{availableLocations:h}),e.jsx(rs,{data:c}),e.jsx(he,{data:c}),e.jsxs(f,{className:"bg-white/90 backdrop-blur-sm shadow-2xl border-0 overflow-hidden",children:[e.jsx(w,{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-purple-900 text-white border-0",children:e.jsxs(y,{className:"text-2xl font-bold flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(S,{className:"w-6 h-6"})}),"Comprehensive Performance Analytics",e.jsx(b,{className:"bg-white/20 text-white backdrop-blur-sm px-3 py-1",children:"15+ Data Tables"})]})}),e.jsx(N,{className:"p-8",children:e.jsxs(ze,{value:x,onValueChange:m,className:"w-full",children:[e.jsxs(Ye,{className:"bg-white/90 backdrop-blur-sm p-2 rounded-2xl shadow-xl border-0 grid grid-cols-5 w-full max-w-6xl mx-auto overflow-hidden mb-8",children:[e.jsxs(K,{value:"overview",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Data Tables"]}),e.jsxs(K,{value:"performers",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Top Performers"]}),e.jsxs(K,{value:"trends",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Trend Analysis"]}),e.jsxs(K,{value:"discounts",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Discounts"]}),e.jsxs(K,{value:"insights",className:"relative rounded-xl px-4 py-3 font-semibold text-sm transition-all duration-300 ease-out hover:scale-105 data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Insights"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{value:"overview",className:"space-y-6 mt-0",children:e.jsx(is,{data:c,selectedLocation:O})}),e.jsx($,{value:"performers",className:"space-y-6 mt-0",children:e.jsx(os,{data:c})}),e.jsx($,{value:"trends",className:"space-y-6 mt-0",children:e.jsx(he,{data:c,showTrends:!0})}),e.jsxs($,{value:"discounts",className:"space-y-6 mt-0",children:[e.jsx(ns,{data:c.sales,selectedLocation:O}),e.jsx(ls,{data:{sessions:c.sessions,payroll:c.payroll,sales:c.sales}})]}),e.jsx($,{value:"insights",className:"space-y-6 mt-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{className:"bg-gradient-to-br from-blue-50 to-indigo-100 border-blue-200",children:[e.jsx(w,{children:e.jsx(y,{className:"text-blue-800",children:"Key Performance Insights"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(S,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Total Revenue: $",c.sales.reduce((u,p)=>u+p.paymentValue,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["New Clients: ",c.newClients.length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(Y,{className:"w-5 h-5 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Total Sessions: ",c.sessions.length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Discount Transactions: ",c.discounts.length]})]})]})]}),e.jsxs(f,{className:"bg-gradient-to-br from-green-50 to-emerald-100 border-green-200",children:[e.jsx(w,{children:e.jsx(y,{className:"text-green-800",children:"Action Items"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(ge,{className:"w-5 h-5 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Sessions with low attendance: ",c.sessions.filter(u=>u.checkedInCount<u.capacity*.5).length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(z,{className:"w-5 h-5 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Empty sessions: ",c.sessions.filter(u=>u.checkedInCount===0).length]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(le,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Lead conversion rate: ",c.leads.length>0?(c.leads.filter(u=>u.conversionStatus==="Converted").length/c.leads.length*100).toFixed(1):"0","%"]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/80 rounded-lg",children:[e.jsx(V,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Total Discount Amount: $",c.discounts.reduce((u,p)=>u+p.discountAmount,0).toLocaleString()]})]})]})]})]})})]})]})})]}),l&&e.jsx(Xe,{open:l,onOpenChange:T,sources:[{name:"Sales Data (Previous Month)",data:c.sales},{name:"Sessions Data (Previous Month)",data:c.sessions},{name:"New Clients Data (Previous Month)",data:c.newClients},{name:"Leads Data (Previous Month)",data:c.leads},{name:"Payroll Data (Previous Month)",data:c.payroll},{name:"Discounts Data (Previous Month)",data:c.discounts}]})]}),e.jsx("style",{children:`
        @keyframes fade-in-up {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .animate-fade-in-up {
          animation: fade-in-up 0.6s ease-out forwards;
        }
        
        .delay-200 {
          animation-delay: 0.2s;
        }
        
        .delay-300 {
          animation-delay: 0.3s;
        }
        
        .delay-400 {
          animation-delay: 0.4s;
        }
      `})]})},fs=()=>e.jsx(ds,{});export{fs as E,vs as G,ve as u};
