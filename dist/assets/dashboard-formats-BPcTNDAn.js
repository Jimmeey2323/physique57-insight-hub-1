import{r as P,j as e,g as T,T as F,i as D,U as A,h as E,F as he,X as ue,C as we,b as Se,M as ae,c as M,d as le,Z as L,Y as z,N as te,O as re,w as Ce,s as q,V as ne,v as ke,a6 as Re,e as ee,a7 as Pe,a8 as Be,E as se,Q as Fe,o as Ae}from"./react-vendor-dqSXVcdP.js";import{C as y,j as w,k as S,c as f,a as Te,b as De,B,d as O,e as $e,L as Y,S as K,f as H,g as W,h as G,i as V,r as ge,s as je,t as $,u as I,Z as Ie,_ as Ee,$ as Me,a0 as Le}from"./ui-components-DsfbLwT7.js";import{c as m,b as X,f as Z,o as Oe,p as U}from"./utils-BhCMrGmG.js";import{R as Q,B as ie,C as oe,X as ce,Y as de,T as _,a as me,c as J,P as Ue,d as ze,e as Ve}from"./chart-vendor-By6BsRZf.js";const qe={"Power Cycle":"#8B5CF6",Barre:"#06B6D4",Strength:"#10B981"},ls=({data:l})=>{const b=P.useMemo(()=>{const o=l.sessions.reduce((s,i)=>{const h=i.cleanedClass||"Unknown";let t="Other";return h.toLowerCase().includes("cycle")||h.toLowerCase().includes("spinning")?t="Power Cycle":h.toLowerCase().includes("barre")?t="Barre":(h.toLowerCase().includes("strength")||h.toLowerCase().includes("weights"))&&(t="Strength"),s[t]||(s[t]={category:t,sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),s[t].sessions+=1,s[t].totalAttendance+=i.checkedInCount||0,s[t].totalCapacity+=i.capacity||0,s[t].uniqueInstructors.add(i.instructor),s},{});return l.payroll.forEach(s=>{s.cycleSessions>0&&(o["Power Cycle"]||(o["Power Cycle"]={category:"Power Cycle",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),o["Power Cycle"].revenue+=s.cyclePaid||0),s.barreSessions>0&&(o.Barre||(o.Barre={category:"Barre",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),o.Barre.revenue+=s.barrePaid||0),s.strengthSessions>0&&(o.Strength||(o.Strength={category:"Strength",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),o.Strength.revenue+=s.strengthPaid||0)}),Object.values(o).filter(s=>["Power Cycle","Barre","Strength"].includes(s.category)).map(s=>({...s,avgAttendance:s.sessions>0?s.totalAttendance/s.sessions:0,fillRate:s.totalCapacity>0?s.totalAttendance/s.totalCapacity*100:0,instructorCount:s.uniqueInstructors.size,revenuePerSession:s.sessions>0?s.revenue/s.sessions:0}))},[l.sessions,l.payroll]),a=P.useMemo(()=>b.map(o=>({category:o.category,sessions:o.sessions,attendance:o.totalAttendance,avgAttendance:o.avgAttendance,fillRate:o.fillRate,revenue:o.revenue,instructors:o.instructorCount,color:qe[o.category]||"#9CA3AF"})),[b]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(y,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"PowerCycle vs Barre vs Strength Analysis"}),e.jsx("p",{className:"text-gray-600 font-normal",children:"Comprehensive performance comparison across class formats"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(o=>e.jsx(y,{className:"bg-white shadow-xl border-0 overflow-hidden",children:e.jsx(f,{className:"p-0",children:e.jsxs("div",{className:"p-6 text-white relative overflow-hidden",style:{backgroundColor:o.color},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 transform translate-x-8 -translate-y-8 opacity-20",children:e.jsx(T,{className:"w-20 h-20"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:o.category}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Sessions"}),e.jsx("span",{className:"font-bold",children:m(o.sessions)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Total Attendance"}),e.jsx("span",{className:"font-bold",children:m(o.attendance)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Avg per Session"}),e.jsx("span",{className:"font-bold",children:o.avgAttendance.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Fill Rate"}),e.jsx("span",{className:"font-bold",children:X(o.fillRate)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Revenue"}),e.jsx("span",{className:"font-bold",children:Z(o.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Instructors"}),e.jsx("span",{className:"font-bold",children:o.instructors})]})]})]})]})})},o.category))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-purple-600"}),"Sessions & Attendance Comparison"]})}),e.jsx(f,{children:e.jsx(Q,{width:"100%",height:300,children:e.jsxs(ie,{data:a,children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(ce,{dataKey:"category"}),e.jsx(de,{}),e.jsx(_,{}),e.jsx(me,{}),e.jsx(J,{dataKey:"sessions",fill:"#8B5CF6",name:"Sessions"}),e.jsx(J,{dataKey:"attendance",fill:"#06B6D4",name:"Total Attendance"})]})})})]}),e.jsxs(y,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),"Revenue Comparison"]})}),e.jsx(f,{children:e.jsx(Q,{width:"100%",height:300,children:e.jsxs(ie,{data:a,children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(ce,{dataKey:"category"}),e.jsx(de,{}),e.jsx(_,{formatter:o=>Z(o)}),e.jsx(me,{}),e.jsx(J,{dataKey:"revenue",fill:"#10B981",name:"Revenue ($)"})]})})})]}),e.jsxs(y,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),"Fill Rate Distribution"]})}),e.jsx(f,{children:e.jsx(Q,{width:"100%",height:300,children:e.jsxs(Ue,{children:[e.jsx(ze,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:o=>`${o.category}: ${X(o.fillRate)}`,outerRadius:80,fill:"#8884d8",dataKey:"fillRate",children:a.map((o,s)=>e.jsx(Ve,{fill:o.color},`cell-${s}`))}),e.jsx(_,{formatter:o=>[`${o.toFixed(1)}%`,"Fill Rate"]})]})})})]}),e.jsxs(y,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-orange-600"}),"Performance Summary"]})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-4",children:a.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-l-4",style:{borderLeftColor:o.color,backgroundColor:`${o.color}10`},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:o.category}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[m(o.sessions)," sessions"]}),e.jsxs("span",{children:[m(o.attendance)," attendees"]}),e.jsxs("span",{children:[X(o.fillRate)," fill rate"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:Z(o.revenue)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[o.instructors," instructors"]})]})]},o.category))})})]})]})]})},Ye=({data:l,selectedLocation:b,onLocationChange:a,selectedPeriod:o,onPeriodChange:s,selectedTrainer:i,onTrainerChange:h})=>{const[t,r]=P.useState(!1),n=P.useMemo(()=>{const c=[...new Set(l.map(R=>R.location))].filter(Boolean).sort(),C=[...new Set(l.map(R=>R.teacherName))].filter(Boolean).sort(),k=[...new Set(l.map(R=>R.monthYear))].filter(Boolean).sort();return{locations:c,trainers:C,monthYears:k}},[l]),j=[{value:"all",label:"All Periods"},...n.monthYears.map(c=>({value:c,label:c}))],x=b!=="all"||o!=="all"||i!=="all",N=[b!=="all"?1:0,o!=="all"?1:0,i!=="all"?1:0].filter(c=>c>0).length,d=()=>{a("all"),s("all"),h("all")};return e.jsx(y,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl overflow-hidden",children:e.jsxs(Te,{open:t,onOpenChange:r,children:[e.jsx(De,{asChild:!0,children:e.jsx(w,{className:"cursor-pointer hover:bg-gray-50/50 transition-colors bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"PowerCycle vs Barre vs Strength Filters"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Customize your comprehensive analysis"})]}),x&&e.jsxs(B,{className:"bg-white/20 text-white border-white/30",children:[N," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsxs(O,{variant:"outline",size:"sm",onClick:c=>{c.stopPropagation(),d()},className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Clear All"]}),t?e.jsx(we,{className:"w-4 h-4"}):e.jsx(Se,{className:"w-4 h-4"})]})]})})}),e.jsx($e,{children:e.jsxs(f,{className:"p-8 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h4",{className:"text-lg font-semibold text-slate-800",children:"Advanced Filter Options"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{htmlFor:"location-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-green-500"}),"Location"]}),e.jsxs(K,{value:b,onValueChange:a,children:[e.jsx(H,{id:"location-select",className:"bg-white border-slate-200",children:e.jsx(W,{placeholder:"Select location"})}),e.jsxs(G,{className:"bg-white border-slate-200",children:[e.jsx(V,{value:"all",children:"All Locations"}),n.locations.map(c=>e.jsx(V,{value:c,children:c},c))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{htmlFor:"period-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-blue-500"}),"Period"]}),e.jsxs(K,{value:o,onValueChange:s,children:[e.jsx(H,{id:"period-select",className:"bg-white border-slate-200",children:e.jsx(W,{placeholder:"Select period"})}),e.jsx(G,{className:"bg-white border-slate-200",children:j.map(c=>e.jsx(V,{value:c.value,children:c.label},c.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{htmlFor:"trainer-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-purple-500"}),"Trainer"]}),e.jsxs(K,{value:i,onValueChange:h,children:[e.jsx(H,{id:"trainer-select",className:"bg-white border-slate-200",children:e.jsx(W,{placeholder:"Select trainer"})}),e.jsxs(G,{className:"bg-white border-slate-200",children:[e.jsx(V,{value:"all",children:"All Trainers"}),n.trainers.map(c=>e.jsx(V,{value:c,children:c},c))]})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[b!=="all"&&e.jsxs(B,{variant:"secondary",className:"bg-green-100 text-green-800",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),b]}),o!=="all"&&e.jsxs(B,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),j.find(c=>c.value===o)?.label]}),i!=="all"&&e.jsxs(B,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),i]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:[l.length," total records available"]})]})})]})})]})})},Ke=({data:l,onItemClick:b})=>{const a=P.useMemo(()=>{if(!l.length)return null;const s={totalSessions:l.reduce((u,g)=>u+(g.cycleSessions||0),0),emptySessions:l.reduce((u,g)=>u+(g.emptyCycleSessions||0),0),nonEmptySessions:l.reduce((u,g)=>u+(g.nonEmptyCycleSessions||0),0),totalCustomers:l.reduce((u,g)=>u+(g.cycleCustomers||0),0),totalRevenue:l.reduce((u,g)=>u+(g.cyclePaid||0),0)},i={totalSessions:l.reduce((u,g)=>u+(g.barreSessions||0),0),emptySessions:l.reduce((u,g)=>u+(g.emptyBarreSessions||0),0),nonEmptySessions:l.reduce((u,g)=>u+(g.nonEmptyBarreSessions||0),0),totalCustomers:l.reduce((u,g)=>u+(g.barreCustomers||0),0),totalRevenue:l.reduce((u,g)=>u+(g.barrePaid||0),0)},h={totalSessions:l.reduce((u,g)=>u+(g.strengthSessions||0),0),emptySessions:l.reduce((u,g)=>u+(g.emptyStrengthSessions||0),0),nonEmptySessions:l.reduce((u,g)=>u+(g.nonEmptyStrengthSessions||0),0),totalCustomers:l.reduce((u,g)=>u+(g.strengthCustomers||0),0),totalRevenue:l.reduce((u,g)=>u+(g.strengthPaid||0),0)},t=s.totalSessions+i.totalSessions+h.totalSessions,r=s.totalRevenue+i.totalRevenue+h.totalRevenue,n=s.totalCustomers+i.totalCustomers+h.totalCustomers,j=s.emptySessions+i.emptySessions+h.emptySessions,x=l.reduce((u,g)=>u+(g.new||0),0),N=l.reduce((u,g)=>u+(g.converted||0),0),d=l.reduce((u,g)=>u+(g.retained||0),0),c=s.totalSessions>0?(s.totalSessions-s.emptySessions)/s.totalSessions*100:0,C=i.totalSessions>0?(i.totalSessions-i.emptySessions)/i.totalSessions*100:0,k=h.totalSessions>0?(h.totalSessions-h.emptySessions)/h.totalSessions*100:0,R=s.nonEmptySessions>0?s.totalCustomers/s.nonEmptySessions:0,p=i.nonEmptySessions>0?i.totalCustomers/i.nonEmptySessions:0,v=h.nonEmptySessions>0?h.totalCustomers/h.nonEmptySessions:0;return{powerCycle:s,barre:i,strength:h,totals:{sessions:t,revenue:r,customers:n,emptySessions:j,new:x,converted:N,retained:d},fillRates:{powerCycle:c,barre:C,strength:k},averages:{powerCycle:R,barre:p,strength:v}}},[l]);if(!a)return null;const o=[{title:"PowerCycle Sessions",value:m(a.powerCycle.totalSessions),icon:L,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"sessions",value:a.powerCycle.totalSessions}},{title:"PowerCycle Revenue",value:`₹${m(a.powerCycle.totalRevenue)}`,icon:D,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"revenue",value:a.powerCycle.totalRevenue}},{title:"PowerCycle Fill Rate",value:`${a.fillRates.powerCycle.toFixed(1)}%`,icon:F,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"fillRate",value:a.fillRates.powerCycle}},{title:"Barre Sessions",value:m(a.barre.totalSessions),icon:T,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"sessions",value:a.barre.totalSessions}},{title:"Barre Revenue",value:`₹${m(a.barre.totalRevenue)}`,icon:D,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"revenue",value:a.barre.totalRevenue}},{title:"Barre Fill Rate",value:`${a.fillRates.barre.toFixed(1)}%`,icon:F,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"fillRate",value:a.fillRates.barre}},{title:"Strength Sessions",value:m(a.strength.totalSessions),icon:z,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"sessions",value:a.strength.totalSessions}},{title:"Strength Revenue",value:`₹${m(a.strength.totalRevenue)}`,icon:D,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"revenue",value:a.strength.totalRevenue}},{title:"Strength Fill Rate",value:`${a.fillRates.strength.toFixed(1)}%`,icon:F,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"fillRate",value:a.fillRates.strength}},{title:"Total New Members",value:m(a.totals.new),icon:te,color:"from-purple-500 to-purple-600",bgColor:"from-purple-50 to-purple-100",data:{type:"overall",metric:"new",value:a.totals.new}},{title:"Total Converted",value:m(a.totals.converted),icon:re,color:"from-indigo-500 to-indigo-600",bgColor:"from-indigo-50 to-indigo-100",data:{type:"overall",metric:"converted",value:a.totals.converted}},{title:"Total Retained",value:m(a.totals.retained),icon:A,color:"from-teal-500 to-teal-600",bgColor:"from-teal-50 to-teal-100",data:{type:"overall",metric:"retained",value:a.totals.retained}}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map((s,i)=>e.jsx(y,{className:`bg-gradient-to-br ${s.bgColor} border-0 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group`,onClick:()=>b(s.data),children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${s.color} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s.icon,{className:"w-6 h-6 text-white"})}),e.jsx(B,{variant:"secondary",className:"bg-white/50 text-gray-700",children:s.data.type.charAt(0).toUpperCase()+s.data.type.slice(1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value})]})]})},i))}),e.jsxs(y,{className:"bg-gradient-to-br from-white via-gray-50/30 to-blue-50/20 border-0 shadow-xl",children:[e.jsx(w,{children:e.jsxs(S,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(T,{className:"w-6 h-6 text-blue-600"}),"Format Performance Summary"]})}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(L,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"PowerCycle"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:m(a.powerCycle.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",m(a.powerCycle.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:a.averages.powerCycle.toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border border-pink-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(T,{className:"w-5 h-5 text-pink-600"}),e.jsx("h4",{className:"font-semibold text-pink-900",children:"Barre"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:m(a.barre.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",m(a.barre.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:a.averages.barre.toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(z,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-semibold text-green-900",children:"Strength Lab"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:m(a.strength.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",m(a.strength.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:a.averages.strength.toFixed(1)})]})]})]})]})})]})]})},xe=({data:l,onItemClick:b,showDetailed:a=!1})=>{const o=P.useMemo(()=>{if(!l.length)return null;const t={sessions:l.reduce((d,c)=>d+(c.cycleSessions||0),0),emptySessions:l.reduce((d,c)=>d+(c.emptyCycleSessions||0),0),customers:l.reduce((d,c)=>d+(c.cycleCustomers||0),0),revenue:l.reduce((d,c)=>d+(c.cyclePaid||0),0)},r={sessions:l.reduce((d,c)=>d+(c.barreSessions||0),0),emptySessions:l.reduce((d,c)=>d+(c.emptyBarreSessions||0),0),customers:l.reduce((d,c)=>d+(c.barreCustomers||0),0),revenue:l.reduce((d,c)=>d+(c.barrePaid||0),0)},n={sessions:l.reduce((d,c)=>d+(c.strengthSessions||0),0),emptySessions:l.reduce((d,c)=>d+(c.emptyStrengthSessions||0),0),customers:l.reduce((d,c)=>d+(c.strengthCustomers||0),0),revenue:l.reduce((d,c)=>d+(c.strengthPaid||0),0)},j={...t,nonEmptySessions:t.sessions-t.emptySessions,fillRate:t.sessions>0?(t.sessions-t.emptySessions)/t.sessions*100:0,avgCustomersPerSession:t.sessions-t.emptySessions>0?t.customers/(t.sessions-t.emptySessions):0,revenuePerSession:t.sessions>0?t.revenue/t.sessions:0,revenuePerCustomer:t.customers>0?t.revenue/t.customers:0},x={...r,nonEmptySessions:r.sessions-r.emptySessions,fillRate:r.sessions>0?(r.sessions-r.emptySessions)/r.sessions*100:0,avgCustomersPerSession:r.sessions-r.emptySessions>0?r.customers/(r.sessions-r.emptySessions):0,revenuePerSession:r.sessions>0?r.revenue/r.sessions:0,revenuePerCustomer:r.customers>0?r.revenue/r.customers:0},N={...n,nonEmptySessions:n.sessions-n.emptySessions,fillRate:n.sessions>0?(n.sessions-n.emptySessions)/n.sessions*100:0,avgCustomersPerSession:n.sessions-n.emptySessions>0?n.customers/(n.sessions-n.emptySessions):0,revenuePerSession:n.sessions>0?n.revenue/n.sessions:0,revenuePerCustomer:n.customers>0?n.revenue/n.customers:0};return{powerCycle:j,barre:x,strength:N}},[l]);if(!o)return null;const s=(t,r=!0)=>{const n={powerCycle:o.powerCycle[t],barre:o.barre[t],strength:o.strength[t]};return Object.entries(n).sort(([,x],[,N])=>r?N-x:x-N)[0][0]},i=(t,r)=>{switch(r){case"percentage":return`${t.toFixed(1)}%`;case"currency":return`₹${m(t)}`;case"decimal":return t.toFixed(1);default:return m(t)}},h=[{key:"sessions",label:"Total Sessions",icon:M,type:"number",higherIsBetter:!0},{key:"revenue",label:"Total Revenue",icon:D,type:"currency",higherIsBetter:!0},{key:"customers",label:"Total Customers",icon:A,type:"number",higherIsBetter:!0},{key:"fillRate",label:"Fill Rate",icon:F,type:"percentage",higherIsBetter:!0},{key:"emptySessions",label:"Empty Sessions",icon:Ce,type:"number",higherIsBetter:!1},{key:"avgCustomersPerSession",label:"Avg Customers/Session",icon:A,type:"decimal",higherIsBetter:!0},...a?[{key:"revenuePerSession",label:"Revenue/Session",icon:D,type:"currency",higherIsBetter:!0},{key:"revenuePerCustomer",label:"Revenue/Customer",icon:D,type:"currency",higherIsBetter:!0},{key:"nonEmptySessions",label:"Non-Empty Sessions",icon:M,type:"number",higherIsBetter:!0}]:[]];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{className:"bg-gradient-to-br from-white via-yellow-50/30 to-amber-50/20 border-0 shadow-xl",children:[e.jsx(w,{className:"bg-gradient-to-r from-yellow-500 to-amber-500 text-white",children:e.jsxs(S,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(E,{className:"w-6 h-6"}),"Performance Comparison Dashboard"]})}),e.jsx(f,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(o).map(([t,r])=>e.jsxs("div",{className:`bg-gradient-to-br ${t==="powerCycle"?"from-blue-50 to-blue-100 border-blue-200":t==="barre"?"from-pink-50 to-pink-100 border-pink-200":"from-green-50 to-green-100 border-green-200"} rounded-xl p-4 border cursor-pointer hover:shadow-lg transition-all duration-300`,onClick:()=>b({type:"format",format:t,data:r}),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t==="powerCycle"&&e.jsx(L,{className:"w-6 h-6 text-blue-600"}),t==="barre"&&e.jsx(T,{className:"w-6 h-6 text-pink-600"}),t==="strength"&&e.jsx(z,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:`font-bold text-lg ${t==="powerCycle"?"text-blue-900":t==="barre"?"text-pink-900":"text-green-900"}`,children:t==="powerCycle"?"PowerCycle":t==="barre"?"Barre":"Strength Lab"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:m(r.sessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",m(r.revenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fill Rate:"}),e.jsxs("span",{className:"font-medium",children:[r.fillRate.toFixed(1),"%"]})]})]})]},t))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(t=>{const r=s(t.key,t.higherIsBetter);return e.jsxs(y,{className:"bg-white border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>b({type:"metric",metric:t.key,data:o}),children:[e.jsx(w,{className:"pb-3",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2 text-gray-700",children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.label]})}),e.jsx(f,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"PowerCycle"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:i(o.powerCycle[t.key],t.type)}),r==="powerCycle"&&e.jsxs(B,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Barre"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:i(o.barre[t.key],t.type)}),r==="barre"&&e.jsxs(B,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Strength"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:i(o.strength[t.key],t.type)}),r==="strength"&&e.jsxs(B,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]})]})})]},t.key)})})]})},He=({data:l,onItemClick:b})=>{const[a,o]=P.useState("revenue"),[s,i]=P.useState("all"),h=[{key:"revenue",label:"Total Revenue",icon:D,description:"Highest earning trainers",higherIsBetter:!0},{key:"sessions",label:"Total Sessions",icon:M,description:"Most active trainers",higherIsBetter:!0},{key:"customers",label:"Total Customers",icon:A,description:"Highest customer engagement",higherIsBetter:!0},{key:"fillRate",label:"Fill Rate",icon:F,description:"Best session utilization",higherIsBetter:!0},{key:"emptySessions",label:"Empty Sessions",icon:q,description:"Least empty sessions",higherIsBetter:!1},{key:"newMembers",label:"New Members",icon:te,description:"Most new member acquisitions",higherIsBetter:!0},{key:"conversion",label:"Conversion Rate",icon:re,description:"Best conversion performance",higherIsBetter:!0},{key:"retention",label:"Retention Rate",icon:A,description:"Best member retention",higherIsBetter:!0},{key:"avgCustomers",label:"Avg Customers/Session",icon:F,description:"Best session efficiency",higherIsBetter:!0}],t=P.useMemo(()=>{if(!l.length)return[];const x=l.map(d=>{const c=d.totalSessions||0,C=d.totalEmptySessions||0,k=d.totalPaid||0,R=d.totalCustomers||0,p=d.new||0;d.converted,d.retained;const v=d.cyclePaid||0,u=d.barrePaid||0,g=d.strengthPaid||0,pe=d.cycleSessions||0,be=d.barreSessions||0,Ne=d.strengthSessions||0,ye=d.cycleCustomers||0,fe=d.barreCustomers||0,ve=d.strengthCustomers||0;return{...d,revenue:s==="all"?k:s==="powercycle"?v:s==="barre"?u:g,sessions:s==="all"?c:s==="powercycle"?pe:s==="barre"?be:Ne,customers:s==="all"?R:s==="powercycle"?ye:s==="barre"?fe:ve,emptySessions:s==="all"?C:s==="powercycle"?d.emptyCycleSessions||0:s==="barre"?d.emptyBarreSessions||0:d.emptyStrengthSessions||0,fillRate:c>0?(c-C)/c*100:0,newMembers:p,conversion:parseFloat(d.conversion?.replace("%","")||"0"),retention:parseFloat(d.retention?.replace("%","")||"0"),avgCustomers:c-C>0?R/(c-C):0,lateCancellation:0}}),N=h.find(d=>d.key===a);return N?x.filter(d=>d[a]>0).sort((d,c)=>{const C=d[a],k=c[a];return N.higherIsBetter?k-C:C-k}):[]},[l,a,s]),r=x=>{switch(x){case 1:return e.jsx(ne,{className:"w-5 h-5 text-yellow-500"});case 2:return e.jsx(Re,{className:"w-5 h-5 text-gray-400"});case 3:return e.jsx(ke,{className:"w-5 h-5 text-amber-600"});default:return e.jsxs("span",{className:"w-5 h-5 flex items-center justify-center text-sm font-bold text-gray-500",children:["#",x]})}},n=(x,N)=>{switch(N){case"revenue":return`₹${m(x)}`;case"fillRate":case"conversion":case"retention":return`${x.toFixed(1)}%`;case"avgCustomers":return x.toFixed(1);default:return m(x)}},j=h.find(x=>x.key===a);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(w,{children:e.jsxs(S,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6 text-yellow-500"}),"Trainer Rankings & Performance"]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(O,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),children:"All Formats"}),e.jsx(O,{variant:s==="powercycle"?"default":"outline",size:"sm",onClick:()=>i("powercycle"),className:"bg-blue-500 hover:bg-blue-600 text-white",children:"PowerCycle"}),e.jsx(O,{variant:s==="barre"?"default":"outline",size:"sm",onClick:()=>i("barre"),className:"bg-pink-500 hover:bg-pink-600 text-white",children:"Barre"}),e.jsx(O,{variant:s==="strength"?"default":"outline",size:"sm",onClick:()=>i("strength"),className:"bg-green-500 hover:bg-green-600 text-white",children:"Strength Lab"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:h.map(x=>e.jsxs(O,{variant:a===x.key?"default":"outline",size:"sm",onClick:()=>o(x.key),className:"flex items-center gap-2 text-xs",children:[e.jsx(x.icon,{className:"w-4 h-4"}),x.label]},x.key))})]})]}),e.jsxs(y,{className:"bg-white border border-gray-200 shadow-lg",children:[e.jsxs(w,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs(S,{className:"text-lg font-bold flex items-center gap-3",children:[j?.icon&&e.jsx(j.icon,{className:"w-5 h-5"}),j?.label," Rankings",e.jsx(B,{variant:"secondary",className:"ml-auto",children:s==="all"?"All Formats":s==="powercycle"?"PowerCycle":s==="barre"?"Barre":"Strength Lab"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:j?.description})]}),e.jsx(f,{className:"p-0",children:e.jsx("div",{className:"space-y-1",children:t.slice(0,15).map((x,N)=>e.jsxs("div",{className:`flex items-center justify-between p-4 hover:bg-gray-50 cursor-pointer border-l-4 ${N===0?"border-yellow-400 bg-yellow-50/30":N===1?"border-gray-400 bg-gray-50/30":N===2?"border-amber-400 bg-amber-50/30":"border-transparent"}`,onClick:()=>b({type:"trainer",trainer:x,rank:N+1,metric:a,format:s}),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8",children:r(N+1)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x.teacherName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg",children:n(x[a],a)}),e.jsx("div",{className:"text-sm text-gray-500",children:x.totalSessions>0&&`${x.totalSessions} sessions`})]})]},x.unique))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.slice(0,3).map((x,N)=>e.jsx(y,{className:`cursor-pointer hover:shadow-lg transition-all duration-300 ${N===0?"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200":N===1?"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200":"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200"}`,onClick:()=>b({type:"trainer",trainer:x,rank:N+1,metric:a,format:s}),children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r(N+1),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:x.teacherName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.location})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:n(x[a],a)}),e.jsx("div",{className:"text-sm text-gray-600",children:j?.label}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[x.totalSessions," sessions"]}),e.jsxs("span",{children:[x.totalCustomers," customers"]})]})]})]})},x.unique))})]})},We=({data:l,onItemClick:b})=>e.jsxs(y,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(w,{children:e.jsxs(S,{className:"text-lg font-bold flex items-center gap-3 text-blue-900",children:[e.jsx(L,{className:"w-5 h-5"}),"PowerCycle Detailed Analytics"]})}),e.jsx(f,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-blue-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-blue-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:l.map((a,o)=>{const s=a.cycleSessions||0,i=a.emptyCycleSessions||0,h=a.cycleCustomers||0,t=a.cyclePaid||0,r=s>0?(s-i)/s*100:0,n=s>0?t/s:0,j=s-i>0?h/(s-i):0;return e.jsxs("tr",{className:"border-b border-blue-100 hover:bg-blue-50 cursor-pointer",onClick:()=>b({type:"powercycle-trainer",trainer:a,metrics:{sessions:s,emptySessions:i,customers:h,revenue:t,fillRate:r,revenuePerSession:n,avgCustomers:j}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900",children:a.teacherName}),e.jsx("div",{className:"text-sm text-blue-600",children:a.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:m(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:m(i)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(B,{variant:r>=80?"default":r>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),r.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:m(h)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",m(t)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",m(n)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:j.toFixed(1)})})]},a.unique)})})]})})})]}),Ge=({data:l,onItemClick:b})=>e.jsxs(y,{className:"bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsx(w,{children:e.jsxs(S,{className:"text-lg font-bold flex items-center gap-3 text-pink-900",children:[e.jsx(T,{className:"w-5 h-5"}),"Barre Detailed Analytics"]})}),e.jsx(f,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-pink-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-pink-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:l.map((a,o)=>{const s=a.barreSessions||0,i=a.emptyBarreSessions||0,h=a.barreCustomers||0,t=a.barrePaid||0,r=s>0?(s-i)/s*100:0,n=s>0?t/s:0,j=s-i>0?h/(s-i):0;return e.jsxs("tr",{className:"border-b border-pink-100 hover:bg-pink-50 cursor-pointer",onClick:()=>b({type:"barre-trainer",trainer:a,metrics:{sessions:s,emptySessions:i,customers:h,revenue:t,fillRate:r,revenuePerSession:n,avgCustomers:j}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-pink-900",children:a.teacherName}),e.jsx("div",{className:"text-sm text-pink-600",children:a.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:m(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:m(i)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(B,{variant:r>=80?"default":r>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),r.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:m(h)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",m(t)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",m(n)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:j.toFixed(1)})})]},a.unique)})})]})})})]}),Xe=({data:l,onItemClick:b})=>e.jsxs(y,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(w,{children:e.jsxs(S,{className:"text-lg font-bold flex items-center gap-3 text-green-900",children:[e.jsx(z,{className:"w-5 h-5"}),"Strength Lab Detailed Analytics"]})}),e.jsx(f,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-green-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-green-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:l.map((a,o)=>{const s=a.strengthSessions||0,i=a.emptyStrengthSessions||0,h=a.strengthCustomers||0,t=a.strengthPaid||0,r=s>0?(s-i)/s*100:0,n=s>0?t/s:0,j=s-i>0?h/(s-i):0;return e.jsxs("tr",{className:"border-b border-green-100 hover:bg-green-50 cursor-pointer",onClick:()=>b({type:"strength-trainer",trainer:a,metrics:{sessions:s,emptySessions:i,customers:h,revenue:t,fillRate:r,revenuePerSession:n,avgCustomers:j}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:a.teacherName}),e.jsx("div",{className:"text-sm text-green-600",children:a.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:m(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:m(i)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(B,{variant:r>=80?"default":r>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),r.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:m(h)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",m(t)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",m(n)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:j.toFixed(1)})})]},a.unique)})})]})})})]}),Ze=({data:l,onItemClick:b})=>{const[a,o]=P.useState("powercycle"),s=l.filter(t=>(t.cycleSessions||0)>0),i=l.filter(t=>(t.barreSessions||0)>0),h=l.filter(t=>(t.strengthSessions||0)>0);return e.jsx("div",{className:"space-y-6",children:e.jsxs(y,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(w,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(S,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(ee,{className:"w-6 h-6"}),"Detailed Format Analytics"]})}),e.jsx(f,{className:"p-6",children:e.jsxs(ge,{value:a,onValueChange:o,className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-3 bg-gray-100 p-1 rounded-lg",children:[e.jsxs($,{value:"powercycle",className:"text-sm font-medium",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"PowerCycle"]}),e.jsxs($,{value:"barre",className:"text-sm font-medium",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Barre"]}),e.jsxs($,{value:"strength",className:"text-sm font-medium",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Strength Lab"]})]}),e.jsx(I,{value:"powercycle",className:"mt-6",children:e.jsx(We,{data:s,onItemClick:b})}),e.jsx(I,{value:"barre",className:"mt-6",children:e.jsx(Ge,{data:i,onItemClick:b})}),e.jsx(I,{value:"strength",className:"mt-6",children:e.jsx(Xe,{data:h,onItemClick:b})})]})})]})})},Qe=({data:l,onItemClick:b})=>{const a=P.useMemo(()=>{if(!l||l.length===0)return{byLocation:[],byTrainer:[],byMonth:[]};const s=l.reduce((t,r)=>{const n=r.location||"Unknown";return t[n]||(t[n]={location:n,totalSessions:0,totalCustomers:0,cycleSessions:0,barreSessions:0,strengthSessions:0,totalPaid:0}),t[n].totalSessions+=r.totalSessions||0,t[n].totalCustomers+=r.totalCustomers||0,t[n].cycleSessions+=r.cycleSessions||0,t[n].barreSessions+=r.barreSessions||0,t[n].strengthSessions+=r.strengthSessions||0,t[n].totalPaid+=r.totalPaid||0,t},{}),i=l.reduce((t,r)=>{const n=r.teacherName||"Unknown";return t[n]||(t[n]={trainer:n,totalSessions:0,totalCustomers:0,cycleSessions:0,barreSessions:0,strengthSessions:0,totalPaid:0}),t[n].totalSessions+=r.totalSessions||0,t[n].totalCustomers+=r.totalCustomers||0,t[n].cycleSessions+=r.cycleSessions||0,t[n].barreSessions+=r.barreSessions||0,t[n].strengthSessions+=r.strengthSessions||0,t[n].totalPaid+=r.totalPaid||0,t},{}),h=l.reduce((t,r)=>{const n=r.monthYear||"Unknown";return t[n]||(t[n]={month:n,totalSessions:0,totalCustomers:0,cycleSessions:0,barreSessions:0,strengthSessions:0,totalPaid:0}),t[n].totalSessions+=r.totalSessions||0,t[n].totalCustomers+=r.totalCustomers||0,t[n].cycleSessions+=r.cycleSessions||0,t[n].barreSessions+=r.barreSessions||0,t[n].strengthSessions+=r.strengthSessions||0,t[n].totalPaid+=r.totalPaid||0,t},{});return{byLocation:Object.values(s).sort((t,r)=>r.totalSessions-t.totalSessions),byTrainer:Object.values(i).sort((t,r)=>r.totalSessions-t.totalSessions),byMonth:Object.values(h).sort((t,r)=>t.month.localeCompare(r.month))}},[l]),o=(s,i,h,t)=>{const r=Math.max(...s.map(n=>n.totalSessions));return e.jsxs(y,{className:"h-full",children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[t,h]})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-4",children:s.slice(0,8).map((n,j)=>{const x=r>0?n.totalSessions/r*100:0,N=n.location||n.trainer||n.month;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 truncate flex-1 mr-2",children:N}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{variant:"outline",className:"text-xs",children:[n.totalSessions," sessions"]}),e.jsxs(B,{variant:"secondary",className:"text-xs",children:[n.totalCustomers," customers"]})]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-500 h-2 rounded-full transition-all duration-500",style:{width:`${x}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsxs("span",{children:["Cycle: ",n.cycleSessions," | Barre: ",n.barreSessions]}),e.jsxs("span",{children:["₹",(n.totalPaid||0).toLocaleString()]})]})]},j)})})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Performance Analytics Charts"}),e.jsx("p",{className:"text-slate-600",children:"Visual breakdown of sessions, customers, and revenue across different dimensions"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[o(a.byLocation,"location","By Location",e.jsx(F,{className:"w-5 h-5 text-green-500"})),o(a.byTrainer,"trainer","By Trainer",e.jsx(A,{className:"w-5 h-5 text-blue-500"})),o(a.byMonth,"month","By Month",e.jsx(E,{className:"w-5 h-5 text-purple-500"}))]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-cyan-500"}),"Overall Performance Summary"]})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-cyan-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:l.reduce((s,i)=>s+(i.totalSessions||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Sessions"})]}),e.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-600",children:l.reduce((s,i)=>s+(i.totalCustomers||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.reduce((s,i)=>s+(i.cycleSessions||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Cycle Sessions"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.reduce((s,i)=>s+(i.barreSessions||0),0)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Barre Sessions"})]})]})})]})]})},_e=({data:l,onItemClick:b})=>{const a=P.useMemo(()=>{if(!l||l.length===0)return[];const s=[],i=l.reduce((p,v)=>p+(v.totalSessions||0),0),h=l.reduce((p,v)=>p+(v.cycleSessions||0),0),t=l.reduce((p,v)=>p+(v.barreSessions||0),0),r=l.reduce((p,v)=>p+(v.totalCustomers||0),0),n=l.reduce((p,v)=>p+(v.totalPaid||0),0),j=h/(t||1);j>1.5?s.push({type:"performance",icon:e.jsx(L,{className:"w-5 h-5 text-yellow-500"}),title:"PowerCycle Dominance",description:`PowerCycle sessions are ${(j*100-100).toFixed(0)}% higher than Barre sessions`,recommendation:"Consider expanding PowerCycle capacity or promoting Barre classes",priority:"medium"}):j<.7&&s.push({type:"performance",icon:e.jsx(F,{className:"w-5 h-5 text-purple-500"}),title:"Barre Leading Performance",description:`Barre sessions are ${(1/j*100-100).toFixed(0)}% higher than PowerCycle sessions`,recommendation:"Consider increasing PowerCycle marketing or class availability",priority:"medium"});const x=r/(i||1);x<8?s.push({type:"efficiency",icon:e.jsx(Pe,{className:"w-5 h-5 text-red-500"}),title:"Low Session Utilization",description:`Average ${x.toFixed(1)} customers per session`,recommendation:"Focus on improving class attendance and reducing empty sessions",priority:"high"}):x>12&&s.push({type:"efficiency",icon:e.jsx(Be,{className:"w-5 h-5 text-green-500"}),title:"Excellent Session Utilization",description:`Strong average of ${x.toFixed(1)} customers per session`,recommendation:"Maintain current strategies and consider expanding popular time slots",priority:"low"});const N=n/(r||1);N>1500&&s.push({type:"revenue",icon:e.jsx(E,{className:"w-5 h-5 text-green-500"}),title:"High Revenue Per Customer",description:`Excellent ₹${N.toFixed(0)} average revenue per customer`,recommendation:"Focus on customer retention to maintain this high value",priority:"low"});const d=l.reduce((p,v)=>{const u=v.location||"Unknown";return p[u]||(p[u]={sessions:0,customers:0,revenue:0}),p[u].sessions+=v.totalSessions||0,p[u].customers+=v.totalCustomers||0,p[u].revenue+=v.totalPaid||0,p},{}),c=Object.entries(d);if(c.length>1){const p=c.reduce((u,g)=>g[1].sessions>u[1].sessions?g:u),v=p[1].sessions/i*100;v>60&&s.push({type:"location",icon:e.jsx(F,{className:"w-5 h-5 text-blue-500"}),title:"Location Concentration",description:`${p[0]} dominates with ${v.toFixed(0)}% of sessions`,recommendation:"Consider strategies to boost performance at other locations",priority:"medium"})}const C=l.reduce((p,v)=>{const u=v.teacherName||"Unknown";return p[u]||(p[u]={sessions:0,customers:0}),p[u].sessions+=v.totalSessions||0,p[u].customers+=v.totalCustomers||0,p},{}),k=Object.entries(C),R=k.reduce((p,v)=>v[1].sessions>p[1].sessions?v:p);if(R&&k.length>1){const p=R[1].sessions/i*100;s.push({type:"trainer",icon:e.jsx(A,{className:"w-5 h-5 text-purple-500"}),title:"Top Performing Trainer",description:`${R[0]} leads with ${p.toFixed(0)}% of total sessions`,recommendation:"Learn from their best practices and share with other trainers",priority:"low"})}return s},[l]),o=s=>{switch(s){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Strategic Insights & Recommendations"}),e.jsx("p",{className:"text-slate-600",children:"Data-driven insights to optimize your PowerCycle vs Barre performance"})]}),a.length===0?e.jsx(y,{children:e.jsxs(f,{className:"text-center py-12",children:[e.jsx(se,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Insights Available"}),e.jsx("p",{className:"text-slate-500",children:"Add more data to generate meaningful insights"})]})}):e.jsx("div",{className:"grid gap-6",children:a.map((s,i)=>e.jsxs(y,{className:"hover:shadow-lg transition-shadow duration-300",children:[e.jsx(w,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.icon,e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:s.title}),e.jsxs(B,{className:`mt-2 ${o(s.priority)}`,children:[s.priority.toUpperCase()," PRIORITY"]})]})]})})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-700",children:s.description}),e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border-l-4 border-cyan-500",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-cyan-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:s.recommendation})]})})]})})]},i))}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-cyan-500"}),"Key Performance Indicators"]})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-cyan-50 to-teal-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-600",children:l.length>0?(l.reduce((s,i)=>s+(i.totalCustomers||0),0)/l.reduce((s,i)=>s+(i.totalSessions||0),1)||0).toFixed(1):"0"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Avg Customers/Session"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.length>0?(l.reduce((s,i)=>s+(i.cycleSessions||0),0)/(l.reduce((s,i)=>s+(i.barreSessions||0),1)||1)||0).toFixed(1):"0"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Cycle/Barre Ratio"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",l.length>0?(l.reduce((s,i)=>s+(i.totalPaid||0),0)/(l.reduce((s,i)=>s+(i.totalCustomers||0),1)||1)||0).toFixed(0):"0"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Revenue/Customer"})]})]})})]})]})},Je=({isOpen:l,onClose:b,data:a,allData:o})=>{if(!a)return null;const s=()=>{const r=a.trainer;if(!r)return null;const n=r.totalSessions||0,j=r.totalEmptySessions||0,x=r.totalCustomers||0,N=r.totalPaid||0,d=n>0?(n-j)/n*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[e.jsxs(w,{children:[e.jsxs(S,{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),r.teacherName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.location," • ",r.monthYear]})]}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m(n)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Sessions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",m(N)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:m(x)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[d.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fill Rate"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(y,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(S,{className:"text-sm flex items-center gap-2 text-blue-800",children:[e.jsx(L,{className:"w-4 h-4"}),"PowerCycle"]})}),e.jsxs(f,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.cycleSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.emptyCycleSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.cycleCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",m(r.cyclePaid||0)]})]})]})]}),e.jsxs(y,{className:"bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(S,{className:"text-sm flex items-center gap-2 text-pink-800",children:[e.jsx(T,{className:"w-4 h-4"}),"Barre"]})}),e.jsxs(f,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.barreSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.emptyBarreSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.barreCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",m(r.barrePaid||0)]})]})]})]}),e.jsxs(y,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(S,{className:"text-sm flex items-center gap-2 text-green-800",children:[e.jsx(z,{className:"w-4 h-4"}),"Strength Lab"]})}),e.jsxs(f,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.strengthSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.emptyStrengthSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:m(r.strengthCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",m(r.strengthPaid||0)]})]})]})]})]}),e.jsxs(y,{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200",children:[e.jsx(w,{children:e.jsxs(S,{className:"text-sm flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-gray-600"}),"Performance Metrics"]})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:m(r.new||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"New Members"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:m(r.converted||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Converted"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:m(r.retained||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Retained"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:r.conversion||"0%"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Conversion Rate"})]})]})]})})]})]})},i=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Metric Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Detailed breakdown of ",a.metric]})]})}),h=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Format Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Detailed breakdown of ",a.format]})]})}),t=()=>a.type?.includes("trainer")?`${a.trainer?.teacherName||"Trainer"} - Detailed Analysis`:a.type==="metric"?`${a.metric} - Metric Analysis`:a.type==="format"?`${a.format} - Format Analysis`:"Detailed Analysis";return e.jsx(Ie,{open:l,onOpenChange:b,children:e.jsxs(Ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Me,{children:e.jsxs(Le,{className:"flex items-center justify-between",children:[t(),e.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ue,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"mt-4",children:[a.type?.includes("trainer")&&s(),a.type==="metric"&&i(),a.type==="format"&&h()]})]})})},es=({data:l})=>{const[b,a]=P.useState("dashboard"),[o,s]=P.useState("all"),[i,h]=P.useState("all"),[t,r]=P.useState("all"),[n,j]=P.useState(null),[x,N]=P.useState(!1),d=Oe("powercycle"),c=P.useMemo(()=>{if(!l)return[];let k=[...l];return o!=="all"&&(k=k.filter(R=>R.location===o)),t!=="all"&&(k=k.filter(R=>R.teacherName===t)),i!=="all"&&(k=k.filter(R=>R.monthYear===i)),k},[l,o,i,t]),C=k=>{j(k)};return!l||l.length===0?e.jsx(y,{className:"bg-yellow-50 border-yellow-200",children:e.jsx(f,{className:"p-6",children:e.jsx("p",{className:"text-yellow-600",children:"No PowerCycle vs Barre vs Strength Lab data available"})})}):e.jsxs("div",{className:"space-y-8 p-6 bg-gradient-to-br from-cyan-50/50 via-white to-teal-50/30 min-h-screen",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx(y,{className:`bg-gradient-to-r ${d.heroGradient} border-0 shadow-2xl backdrop-blur-sm`,children:e.jsxs(w,{className:"relative pb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(L,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx(S,{className:"text-3xl font-bold text-white mb-2",children:"PowerCycle vs Barre vs Strength Analytics"}),e.jsx("p",{className:"text-white/80 text-lg",children:"Comprehensive performance analysis across all class formats"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>N(!x),className:"bg-white/20 text-white border-white/30 hover:bg-white/30 backdrop-blur-sm",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),x?"Hide":"Show"," Filters"]}),e.jsxs(B,{className:"bg-white/20 text-white border-white/30 px-3 py-1",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"Live Data"]})]})]})})]})})}),x&&e.jsx("div",{className:"transform transition-all duration-300 ease-in-out",children:e.jsx(Ye,{data:l,selectedLocation:o,onLocationChange:s,selectedPeriod:i,onPeriodChange:h,selectedTrainer:t,onTrainerChange:r})}),e.jsx(Ke,{data:c,onItemClick:C}),e.jsxs(ge,{value:b,onValueChange:a,className:"w-full",children:[e.jsxs(y,{className:"bg-gradient-to-br from-white via-cyan-50/30 to-teal-50/20 border-0 shadow-xl backdrop-blur-sm",children:[e.jsxs(w,{className:`bg-gradient-to-r ${d.heroGradient} text-white relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/10 to-transparent"}),e.jsxs(S,{className:"text-xl font-bold flex items-center gap-3 relative z-10",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(ee,{className:"w-5 h-5 text-white"})}),"Advanced Analytics Dashboard",e.jsxs(B,{className:"ml-auto bg-white/20 text-white border-white/30",children:[c.length," Records"]})]})]}),e.jsx(f,{className:"p-6 bg-gradient-to-br from-white to-cyan-50/20",children:e.jsxs(je,{className:"grid w-full grid-cols-6 bg-gradient-to-r from-cyan-100/80 to-teal-100/80 p-2 rounded-xl shadow-inner backdrop-blur-sm border border-cyan-200/30",children:[e.jsxs($,{value:"dashboard",className:`text-sm font-medium transition-all duration-200 rounded-lg ${U("powercycle")}`,children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs($,{value:"comparison",className:`text-sm font-medium transition-all duration-200 rounded-lg ${U("powercycle")}`,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Comparison"]}),e.jsxs($,{value:"rankings",className:`text-sm font-medium transition-all duration-200 rounded-lg ${U("powercycle")}`,children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Rankings"]}),e.jsxs($,{value:"analytics",className:`text-sm font-medium transition-all duration-200 rounded-lg ${U("powercycle")}`,children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Analytics"]}),e.jsxs($,{value:"charts",className:`text-sm font-medium transition-all duration-200 rounded-lg ${U("powercycle")}`,children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Charts"]}),e.jsxs($,{value:"insights",className:`text-sm font-medium transition-all duration-200 rounded-lg ${U("powercycle")}`,children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Insights"]})]})})]}),e.jsx(I,{value:"dashboard",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(xe,{data:c,onItemClick:C})})}),e.jsx(I,{value:"comparison",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(xe,{data:c,onItemClick:C,showDetailed:!0})})}),e.jsx(I,{value:"rankings",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(He,{data:c,onItemClick:C})})}),e.jsx(I,{value:"analytics",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(Ze,{data:c,onItemClick:C})})}),e.jsx(I,{value:"charts",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(Qe,{data:c,onItemClick:C})})}),e.jsx(I,{value:"insights",className:"space-y-8 mt-6",children:e.jsx("div",{className:"bg-gradient-to-br from-white to-cyan-50/30 rounded-xl p-6 shadow-lg backdrop-blur-sm border border-cyan-200/30",children:e.jsx(_e,{data:c,onItemClick:C})})})]}),n&&e.jsx(Je,{isOpen:!!n,onClose:()=>j(null),data:n,allData:c})]})},ns=({data:l})=>e.jsx(es,{data:l||[]});export{ls as P,ns as a};
