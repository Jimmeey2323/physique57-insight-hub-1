import{r as j,j as e,F as fe,X as ze,C as As,b as oe,c as E,U as X,d as xs,T as B,e as be,f as ne,H as Rs,S as ms,G as Ds,L as Fs,D as Ms,g as we,M as Fe,h as Ce,i as je,R as Re,k as De,l as Ls,m as Q,n as Z,o as $s,B as Be,P as hs,p as Os,q as Ps,s as Ke,t as Is,u as us,E as gs,v as Ws,w as Es,x as Us,y as Je,z as zs,I as Bs}from"./react-vendor-CYideCN0.js";import{C as z,a as ps,b as js,c as U,B as w,d as F,e as bs,L as ce,D as Ks,S as he,f as ue,g as ge,h as pe,i as V,I as Ns,j as ae,k as re,l as Vs,T as Me,m as Le,n as se,o as T,p as $e,q as x,r as Ve,s as He,t as te,u as le,v as _e,w as H,x as _,y as q,z as qe,A as Ye,E as Ge,F as Xe,G as Qe,H as Te,P as Pe,J as Ie,K as We,M as Ze,N as Hs,O as _s,Q as qs,R as Ys,U as Gs,V as Xs,W as Js,X as Qs,Y as Zs}from"./ui-components-Cek3D08m.js";import{g as es,f as G,a as Ee,b as W,u as vs,c as ys,d as ea,e as ye}from"./utils-Bswz-ULp.js";import{L as sa,M as aa,D as ta,a as la}from"./dashboard-misc-D1HwnLCW.js";import{m as P,A as na}from"./animation-vendor-CHdCv3BV.js";import{I as ra}from"./dashboard-trainers-BqTosOpB.js";import{R as ss,L as ia,C as as,X as ts,Y as ls,T as ns,a as rs,b as Ue,B as ca,c as is}from"./chart-vendor-DyOsfj4e.js";import{t as oa,c as da,f as cs}from"./utils-vendor-R2EFQ5ZT.js";function ee(...u){return oa(da(u))}const fs=j.createContext(void 0),ws=()=>{const u=j.useContext(fs);if(!u)throw new Error("useSessionsFilters must be used within a SessionsFiltersProvider");return u},Aa=({children:u})=>{const[c,R]=j.useState(()=>{const p=es();return{trainers:[],classTypes:[],dayOfWeek:[],timeSlots:[],dateRange:{start:new Date(p.start),end:new Date(p.end)}}}),v=p=>{R(g=>({...g,...p}))},k=()=>{const p=es();R({trainers:[],classTypes:[],dayOfWeek:[],timeSlots:[],dateRange:{start:new Date(p.start),end:new Date(p.end)}})},l=k;return e.jsx(fs.Provider,{value:{filters:c,updateFilters:v,clearFilters:k,clearAllFilters:l},children:u})},xa=({data:u})=>{const{filters:c,updateFilters:R,clearAllFilters:v}=ws(),[k,l]=j.useState(!1),[p,g]=j.useState(2),b=j.useMemo(()=>{const t=[...new Set(u.map(y=>y.trainerName))].filter(Boolean).sort(),a=[...new Set(u.map(y=>y.cleanedClass))].filter(Boolean).sort(),r=[...new Set(u.map(y=>y.dayOfWeek))].filter(Boolean).sort(),d=[...new Set(u.map(y=>y.time))].filter(Boolean).sort(),S=[...new Set(u.map(y=>y.location))].filter(Boolean).sort(),N=[...new Set(u.map(y=>y.cleanedClass||y.classType))].filter(Boolean).sort();return{trainers:t,classTypes:a,dayOfWeek:r,timeSlots:d,locations:S,formats:N}},[u]),C=c.trainers.length>0||c.classTypes.length>0||c.dayOfWeek.length>0||c.timeSlots.length>0||c.dateRange.start||c.dateRange.end||p>1,M=[c.trainers.length,c.classTypes.length,c.dayOfWeek.length,c.timeSlots.length,c.dateRange.start?1:0,c.dateRange.end?1:0,p>1?1:0].filter(t=>t>0).length,h=()=>{v(),g(2)};return e.jsx(z,{className:"bg-white/95 backdrop-blur-sm border-0 shadow-xl mb-8 overflow-hidden",children:e.jsxs(ps,{open:k,onOpenChange:l,children:[e.jsx(js,{asChild:!0,children:e.jsx(U,{className:"p-6 cursor-pointer hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-purple-50/50 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 shadow-lg",children:e.jsx(fe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-800",children:"Advanced Class Analytics Filters"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure comprehensive filters to analyze class performance and attendance patterns"})]}),C&&e.jsxs(w,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-blue-200 px-3 py-1 text-sm font-semibold",children:[M," active filters"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[C&&e.jsxs(F,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),h()},className:"gap-2 hover:bg-red-50 hover:border-red-200 hover:text-red-700 transition-colors font-medium",children:[e.jsx(ze,{className:"w-4 h-4"}),"Clear All Filters"]}),e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 transition-transform duration-200",children:k?e.jsx(As,{className:"w-5 h-5 text-gray-600"}):e.jsx(oe,{className:"w-5 h-5 text-gray-600"})})]})]})})}),e.jsx(bs,{children:e.jsxs(U,{className:"px-6 pb-6 pt-0 border-t border-gray-100 bg-gradient-to-br from-gray-50/30 to-white",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(E,{className:"w-4 h-4 text-blue-500"}),"Date Range"]}),e.jsx(Ks,{value:{from:c.dateRange.start?new Date(c.dateRange.start):void 0,to:c.dateRange.end?new Date(c.dateRange.end):void 0},onChange:t=>R({dateRange:{start:t?.from||null,end:t?.to||null}}),className:"w-full border-gray-200 hover:border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(X,{className:"w-4 h-4 text-purple-500"}),"Trainers (",c.trainers.length," selected)"]}),e.jsxs(he,{value:c.trainers.length===0?"all-trainers":c.trainers[0],onValueChange:t=>R({trainers:t==="all-trainers"?[]:[t]}),children:[e.jsx(ue,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(ge,{placeholder:"Select trainers..."})}),e.jsxs(pe,{className:"max-h-60",children:[e.jsx(V,{value:"all-trainers",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"All Trainers"]})}),b.trainers.map(t=>e.jsx(V,{value:t,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),t]})},t))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(B,{className:"w-4 h-4 text-green-500"}),"Class Formats (",c.classTypes.length," selected)"]}),e.jsxs(he,{value:c.classTypes.length===0?"all-formats":c.classTypes[0],onValueChange:t=>R({classTypes:t==="all-formats"?[]:[t]}),children:[e.jsx(ue,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(ge,{placeholder:"Select class formats..."})}),e.jsxs(pe,{className:"max-h-60",children:[e.jsx(V,{value:"all-formats",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"All Formats"]})}),b.formats.map(t=>e.jsx(V,{value:t,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),t]})},t))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(E,{className:"w-4 h-4 text-orange-500"}),"Day of Week (",c.dayOfWeek.length," selected)"]}),e.jsxs(he,{value:c.dayOfWeek.length===0?"all-days":c.dayOfWeek[0],onValueChange:t=>R({dayOfWeek:t==="all-days"?[]:[t]}),children:[e.jsx(ue,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(ge,{placeholder:"Select days..."})}),e.jsxs(pe,{children:[e.jsx(V,{value:"all-days",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"All Days"]})}),b.dayOfWeek.map(t=>e.jsx(V,{value:t,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),t]})},t))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(ne,{className:"w-4 h-4 text-red-500"}),"Time Slots (",c.timeSlots.length," selected)"]}),e.jsxs(he,{value:c.timeSlots.length===0?"all-times":c.timeSlots[0],onValueChange:t=>R({timeSlots:t==="all-times"?[]:[t]}),children:[e.jsx(ue,{className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",children:e.jsx(ge,{placeholder:"Select time slots..."})}),e.jsxs(pe,{className:"max-h-60",children:[e.jsx(V,{value:"all-times",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"All Time Slots"]})}),b.timeSlots.map(t=>e.jsx(V,{value:t,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),t]})},t))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(Rs,{className:"w-4 h-4 text-indigo-500"}),"Min Classes Criteria"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{type:"number",value:p,onChange:t=>g(Math.max(1,parseInt(t.target.value)||1)),min:"1",max:"50",className:"w-full border-gray-200 hover:border-gray-300 shadow-sm",placeholder:"Minimum sessions"}),e.jsx(w,{variant:"outline",className:"text-xs whitespace-nowrap",children:"sessions"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Classes with fewer sessions will be excluded"})]}),e.jsxs("div",{className:"space-y-3 md:col-span-2 xl:col-span-1",children:[e.jsxs(ce,{className:"text-sm font-bold flex items-center gap-2 text-gray-700",children:[e.jsx(fe,{className:"w-4 h-4 text-blue-500"}),"Quick Actions"]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1);R({dateRange:{start:a,end:t}})},className:"justify-start gap-2 text-xs",children:[e.jsx(E,{className:"w-3 h-3"}),"Current Month"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()-1,1),r=new Date(t.getFullYear(),t.getMonth(),0);R({dateRange:{start:a,end:r}})},className:"justify-start gap-2 text-xs",children:[e.jsx(E,{className:"w-3 h-3"}),"Last Month"]})]})]})]}),C&&e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Active Filters Summary:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.dateRange.start&&e.jsxs(w,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Date: ",c.dateRange.start.toLocaleDateString()," - ",c.dateRange.end?.toLocaleDateString()||"Present"]}),c.trainers.length>0&&e.jsxs(w,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:["Trainers: ",c.trainers.length]}),c.classTypes.length>0&&e.jsxs(w,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Formats: ",c.classTypes.length]}),c.dayOfWeek.length>0&&e.jsxs(w,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:["Days: ",c.dayOfWeek.length]}),c.timeSlots.length>0&&e.jsxs(w,{variant:"secondary",className:"bg-red-100 text-red-800",children:["Times: ",c.timeSlots.length]}),p>1&&e.jsxs(w,{variant:"secondary",className:"bg-indigo-100 text-indigo-800",children:["Min Classes: ",p,"+"]})]})]})]})})]})})},ma=({data:u,location:c,onDrillDown:R})=>{const[v,k]=j.useState("grouped"),[l,p]=j.useState("trainer"),[g,b]=j.useState(""),[C,M]=j.useState(!1),[h,t]=j.useState(new Set),[a,r]=j.useState(1),[d,S]=j.useState(25),[N,y]=j.useState({key:"trainer",direction:"asc"}),D=j.useMemo(()=>u.map(i=>{const m=new Date(i.date),f=`${m.toLocaleDateString("en-US",{month:"short"})}-${m.getFullYear().toString().slice(-2)}`;return{...i,period:f,emptyClasses:(i.checkedInCount||0)===0?1:0,nonEmptyClasses:(i.checkedInCount||0)>0?1:0,avgAll:i.checkedInCount||0,avgNonEmpty:(i.checkedInCount||0)>0&&i.checkedInCount||0,lateCancels:i.lateCancelledCount||0,payout:0,tips:0}}),[u]),s=j.useMemo(()=>{if(v==="flat"||l==="none")return[];const i=new Map;return D.forEach(m=>{let f="";switch(l){case"trainer":f=m.trainerName||"Unknown",m.trainerName;break;case"class":f=m.cleanedClass||"Unknown",m.cleanedClass;break;case"location":f=m.location||"Unknown",m.location;break;case"day_time":f=`${m.dayOfWeek}-${m.time}`,`${m.dayOfWeek}${m.time}`;break;case"trainer_class":f=`${m.trainerName}-${m.cleanedClass}`,`${m.trainerName}${m.cleanedClass}`;break;default:f="all"}i.has(f)||i.set(f,[]),i.get(f).push(m)}),Array.from(i.entries()).map(([m,f])=>{const Y=f.length,ie=f.filter(me=>(me.checkedInCount||0)===0).length,de=Y-ie,O=f.reduce((me,ve)=>me+(ve.checkedInCount||0),0),I=Y>0?O/Y:0,Cs=de>0?O/de:0,ks=f.reduce((me,ve)=>me+(ve.totalPaid||0),0),Ss=f.reduce((me,ve)=>me+(ve.lateCancelledCount||0),0),Oe=f[0]?.trainerName||"Unknown",Ts=f[0]?.period||"Unknown";let xe="";switch(l){case"trainer":xe=Oe||"Unknown Trainer";break;case"class":xe=f[0]?.cleanedClass||"Unknown Class";break;case"location":xe=f[0]?.location||"Unknown Location";break;case"day_time":xe=`${f[0]?.dayOfWeek} ${f[0]?.time}`;break;case"trainer_class":xe=`${Oe} - ${f[0]?.cleanedClass}`;break;default:xe="All Sessions"}return{groupKey:m,groupLabel:xe,trainer:Oe,period:Ts,sessions:f,aggregatedMetrics:{totalClasses:Y,emptyClasses:ie,nonEmptyClasses:de,totalCheckedIn:O,avgAll:I,avgNonEmpty:Cs,totalRevenue:ks,totalLateCancels:Ss,totalPayout:0,totalTips:0},isExpanded:h.has(m)||C}}).sort((m,f)=>N.direction==="asc"?m.trainer.localeCompare(f.trainer):f.trainer.localeCompare(m.trainer))},[D,l,v,h,C,N]),n=j.useMemo(()=>{if(!g)return v==="grouped"?s:D;const i=g.toLowerCase();return v==="grouped"?s.filter(m=>m.trainer.toLowerCase().includes(i)||m.groupLabel.toLowerCase().includes(i)||m.sessions.some(f=>(f.cleanedClass||"").toLowerCase().includes(i)||(f.location||"").toLowerCase().includes(i))):D.filter(m=>(m.trainerName||"").toLowerCase().includes(i)||(m.cleanedClass||"").toLowerCase().includes(i)||(m.location||"").toLowerCase().includes(i))},[s,D,g,v]),A=j.useMemo(()=>{const i=(a-1)*d;return n.slice(i,i+d)},[n,a,d]),o=Math.ceil(n.length/d),L=j.useCallback(i=>{t(m=>{const f=new Set(m);return f.has(i)?f.delete(i):f.add(i),f})},[]),K=j.useCallback(()=>{if(M(i=>!i),C)t(new Set);else{const i=s.map(m=>m.groupKey);t(new Set(i))}},[C,s]),$=j.useCallback(i=>{y(m=>({key:i,direction:m.key===i&&m.direction==="desc"?"asc":"desc"}))},[]),J=i=>N.key!==i?e.jsx("div",{className:"w-4 h-4"}):N.direction==="asc"?e.jsx(Q,{className:"w-4 h-4 text-blue-600"}):e.jsx(Z,{className:"w-4 h-4 text-blue-600"}),ke=i=>new Date(i).toLocaleDateString("en-CA"),Ne=({name:i})=>{const m=i.split(" ").map(ie=>ie.charAt(0)).join("").substring(0,2).toUpperCase(),f=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-teal-500"],Y=i.split("").reduce((ie,de)=>ie+de.charCodeAt(0),0)%f.length;return e.jsx("div",{className:ee("w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium",f[Y]),children:m})},Se=({type:i,count:m})=>{const f=Y=>Y.toLowerCase().includes("barre")?"bg-pink-100 text-pink-800 border-pink-200":Y.toLowerCase().includes("cardio")?"bg-red-100 text-red-800 border-red-200":Y.toLowerCase().includes("power")?"bg-orange-100 text-orange-800 border-orange-200":Y.toLowerCase().includes("recovery")?"bg-green-100 text-green-800 border-green-200":"bg-blue-100 text-blue-800 border-blue-200";return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:ee("text-xs font-medium px-2 py-1",f(i)),children:i}),m&&m>1&&e.jsx(w,{variant:"secondary",className:"text-xs",children:m})]})};return e.jsxs(z,{className:"w-full bg-white shadow-lg border-0 rounded-xl overflow-hidden",children:[e.jsxs(ae,{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-2xl font-bold text-slate-900 mb-2",children:"Class Analytics Dashboard"}),e.jsx("p",{className:"text-slate-600",children:"Comprehensive view of your class performance data"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:u.length}),e.jsx("div",{className:"text-sm text-slate-500",children:"Total Records"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[300px]",children:[e.jsx(ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(Ns,{placeholder:"Search classes, trainers, locations...",value:g,onChange:i=>b(i.target.value),className:"pl-10 bg-white border-slate-200"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-slate-500"}),e.jsxs(he,{value:l,onValueChange:i=>p(i),children:[e.jsx(ue,{className:"w-[200px] bg-white border-slate-200",children:e.jsx(ge,{})}),e.jsxs(pe,{children:[e.jsx(V,{value:"trainer",children:"Trainer"}),e.jsx(V,{value:"class",children:"Class Type"}),e.jsx(V,{value:"location",children:"Location"}),e.jsx(V,{value:"day_time",children:"Day + Time"}),e.jsx(V,{value:"trainer_class",children:"Trainer + Class"}),e.jsx(V,{value:"none",children:"No Grouping"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg p-1",children:[e.jsxs(F,{variant:v==="grouped"?"default":"ghost",size:"sm",onClick:()=>k("grouped"),className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),"Grouped"]}),e.jsxs(F,{variant:v==="flat"?"default":"ghost",size:"sm",onClick:()=>k("flat"),className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),"Flat"]})]}),v==="grouped"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vs,{id:"expand-all",checked:C,onCheckedChange:K}),e.jsx(ce,{htmlFor:"expand-all",className:"text-sm font-medium text-slate-700",children:"Expand All"})]}),e.jsxs(F,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Export CSV"]})]})]}),e.jsxs(U,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:e.jsxs(Me,{children:[e.jsx(Le,{className:"sticky top-0 z-10",children:e.jsxs(se,{className:"bg-slate-100 border-b-2 border-slate-300 shadow-sm",children:[e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[120px] bg-slate-100 sticky top-0",onClick:()=>$("trainer"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),"TRAINER",J("trainer")]})}),e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[80px] bg-slate-100 sticky top-0",onClick:()=>$("period"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"PERIOD",J("period")]})}),e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[100px] bg-slate-100 sticky top-0",onClick:()=>$("date"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"DATE",J("date")]})}),e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[150px] bg-slate-100 sticky top-0",onClick:()=>$("classType"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),"CLASS TYPE",J("classType")]})}),e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[90px] bg-slate-100 sticky top-0",onClick:()=>$("day"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"DAY",J("day")]})}),e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[80px] bg-slate-100 sticky top-0",onClick:()=>$("time"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"TIME",J("time")]})}),e.jsx(T,{className:"font-bold text-slate-900 cursor-pointer hover:text-blue-600 transition-colors w-[150px] bg-slate-100 sticky top-0",onClick:()=>$("location"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"LOCATION",J("location")]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[70px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(be,{className:"w-4 h-4"}),"CLASSES"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[70px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(B,{className:"w-4 h-4 text-red-500"}),"EMPTY"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(B,{className:"w-4 h-4 text-green-500"}),"NON-EMPTY"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),"CHECKED IN"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),"AVG. (ALL)"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[90px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ce,{className:"w-4 h-4"}),"AVG. (NON-EMPTY)"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[100px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(je,{className:"w-4 h-4"}),"REVENUE"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[90px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4 text-orange-500"}),"LATE CANCELS"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[80px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(je,{className:"w-4 h-4 text-green-600"}),"PAYOUT"]})}),e.jsx(T,{className:"font-bold text-slate-900 text-center w-[70px] bg-slate-100 sticky top-0",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(je,{className:"w-4 h-4 text-yellow-600"}),"TIPS"]})})]})}),e.jsx($e,{children:v==="grouped"?A.map(i=>e.jsxs(Re.Fragment,{children:[e.jsxs(se,{className:"bg-slate-100 hover:bg-slate-200 transition-colors border-l-4 border-l-blue-500 cursor-pointer",onClick:()=>L(i.groupKey),children:[e.jsx(x,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:i.isExpanded?e.jsx(oe,{className:"h-4 w-4"}):e.jsx(De,{className:"h-4 w-4"})}),e.jsx(Ne,{name:i.trainer}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:i.trainer}),e.jsxs("div",{className:"text-xs text-slate-500",children:[i.aggregatedMetrics.totalClasses," total classes"]})]})]})}),e.jsx(x,{className:"py-4",children:e.jsx(w,{variant:"secondary",className:"font-medium",children:i.period})}),e.jsx(x,{className:"py-4 text-slate-500",children:"Multiple dates"}),e.jsx(x,{className:"py-4",children:e.jsx("div",{className:"text-slate-500",children:"Multiple classes"})}),e.jsx(x,{className:"py-4 text-slate-500",children:"Various"}),e.jsx(x,{className:"py-4 text-slate-500",children:"Various"}),e.jsx(x,{className:"py-4 text-slate-500",children:"Multiple locations"}),e.jsx(x,{className:"py-4 text-center",children:e.jsx(w,{className:"bg-blue-100 text-blue-800 font-bold",children:i.aggregatedMetrics.totalClasses})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx(w,{className:"bg-red-100 text-red-800 font-bold",children:i.aggregatedMetrics.emptyClasses})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx(w,{className:"bg-green-100 text-green-800 font-bold",children:i.aggregatedMetrics.nonEmptyClasses})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-slate-900",children:i.aggregatedMetrics.totalCheckedIn})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.aggregatedMetrics.avgAll.toFixed(1)})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.aggregatedMetrics.avgNonEmpty.toFixed(1)})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-green-700",children:G(i.aggregatedMetrics.totalRevenue)})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-orange-700",children:i.aggregatedMetrics.totalLateCancels})}),e.jsx(x,{className:"py-4 text-center text-slate-400",children:"-"}),e.jsx(x,{className:"py-4 text-center text-slate-400",children:"-"})]}),i.isExpanded&&i.sessions.map((m,f)=>e.jsxs(se,{className:"bg-white hover:bg-blue-50 transition-colors border-l-4 border-l-transparent hover:border-l-blue-300",children:[e.jsx(x,{className:"py-3 pl-12",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{name:m.trainerName||"Unknown"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-slate-800",children:m.trainerName})})]})}),e.jsx(x,{className:"py-3",children:e.jsx(w,{variant:"outline",className:"text-xs",children:m.period})}),e.jsx(x,{className:"py-3",children:e.jsx("div",{className:"text-sm font-medium text-slate-700",children:ke(m.date)})}),e.jsx(x,{className:"py-3",children:e.jsx(Se,{type:m.cleanedClass||"Unknown"})}),e.jsx(x,{className:"py-3",children:e.jsx("div",{className:"text-sm text-slate-600",children:m.dayOfWeek})}),e.jsx(x,{className:"py-3",children:e.jsx("div",{className:"text-sm font-medium text-slate-700",children:m.time})}),e.jsx(x,{className:"py-3",children:e.jsx("div",{className:"text-sm text-slate-600 truncate max-w-[120px]",children:m.location})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx(w,{variant:"secondary",className:"text-xs",children:"1"})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx(w,{className:ee("text-xs font-medium",m.emptyClasses>0?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"),children:m.emptyClasses})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx(w,{className:ee("text-xs font-medium",m.nonEmptyClasses>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:m.nonEmptyClasses})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx("div",{className:"font-medium text-slate-800",children:m.checkedInCount||0})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx("div",{className:"text-sm text-slate-600",children:m.checkedInCount||0})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx("div",{className:"text-sm text-slate-600",children:(m.checkedInCount||0)>0?m.checkedInCount||0:"-"})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx("div",{className:"font-medium text-green-700",children:G(m.totalPaid||0)})}),e.jsx(x,{className:"py-3 text-center",children:e.jsx("div",{className:"text-sm text-orange-600",children:m.lateCancelledCount||0})}),e.jsx(x,{className:"py-3 text-center text-slate-400",children:"-"}),e.jsx(x,{className:"py-3 text-center text-slate-400",children:"-"})]},`${i.groupKey}-${f}`))]},i.groupKey)):A.map((i,m)=>e.jsxs(se,{className:"bg-white hover:bg-blue-50 transition-colors border-l-4 border-l-transparent hover:border-l-blue-300",children:[e.jsx(x,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{name:i.trainerName||"Unknown"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-slate-800",children:i.trainerName})})]})}),e.jsx(x,{className:"py-4",children:e.jsx(w,{variant:"secondary",className:"font-medium",children:i.period})}),e.jsx(x,{className:"py-4",children:e.jsx("div",{className:"font-medium text-slate-700",children:ke(i.date)})}),e.jsx(x,{className:"py-4",children:e.jsx(Se,{type:i.cleanedClass||"Unknown"})}),e.jsx(x,{className:"py-4",children:e.jsx("div",{className:"text-slate-600",children:i.dayOfWeek})}),e.jsx(x,{className:"py-4",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.time})}),e.jsx(x,{className:"py-4",children:e.jsx("div",{className:"text-slate-600 truncate max-w-[120px]",children:i.location})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx(w,{variant:"secondary",children:"1"})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx(w,{className:ee("font-medium",i.emptyClasses>0?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"),children:i.emptyClasses})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx(w,{className:ee("font-medium",i.nonEmptyClasses>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:i.nonEmptyClasses})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-slate-900",children:i.checkedInCount||0})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:i.checkedInCount||0})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-slate-700",children:(i.checkedInCount||0)>0?i.checkedInCount||0:"-"})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-bold text-green-700",children:G(i.totalPaid||0)})}),e.jsx(x,{className:"py-4 text-center",children:e.jsx("div",{className:"font-medium text-orange-700",children:i.lateCancelledCount||0})}),e.jsx(x,{className:"py-4 text-center text-slate-400",children:"-"}),e.jsx(x,{className:"py-4 text-center text-slate-400",children:"-"})]},m))})]})}),o>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-100 bg-slate-50",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",(a-1)*d+1," to ",Math.min(a*d,n.length)," of ",n.length," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>r(i=>Math.max(1,i-1)),disabled:a===1,className:"flex items-center gap-1",children:[e.jsx(Ls,{className:"w-4 h-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,o)},(i,m)=>{const f=m+1;return e.jsx(F,{variant:a===f?"default":"ghost",size:"sm",onClick:()=>r(f),className:"w-8 h-8 p-0",children:f},f)})}),e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>r(i=>Math.min(o,i+1)),disabled:a===o,className:"flex items-center gap-1",children:["Next",e.jsx(De,{className:"w-4 h-4"})]})]})]})]})]})},os=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ha=({data:u,location:c})=>{const[R,v]=j.useState("attendance"),[k,l]=j.useState("overall"),[p,g]=j.useState(!1),b=j.useMemo(()=>{const r=new Set;return u.forEach(d=>{const S=new Date(d.date),N=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`;r.add(N)}),Array.from(r).sort().map(d=>{const[S,N]=d.split("-"),y=parseInt(N)-1;return{key:d,label:`${os[y]} ${S}`,shortLabel:`${os[y]}'${S.slice(2)}`}})},[u]),C=j.useMemo(()=>{const r=new Map;return u.forEach(S=>{let N="Overall";switch(k){case"trainer":N=S.trainerName||"Unknown Trainer";break;case"class":N=S.cleanedClass||"Unknown Class";break;case"location":N=S.location||"Unknown Location";break;case"day_time":N=`${S.dayOfWeek} ${S.time}`;break;case"trainer_class":N=`${S.trainerName||"Unknown"} - ${S.cleanedClass||"Unknown"}`;break;case"overall":default:N="Overall";break}r.has(N)||r.set(N,[]),r.get(N).push(S)}),Array.from(r.entries()).map(([S,N])=>{const y={};b.forEach(s=>{y[s.key]={month:s.key,monthLabel:s.label,sessions:0,attendance:0,capacity:0,revenue:0,fillRate:0,classAverage:0,bookingRate:0,lateCancellations:0,uniqueClasses:0,uniqueTrainers:0}}),N.forEach(s=>{const n=new Date(s.date),A=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;if(y[A]){const o=y[A];o.sessions+=1,o.attendance+=s.checkedInCount||0,o.capacity+=s.capacity||0,o.revenue+=s.totalPaid||0,o.lateCancellations+=s.lateCancelledCount||0}}),Object.values(y).forEach(s=>{s.fillRate=s.capacity>0?s.attendance/s.capacity*100:0,s.classAverage=s.sessions>0?s.attendance/s.sessions:0,s.bookingRate=s.capacity>0?s.attendance/s.capacity*100:0});const D={month:"total",monthLabel:"Total",sessions:Object.values(y).reduce((s,n)=>s+n.sessions,0),attendance:Object.values(y).reduce((s,n)=>s+n.attendance,0),capacity:Object.values(y).reduce((s,n)=>s+n.capacity,0),revenue:Object.values(y).reduce((s,n)=>s+n.revenue,0),lateCancellations:Object.values(y).reduce((s,n)=>s+n.lateCancellations,0),fillRate:0,classAverage:0,bookingRate:0,uniqueClasses:0,uniqueTrainers:0};return D.fillRate=D.capacity>0?D.attendance/D.capacity*100:0,D.classAverage=D.sessions>0?D.attendance/D.sessions:0,D.bookingRate=D.capacity>0?D.attendance/D.capacity*100:0,{groupKey:S,groupLabel:S,monthlyData:y,totals:D}}).sort((S,N)=>N.totals.attendance-S.totals.attendance)},[u,k,b]),M=(r,d)=>{switch(d){case"attendance":return W(r.attendance);case"sessions":return W(r.sessions);case"revenue":return G(r.revenue);case"fillRate":return Ee(r.fillRate);case"classAverage":return W(r.classAverage);case"capacity":return W(r.capacity);case"bookingRate":return Ee(r.bookingRate);default:return W(r.attendance)}},h=(r,d)=>d===0?r>0?100:0:(r-d)/d*100,t=[{value:"attendance",label:"Attendance",icon:X},{value:"sessions",label:"Sessions",icon:E},{value:"revenue",label:"Revenue",icon:je},{value:"fillRate",label:"Fill Rate",icon:B},{value:"classAverage",label:"Class Average",icon:be},{value:"capacity",label:"Capacity",icon:Be},{value:"bookingRate",label:"Booking Rate",icon:hs}],a=[{value:"overall",label:"Overall",icon:be},{value:"trainer",label:"By Trainer",icon:X},{value:"class",label:"By Class",icon:we},{value:"location",label:"By Location",icon:Fe},{value:"day_time",label:"By Day & Time",icon:ne},{value:"trainer_class",label:"By Trainer & Class",icon:B}];return e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:e.jsxs(z,{className:"w-full shadow-2xl bg-gradient-to-br from-white via-slate-50 to-purple-50/30 border-0 overflow-hidden",children:[e.jsx(P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:e.jsxs(ae,{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-purple-700 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/90 to-pink-600/90 backdrop-blur-sm"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"flex items-center gap-3 text-xl font-bold",children:[e.jsx(P.div,{initial:{rotate:0},animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx($s,{className:"w-6 h-6"})}),"Month-on-Month Analytics"]}),e.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(w,{variant:"secondary",className:"bg-white/20 text-white border-white/30 backdrop-blur-sm",children:[u.length," Total Sessions"]})})]})})]})}),e.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(U,{className:"p-6 bg-gradient-to-br from-white/95 to-slate-50/95 backdrop-blur-sm",children:[e.jsxs(P.div,{className:"flex flex-wrap items-center justify-between gap-4 mb-6 p-4 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-100",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(P.div,{className:"space-y-2",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("label",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Metric"]}),e.jsxs(he,{value:R,onValueChange:r=>v(r),children:[e.jsx(ue,{className:"w-[180px] border-purple-200 focus:border-purple-400 shadow-sm",children:e.jsx(ge,{})}),e.jsx(pe,{children:t.map(r=>{const d=r.icon;return e.jsx(V,{value:r.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),r.label]})},r.value)})})]})]}),e.jsxs(P.div,{className:"space-y-2",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsxs("label",{className:"text-sm font-semibold text-purple-700 flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Group By"]}),e.jsxs(he,{value:k,onValueChange:r=>l(r),children:[e.jsx(ue,{className:"w-[200px] border-purple-200 focus:border-purple-400 shadow-sm",children:e.jsx(ge,{})}),e.jsx(pe,{children:a.map(r=>{const d=r.icon;return e.jsx(V,{value:r.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),r.label]})},r.value)})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(F,{variant:p?"default":"outline",size:"sm",onClick:()=>g(!p),className:ee("transition-all duration-200",p?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700":"border-purple-200 text-purple-700 hover:bg-purple-50"),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Growth %"]})}),e.jsx(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.5},children:e.jsx(w,{variant:"outline",className:"text-sm border-purple-200 text-purple-700 bg-purple-50",children:"Date Filters Ignored"})})]})]}),e.jsx(P.div,{className:"border border-purple-100 rounded-xl overflow-hidden bg-white shadow-xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:e.jsxs(Me,{children:[e.jsx(Le,{className:"sticky top-0 bg-gradient-to-r from-slate-100 to-purple-50 z-20 shadow-sm border-b-2 border-purple-200",children:e.jsxs(se,{children:[e.jsx(T,{className:"min-w-[200px] sticky left-0 bg-gradient-to-r from-slate-100 to-purple-50 border-r border-purple-200 font-bold text-slate-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-purple-600"}),k==="trainer"?"Trainer":k==="class"?"Class":k==="location"?"Location":k==="day_time"?"Day & Time":k==="trainer_class"?"Trainer & Class":"Category"]})}),b.map(r=>e.jsx(T,{className:"text-center min-w-[120px] font-bold text-slate-900 bg-slate-100",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold",children:r.shortLabel}),p&&e.jsx("div",{className:"text-xs text-gray-500",children:"Growth %"})]})},r.key)),e.jsx(T,{className:"text-center min-w-[120px] bg-blue-100 font-bold text-slate-900",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold",children:"Total"}),p&&e.jsx("div",{className:"text-xs text-gray-500",children:"Avg Growth"})]})})]})}),e.jsx($e,{children:e.jsx(na,{children:C.map((r,d)=>e.jsxs(P.tr,{className:ee("border-b transition-all duration-300 hover:shadow-md",d%2===0?"bg-white":"bg-slate-50/50"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,delay:d*.05},whileHover:{backgroundColor:"rgba(59, 130, 246, 0.05)",scale:1.005,transition:{duration:.2}},children:[e.jsx(x,{className:"sticky left-0 bg-inherit border-r font-medium",children:e.jsxs(P.div,{className:"flex items-center gap-2",whileHover:{scale:1.02},transition:{duration:.2},children:[e.jsx(P.div,{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold shadow-md",whileHover:{scale:1.1,rotate:5},transition:{duration:.2},children:r.groupLabel.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:r.groupLabel}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r.totals.sessions," sessions total"]})]})]})}),b.map((S,N)=>{const y=r.monthlyData[S.key],D=N>0?r.monthlyData[b[N-1].key]:null,s=L=>{switch(L){case"attendance":return y.attendance;case"sessions":return y.sessions;case"revenue":return y.revenue;case"fillRate":return y.fillRate;case"classAverage":return y.classAverage;case"capacity":return y.capacity;case"bookingRate":return y.bookingRate;default:return y.attendance}},n=s(R),A=D?s(R):0,o=D?h(n,A):0;return e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:M(y,R)}),p&&D&&e.jsxs("div",{className:ee("text-xs font-medium flex items-center justify-center gap-1",o>0?"text-green-600":o<0?"text-red-600":"text-gray-500"),children:[o>0?e.jsx(Os,{className:"w-3 h-3"}):o<0?e.jsx(Ps,{className:"w-3 h-3"}):null,Ee(Math.abs(o))]})]})},S.key)}),e.jsx(x,{className:"text-center bg-blue-50/50",children:e.jsx(P.div,{className:"font-bold text-blue-800",whileHover:{scale:1.1},transition:{duration:.2},children:M(r.totals,R)})})]},r.groupKey))})})]})})}),e.jsxs(P.div,{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[e.jsx(P.div,{whileHover:{scale:1.05,rotate:1},transition:{duration:.2},children:e.jsx(z,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.6},children:e.jsx(E,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:b.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"Months Tracked"})]})})}),e.jsx(P.div,{whileHover:{scale:1.05,rotate:-1},transition:{duration:.2},children:e.jsx(z,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.7},children:e.jsx(X,{className:"w-8 h-8 mx-auto mb-2 text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:W(u.reduce((r,d)=>r+(d.checkedInCount||0),0))}),e.jsx("div",{className:"text-sm text-green-600",children:"Total Attendance"})]})})}),e.jsx(P.div,{whileHover:{scale:1.05,rotate:1},transition:{duration:.2},children:e.jsx(z,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.8},children:e.jsx(je,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"})}),e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:G(u.reduce((r,d)=>r+(d.totalPaid||0),0))}),e.jsx("div",{className:"text-sm text-purple-600",children:"Total Revenue"})]})})}),e.jsx(P.div,{whileHover:{scale:1.05,rotate:-1},transition:{duration:.2},children:e.jsx(z,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.9},children:e.jsx(be,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"})}),e.jsx("div",{className:"text-2xl font-bold text-orange-800",children:C.length}),e.jsx("div",{className:"text-sm text-orange-600",children:k==="trainer"?"Trainers":k==="class"?"Classes":k==="location"?"Locations":"Groups"})]})})})]})]})})]})})},Ra=()=>{const{data:u,loading:c}=vs(),R=ys(u||[]),{data:v}=ea(),[k,l]=j.useState(null),[p,g]=j.useState(!1),[b,C]=j.useState("all"),M=t=>{l(t),g(!0)},h=()=>{g(!1),l(null)};return c?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((t,a)=>e.jsx(z,{className:"animate-pulse",children:e.jsx(U,{className:"p-6",children:e.jsx("div",{className:"h-20 bg-gray-200 rounded"})})},a))})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(sa,{data:R,selectedLocation:b,onLocationChange:C,children:t=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:e.jsx(aa,{data:t,payrollData:v,onMetricClick:M})}),e.jsx(xa,{data:t}),e.jsxs(Ve,{defaultValue:"comprehensive",className:"w-full",children:[e.jsxs(He,{className:"grid grid-cols-6 w-full bg-white border border-slate-200 p-1 rounded-lg",children:[e.jsx(te,{value:"comprehensive",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:"Comprehensive"}),e.jsx(te,{value:"month-on-month",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:"Month-on-Month"}),e.jsx(te,{value:"rankings",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:"Rankings"}),e.jsx(te,{value:"performance",className:"data-[state=active]:bg-orange-500 data-[state=active]:text-white",children:"Performance"}),e.jsx(te,{value:"analytics",className:"data-[state=active]:bg-red-500 data-[state=active]:text-white",children:"Analytics"}),e.jsx(te,{value:"insights",className:"data-[state=active]:bg-indigo-500 data-[state=active]:text-white",children:"Insights"})]}),e.jsx(le,{value:"comprehensive",className:"mt-6",children:e.jsx(ma,{data:t,location:b==="all"?"All Locations":b,onDrillDown:M})}),e.jsx(le,{value:"month-on-month",className:"mt-6",children:e.jsx(ha,{data:u||[],location:b==="all"?"All Locations":b})}),e.jsx(le,{value:"rankings",className:"mt-6",children:e.jsx(ta,{data:t,location:b==="all"?"All Locations":b})}),e.jsx(le,{value:"performance",className:"mt-6",children:e.jsx(ra,{data:t,onDrillDown:M})}),e.jsx(le,{value:"analytics",className:"mt-6",children:e.jsx(z,{className:"bg-white border-slate-200",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Advanced Analytics Coming Soon"}),e.jsx("p",{className:"text-slate-500",children:"Detailed trend analysis, predictive insights, and custom reporting features will be available here."})]})})}),e.jsx(le,{value:"insights",className:"mt-6",children:e.jsx(z,{className:"bg-white border-slate-200",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"AI-Powered Insights"}),e.jsx("p",{className:"text-slate-500",children:"Machine learning-driven recommendations and business insights will be displayed here."})]})})})]})]})}),e.jsx(la,{isOpen:p,onClose:h,data:k||{title:"",sessions:[]}})]})},ua=({data:u})=>{const c=j.useMemo(()=>{if(!u||u.length===0)return[];const k=u.reduce((l,p)=>{const g=new Date(p.date);if(isNaN(g.getTime()))return l;const b=g.toLocaleDateString();return l[b]||(l[b]={date:b,totalSessions:0,totalBooked:0,totalCheckedIn:0,totalCapacity:0,avgFillRate:0}),l[b].totalSessions+=1,l[b].totalBooked+=p.bookedCount||0,l[b].totalCheckedIn+=p.checkedInCount||0,l[b].totalCapacity+=p.capacity||0,l},{});return Object.values(k).map(l=>({...l,avgFillRate:l.totalCapacity>0?(l.totalBooked/l.totalCapacity*100).toFixed(1):0,attendanceRate:l.totalBooked>0?(l.totalCheckedIn/l.totalBooked*100).toFixed(1):0})).slice(-30)},[u]),R=j.useMemo(()=>{if(!u||u.length===0)return[];const k=u.reduce((l,p)=>{const g=new Date(p.date);if(isNaN(g.getTime()))return l;const b=new Date(g);b.setDate(g.getDate()-g.getDay());const C=b.toISOString().split("T")[0];return l[C]||(l[C]={week:C,sessions:0,totalAttendance:0,avgFillRate:0,totalCapacity:0}),l[C].sessions+=1,l[C].totalAttendance+=p.checkedInCount||0,l[C].totalCapacity+=p.capacity||0,l},{});return Object.values(k).map(l=>({...l,avgFillRate:l.totalCapacity>0?(l.totalAttendance/l.totalCapacity*100).toFixed(1):0})).slice(-12)},[u]),v=({active:k,payload:l,label:p})=>k&&l&&l.length?e.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p}),l.map((g,b)=>e.jsxs("p",{style:{color:g.color},className:"text-sm",children:[g.dataKey,": ",g.value,g.dataKey.includes("Rate")||g.dataKey.includes("Fill")?"%":""]},b))]}):null;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(z,{className:"bg-gradient-to-br from-white via-blue-50/30 to-white border-0 shadow-xl",children:[e.jsx(ae,{className:"pb-4",children:e.jsxs(re,{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-slate-900 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-blue-600"}),"Daily Attendance Analytics"]})}),e.jsx(U,{children:e.jsx("div",{className:"h-80",children:e.jsx(ss,{width:"100%",height:"100%",children:e.jsxs(ia,{data:c,children:[e.jsx(as,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(ts,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickFormatter:k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(ls,{stroke:"#6b7280",fontSize:12}),e.jsx(ns,{content:e.jsx(v,{})}),e.jsx(rs,{}),e.jsx(Ue,{type:"monotone",dataKey:"totalCheckedIn",stroke:"#3b82f6",strokeWidth:3,name:"Daily Check-ins",dot:{fill:"#3b82f6",strokeWidth:2,r:4}}),e.jsx(Ue,{type:"monotone",dataKey:"avgFillRate",stroke:"#10b981",strokeWidth:3,name:"Fill Rate %",dot:{fill:"#10b981",strokeWidth:2,r:4}}),e.jsx(Ue,{type:"monotone",dataKey:"attendanceRate",stroke:"#f59e0b",strokeWidth:3,name:"Attendance Rate %",dot:{fill:"#f59e0b",strokeWidth:2,r:4}})]})})})})]}),e.jsxs(z,{className:"bg-gradient-to-br from-white via-purple-50/30 to-white border-0 shadow-xl",children:[e.jsx(ae,{className:"pb-4",children:e.jsxs(re,{className:"text-xl font-bold bg-gradient-to-r from-slate-700 to-slate-900 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(E,{className:"w-6 h-6 text-purple-600"}),"Weekly Performance Overview"]})}),e.jsx(U,{children:e.jsx("div",{className:"h-80",children:e.jsx(ss,{width:"100%",height:"100%",children:e.jsxs(ca,{data:R,children:[e.jsx(as,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(ts,{dataKey:"week",stroke:"#6b7280",fontSize:12,tickFormatter:k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(ls,{stroke:"#6b7280",fontSize:12}),e.jsx(ns,{content:e.jsx(v,{})}),e.jsx(rs,{}),e.jsx(is,{dataKey:"sessions",fill:"#8b5cf6",name:"Total Sessions",radius:[4,4,0,0]}),e.jsx(is,{dataKey:"totalAttendance",fill:"#06b6d4",name:"Total Attendance",radius:[4,4,0,0]})]})})})})]})]})},ga=({data:u})=>{const c=j.useMemo(()=>{const l=u.filter(s=>{const n=s.cleanedClass||"";return!["Hosted","P57","X"].some(L=>n.toLowerCase().includes(L.toLowerCase()))}),p=l.length,g=l.reduce((s,n)=>s+n.capacity,0),b=l.reduce((s,n)=>s+n.checkedInCount,0),C=l.reduce((s,n)=>s+n.totalPaid,0),M=l.reduce((s,n)=>s+n.lateCancelledCount,0),h=l.reduce((s,n)=>s+n.complimentaryCount,0);l.reduce((s,n)=>s+n.nonPaidCount,0),l.reduce((s,n)=>s+n.bookedCount,0);const t=l.reduce((s,n)=>s+n.checkedInsWithMemberships,0);l.reduce((s,n)=>s+n.checkedInsWithPackages,0);const a=g>0?b/g*100:0,r=p>0?C/p:0,d=p>0?M/p:0,S=p>0?b/p:0,N=b>0?t/b*100:0,y=l.reduce((s,n)=>(s[n.time]=(s[n.time]||0)+n.checkedInCount,s),{}),D=Object.entries(y).sort(([,s],[,n])=>n-s)[0]?.[0]||"N/A";return[{title:"Total Sessions",value:W(p),change:8.2,description:"Active class sessions tracked (excluding hosted, P57, X)",detailDescription:`Total capacity: ${W(g)} seats across all sessions. Includes all regular classes and excludes special events.`,icon:E,color:"blue"},{title:"Average Class Size",value:S.toFixed(1),change:12.5,description:"Average attendees per session",detailDescription:`Calculated from ${W(b)} total attendees across ${p} sessions. This metric helps track class popularity and capacity optimization.`,icon:X,color:"purple"},{title:"Average Fill Rate",value:`${a.toFixed(1)}%`,change:15.3,description:"Average capacity utilization",detailDescription:`${W(b)} attendees out of ${W(g)} total capacity. Higher fill rates indicate better demand-capacity matching.`,icon:B,color:"green"},{title:"Total Revenue",value:G(C),change:7.4,description:"Revenue from class attendance",detailDescription:`Generated from ${p} sessions with an average of ${G(r)} per session. Includes all paid attendees.`,icon:je,color:"yellow"},{title:"Late Cancellations",value:W(M),change:-2.1,description:`Avg ${d.toFixed(1)} per session`,detailDescription:"Total late cancellations across all sessions. This impacts revenue and class planning. Lower is better for studio operations.",icon:Ke,color:"red"},{title:"Complimentary Attendees",value:W(h),change:3.8,description:"Free class attendees",detailDescription:`Students attending on complimentary passes or promotional offers. Represents ${(h/b*100).toFixed(1)}% of total attendance.`,icon:Is,color:"pink"},{title:"Membership Usage",value:`${N.toFixed(1)}%`,change:4.2,description:"Classes attended using memberships",detailDescription:`${W(t)} out of ${W(b)} attendees used memberships. Higher percentage indicates strong membership engagement.`,icon:us,color:"indigo"},{title:"Most Popular Time",value:D,change:0,description:"Peak attendance time slot",detailDescription:`Time slot with highest total attendance: ${y[D]||0} attendees. Use this data for scheduling and resource allocation.`,icon:ne,color:"teal"}]},[u]),R=l=>({blue:"text-blue-600",green:"text-green-600",purple:"text-purple-600",yellow:"text-yellow-600",indigo:"text-indigo-600",pink:"text-pink-600",red:"text-red-600",teal:"text-teal-600"})[l]||"text-gray-600",v=l=>({blue:"bg-blue-50",green:"bg-green-50",purple:"bg-purple-50",yellow:"bg-yellow-50",indigo:"bg-indigo-50",pink:"bg-pink-50",red:"bg-red-50",teal:"bg-teal-50"})[l]||"bg-gray-50",k=l=>({blue:"bg-gradient-to-r from-blue-500 to-blue-600",green:"bg-gradient-to-r from-green-500 to-green-600",purple:"bg-gradient-to-r from-purple-500 to-purple-600",yellow:"bg-gradient-to-r from-yellow-500 to-yellow-600",indigo:"bg-gradient-to-r from-indigo-500 to-indigo-600",pink:"bg-gradient-to-r from-pink-500 to-pink-600",red:"bg-gradient-to-r from-red-500 to-red-600",teal:"bg-gradient-to-r from-teal-500 to-teal-600"})[l]||"bg-gradient-to-r from-gray-500 to-gray-600";return e.jsx(_e,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((l,p)=>e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(z,{className:"bg-white/90 backdrop-blur-sm shadow-lg border-0 hover:shadow-xl transition-all duration-300 cursor-pointer group hover:scale-105",children:[e.jsxs(ae,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(re,{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900 transition-colors",children:l.title}),e.jsx("div",{className:`p-3 rounded-xl ${v(l.color)} group-hover:scale-110 transition-transform`,children:e.jsx(l.icon,{className:`h-5 w-5 ${R(l.color)}`})})]}),e.jsxs(U,{className:"space-y-3",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 group-hover:text-gray-800 transition-colors",children:l.value}),l.change!==0&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${l.change>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.jsx(Ce,{className:`h-3 w-3 mr-1 ${l.change<0?"rotate-180":""}`}),l.change>0?"+":"",l.change,"%"]}),e.jsx("span",{className:"ml-2 text-gray-500",children:"vs last period"})]}),e.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-700 transition-colors",children:l.description})]})]})}),e.jsx(q,{side:"bottom",className:"max-w-xs p-4 bg-white shadow-xl border-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`w-8 h-8 ${k(l.color)} rounded-lg flex items-center justify-center mb-2`,children:e.jsx(l.icon,{className:"h-4 w-4 text-white"})}),e.jsx("h4",{className:"font-semibold text-gray-900",children:l.title}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:l.detailDescription}),l.change!==0&&e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[l.change>0?"Trending up":"Trending down"," by ",Math.abs(l.change),"% from previous period"]})})]})})]},l.title))})})},pa=({data:u})=>{const[c,R]=j.useState(new Set),[v,k]=j.useState("classTypeDayTimeLocation"),[l,p]=j.useState("classAverage"),[g,b]=j.useState("desc"),[C,M]=j.useState(null),h=j.useMemo(()=>u.filter(s=>{const n=s.cleanedClass||"";return!["Hosted","P57","X"].some(L=>n.toLowerCase().includes(L.toLowerCase()))}),[u]),t=j.useMemo(()=>{const s={};return h.forEach(n=>{let A;switch(v){case"uniqueId":A=n.uniqueId||"Unknown";break;case"trainer":A=n.trainerName||"Unknown";break;case"classType":A=n.cleanedClass||"Unknown";break;case"dayOfWeek":A=n.dayOfWeek||"Unknown";break;case"timeSlot":A=n.time||"Unknown";break;case"location":A=n.location||"Unknown";break;case"date":A=n.date||"Unknown";break;case"capacity":A=`${n.capacity} seats`;break;case"classTypeDay":A=`${n.cleanedClass||"Unknown"} | ${n.dayOfWeek||"Unknown"}`;break;case"classTypeTime":A=`${n.cleanedClass||"Unknown"} | ${n.time||"Unknown"}`;break;case"classTypeDayTime":A=`${n.cleanedClass||"Unknown"} | ${n.dayOfWeek||"Unknown"} | ${n.time||"Unknown"}`;break;case"classTypeDayTimeLocation":A=`${n.cleanedClass||"Unknown"} | ${n.dayOfWeek||"Unknown"} | ${n.time||"Unknown"} | ${n.location||"Unknown"}`;break;case"classTypeDayTimeLocationTrainer":A=`${n.cleanedClass||"Unknown"} | ${n.dayOfWeek||"Unknown"} | ${n.time||"Unknown"} | ${n.location||"Unknown"} | ${n.trainerName||"Unknown"}`;break;default:A=n.uniqueId||"Unknown"}s[A]||(s[A]=[]),s[A].push(n)}),s},[h,v]),a=j.useMemo(()=>Object.entries(t).filter(([,s])=>s.length>=2).map(([s,n])=>{const A=n.reduce((O,I)=>O+I.checkedInCount,0),o=n.reduce((O,I)=>O+I.capacity,0),L=n.reduce((O,I)=>O+I.totalPaid,0),K=n.reduce((O,I)=>O+I.lateCancelledCount,0),$=n.reduce((O,I)=>O+I.complimentaryCount,0),J=n.reduce((O,I)=>O+I.nonPaidCount,0),ke=n.reduce((O,I)=>O+I.bookedCount,0),Ne=n.reduce((O,I)=>O+I.checkedInsWithMemberships,0),Se=n.reduce((O,I)=>O+I.checkedInsWithPackages,0),i=n.reduce((O,I)=>O+I.checkedInsWithIntroOffers,0),m=n.reduce((O,I)=>O+I.checkedInsWithSingleClasses,0),f=o>0?A/o*100:0,Y=n.length>0?L/n.length:0,ie=n.length>0?A/n.length:0,de=n.length>0?K/n.length:0;return{name:s,sessions:n,occurrences:n.length,totalAttendees:A,totalCapacity:o,totalBooked:ke,avgFillRate:f,totalRevenue:L,avgRevenue:Y,classAverage:ie,lateCancellations:K,avgLateCancellations:de,complimentaryCount:$,nonPaidCount:J,totalMemberships:Ne,totalPackages:Se,totalIntroOffers:i,totalSingleClasses:m}}).sort((s,n)=>{const A=s[l],o=n[l];return typeof A=="string"&&typeof o=="string"?g==="asc"?A.localeCompare(o):o.localeCompare(A):g==="asc"?A-o:o-A}),[t,l,g]),r=s=>{const n=new Set(c);n.has(s)?n.delete(s):n.add(s),R(n)},d=s=>{l===s?b(g==="asc"?"desc":"asc"):(p(s),b("desc"))},S=s=>{M(s)},N=[{value:"classTypeDayTimeLocation",label:"Class + Day + Time + Location",icon:B},{value:"classTypeDayTimeLocationTrainer",label:"Class + Day + Time + Location + Trainer",icon:B},{value:"classTypeDayTime",label:"Class + Day + Time",icon:B},{value:"classTypeDay",label:"Class + Day",icon:B},{value:"classTypeTime",label:"Class + Time",icon:B},{value:"uniqueId",label:"Individual Sessions",icon:E},{value:"trainer",label:"By Trainer",icon:X},{value:"classType",label:"By Class Type",icon:B},{value:"dayOfWeek",label:"By Day of Week",icon:E},{value:"timeSlot",label:"By Time Slot",icon:E},{value:"location",label:"By Location",icon:E},{value:"date",label:"By Date",icon:E},{value:"capacity",label:"By Capacity",icon:X}],y=()=>{const s=[];return(v.includes("classType")||v==="classType")&&s.push({key:"cleanedClass",label:"Class Name"}),(v.includes("Day")||v==="dayOfWeek")&&s.push({key:"dayOfWeek",label:"Day"}),(v.includes("Time")||v==="timeSlot")&&s.push({key:"time",label:"Time"}),(v.includes("Location")||v==="location")&&s.push({key:"location",label:"Location"}),(v.includes("Trainer")||v==="trainer")&&s.push({key:"trainerName",label:"Trainer"}),s},D=s=>{const n=s.split(" | "),A=y(),o={};return A.forEach((L,K)=>{o[L.key]=n[K]||""}),o};return e.jsx(_e,{children:e.jsxs(z,{className:"bg-white/90 backdrop-blur-sm shadow-xl border-0 overflow-hidden",children:[e.jsx(ae,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"text-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(fe,{className:"w-5 h-5 text-white"})}),"Session Analysis Table",e.jsxs(w,{variant:"secondary",className:"ml-2",children:[a.length," groups  ",h.length," sessions"]})]}),e.jsxs(qe,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(F,{variant:"outline",size:"sm",className:"gap-2 bg-white/80 hover:bg-white",children:[N.find(s=>s.value===v)?.label,e.jsx(oe,{className:"h-4 w-4"})]})}),e.jsx(Ge,{className:"bg-white shadow-lg border-0",children:N.map(s=>e.jsxs(Xe,{onClick:()=>k(s.value),className:"hover:bg-blue-50",children:[e.jsx(s.icon,{className:"w-4 h-4 mr-2"}),s.label]},s.value))})]})]})}),e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"max-h-[800px] overflow-auto",children:e.jsxs(Me,{children:[e.jsx(Le,{className:"sticky top-0 bg-gradient-to-r from-gray-50 to-blue-50 z-10",children:e.jsxs(se,{children:[e.jsx(T,{className:"w-80 sticky left-0 bg-gradient-to-r from-gray-50 to-blue-50 z-20 border-r",children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("name"),className:"h-6 p-0 font-semibold",children:["Group",l==="name"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),y().map(s=>e.jsx(T,{className:"text-center min-w-28 font-semibold",children:s.label},s.key)),e.jsx(T,{className:"text-center min-w-20",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("occurrences"),className:"h-6 p-0 font-semibold",children:["Sessions",l==="occurrences"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Number of sessions in this group"})})]})}),e.jsx(T,{className:"text-center min-w-28",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("totalAttendees"),className:"h-6 p-0 font-semibold",children:["Total Attendance",l==="totalAttendees"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Total number of attendees across all sessions"})})]})}),e.jsx(T,{className:"text-center min-w-24",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("avgFillRate"),className:"h-6 p-0 font-semibold",children:["Fill Rate %",l==="avgFillRate"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Average capacity utilization percentage"})})]})}),e.jsx(T,{className:"text-center min-w-32",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("totalRevenue"),className:"h-6 p-0 font-semibold",children:["Total Revenue",l==="totalRevenue"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Total revenue generated by this group"})})]})}),e.jsx(T,{className:"text-center min-w-32",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("avgRevenue"),className:"h-6 p-0 font-semibold",children:["Avg Revenue",l==="avgRevenue"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Average revenue per session"})})]})}),e.jsx(T,{className:"text-center min-w-32",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("lateCancellations"),className:"h-6 p-0 font-semibold",children:["Late Cancellations",l==="lateCancellations"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Total late cancellations in this group"})})]})}),e.jsx(T,{className:"text-center min-w-32",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("complimentaryCount"),className:"h-6 p-0 font-semibold",children:["Complimentary",l==="complimentaryCount"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Total complimentary entries"})})]})}),e.jsx(T,{className:"text-center min-w-32",children:e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>d("nonPaidCount"),className:"h-6 p-0 font-semibold",children:["Non-Paid",l==="nonPaidCount"&&(g==="asc"?e.jsx(Q,{className:"ml-1 h-3 w-3"}):e.jsx(Z,{className:"ml-1 h-3 w-3"}))]})}),e.jsx(q,{children:e.jsx("p",{children:"Total non-paid entries"})})]})}),e.jsx(T,{className:"text-center min-w-24",children:e.jsx(F,{variant:"ghost",size:"sm",className:"h-6 p-0 font-semibold",children:"Actions"})})]})}),e.jsx($e,{children:a.map(s=>{const n=D(s.name),A=y();return e.jsxs(Re.Fragment,{children:[e.jsxs(se,{className:"cursor-pointer hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 border-b-2 border-gray-200 transition-all duration-200",onClick:()=>r(s.name),children:[e.jsx(x,{className:"sticky left-0 bg-white z-10 border-r h-12 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[c.has(s.name)?e.jsx(oe,{className:"h-4 w-4 text-gray-500"}):e.jsx(De,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(B,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-semibold text-sm truncate max-w-[200px]",children:s.name})]})]})}),A.map(o=>e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(w,{variant:"outline",className:"bg-blue-50",children:n[o.key]})},o.key)),e.jsx(x,{className:"text-center h-12 py-2",children:e.jsx(w,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700",children:s.occurrences})}),e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium",children:W(s.totalAttendees)}),e.jsx(x,{className:"text-center h-12 py-2",children:e.jsxs(w,{className:s.avgFillRate>=80?"bg-green-100 text-green-800":s.avgFillRate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:[s.avgFillRate.toFixed(1),"%"]})}),e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium text-green-700",children:G(s.totalRevenue)}),e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium text-blue-700",children:G(s.avgRevenue)}),e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(w,{variant:s.lateCancellations>10?"destructive":"secondary",children:s.lateCancellations})}),e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(w,{variant:"outline",className:"bg-purple-50 text-purple-700",children:s.complimentaryCount})}),e.jsx(x,{className:"text-center h-12 py-2 text-sm font-medium",children:e.jsx(w,{variant:"outline",className:"bg-orange-50 text-orange-700",children:s.nonPaidCount})}),e.jsx(x,{className:"text-center h-12 py-2",children:e.jsxs(F,{variant:"ghost",size:"sm",onClick:o=>{o.stopPropagation(),S(s.name)},className:"h-8 px-3 text-xs bg-gray-100 hover:bg-gray-200",children:[e.jsx(gs,{className:"w-3 h-3 mr-1"}),"Details"]})})]}),c.has(s.name)&&e.jsx(se,{children:e.jsx(x,{colSpan:y().length+9,className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Average Attendance"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s.classAverage.toFixed(1)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Capacity"}),e.jsx("div",{className:"text-xl font-bold text-gray-800",children:W(s.totalCapacity)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Memberships Used"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:W(s.totalMemberships)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Packages Used"}),e.jsx("div",{className:"text-xl font-bold text-purple-600",children:W(s.totalPackages)})]})]})})})})]},s.name)})})]})})})]})})},ja=({data:u})=>{const[c,R]=j.useState("all"),[v,k]=j.useState(new Set),l=j.useMemo(()=>u.filter(h=>{const t=h.cleanedClass||"";return!["Hosted","P57","X"].some(d=>t.toLowerCase().includes(d.toLowerCase()))}),[u]),p=h=>{const t=h.toLowerCase().trim();return t.includes("barre 57")||t.includes("barre57")?"Barre 57":t.includes("power cycle")||t.includes("powercycle")?"Power Cycle":t.includes("cycle")&&!t.includes("power")?"Cycle":t.includes("barre")&&!t.includes("57")?"Barre":h},g=j.useMemo(()=>{const h=l.reduce((t,a)=>{const r=a.cleanedClass||"Unknown",d=p(r);t[d]||(t[d]={className:d,classes:new Map,totalSessions:0,totalAttendees:0,totalRevenue:0,totalCapacity:0,totalLateCancellations:0,totalComplimentary:0,totalNonPaid:0,totalEmptyClasses:0});const S=`${r}|${a.dayOfWeek}|${a.time}|${a.location}`;t[d].classes.has(S)||t[d].classes.set(S,{className:r,dayOfWeek:a.dayOfWeek,time:a.time,location:a.location,trainerName:a.trainerName,sessions:0,attendees:0,revenue:0,capacity:0,classAverage:0,lateCancellations:0,complimentary:0,nonPaid:0,emptyClasses:0});const N=t[d].classes.get(S);return N.sessions++,N.attendees+=a.checkedInCount,N.revenue+=a.totalPaid,N.capacity+=a.capacity,N.lateCancellations+=a.lateCancelledCount,N.complimentary+=a.complimentaryCount,N.nonPaid+=a.nonPaidCount,a.checkedInCount===0&&(N.emptyClasses++,t[d].totalEmptyClasses++),t[d].totalSessions++,t[d].totalAttendees+=a.checkedInCount,t[d].totalRevenue+=a.totalPaid,t[d].totalCapacity+=a.capacity,t[d].totalLateCancellations+=a.lateCancelledCount,t[d].totalComplimentary+=a.complimentaryCount,t[d].totalNonPaid+=a.nonPaidCount,t},{});return Object.values(h).forEach(t=>{t.avgFillRate=t.totalCapacity>0?t.totalAttendees/t.totalCapacity*100:0,t.avgRevenue=t.totalSessions>0?t.totalRevenue/t.totalSessions:0,t.classAverage=t.totalSessions>0?t.totalAttendees/t.totalSessions:0,t.classes.forEach(a=>{a.classAverage=a.sessions>0?a.attendees/a.sessions:0,a.fillRate=a.capacity>0?a.attendees/a.capacity*100:0,a.avgLateCancellations=a.sessions>0?a.lateCancellations/a.sessions:0,a.emptyClassRate=a.sessions>0?a.emptyClasses/a.sessions*100:0}),t.classesArray=Array.from(t.classes.values()).filter(a=>a.sessions>=2).sort((a,r)=>r.classAverage-a.classAverage)}),Object.values(h).filter(t=>t.classesArray.length>0).sort((t,a)=>a.classAverage-t.classAverage)},[l]),b=j.useMemo(()=>c==="all"?g:g.filter(h=>h.className===c),[g,c]),C=h=>{const t=new Set(v);t.has(h)?t.delete(h):t.add(h),k(t)},M=["all",...g.map(h=>h.className)];return e.jsx(_e,{children:e.jsxs(z,{className:"bg-white/90 backdrop-blur-sm shadow-xl border-0 overflow-hidden",children:[e.jsx(ae,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"text-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(Ws,{className:"w-5 h-5 text-white"})}),"Class Format Analysis",e.jsxs(w,{variant:"secondary",className:"ml-2",children:[g.length," class types  ",l.length," sessions"]})]}),e.jsxs(qe,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(F,{variant:"outline",size:"sm",className:"gap-2 bg-white/80 hover:bg-white",children:[c==="all"?"All Class Types":c,e.jsx(oe,{className:"h-4 w-4"})]})}),e.jsx(Ge,{className:"bg-white shadow-lg border-0 max-h-96 overflow-auto z-50",children:M.map(h=>e.jsxs(Xe,{onClick:()=>R(h),className:"hover:bg-purple-50",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),h==="all"?"All Class Types":h]},h))})]})]})}),e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"max-h-[800px] overflow-auto space-y-4 p-4",children:b.map(h=>e.jsx(z,{className:"border shadow-sm",children:e.jsxs(ps,{open:v.has(h.className),children:[e.jsx(js,{onClick:()=>C(h.className),className:"w-full",children:e.jsx(ae,{className:"hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 transition-all duration-200 cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[v.has(h.className)?e.jsx(oe,{className:"h-5 w-5 text-gray-500"}):e.jsx(De,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx(us,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:h.className}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.classesArray.length," schedules  ",h.totalSessions," sessions"]}),h.totalEmptyClasses>0&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(Ke,{className:"w-3 h-3"}),h.totalEmptyClasses," empty classes"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-purple-600",children:h.classAverage.toFixed(1)}),e.jsx("div",{className:"text-gray-500",children:"Avg Attendance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(w,{variant:h.avgFillRate>80?"default":h.avgFillRate>60?"secondary":"outline",className:h.avgFillRate>80?"bg-green-100 text-green-700":h.avgFillRate>60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:[h.avgFillRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-gray-500 mt-1",children:"Fill Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-green-600",children:G(h.totalRevenue)}),e.jsx("div",{className:"text-gray-500",children:"Revenue"})]})]})]})})}),e.jsx(bs,{children:e.jsx(U,{className:"pt-0",children:e.jsxs(Me,{children:[e.jsx(Le,{children:e.jsxs(se,{className:"bg-gradient-to-r from-gray-50 to-purple-50",children:[e.jsx(T,{className:"font-semibold",children:"Class Name"}),e.jsx(T,{className:"font-semibold",children:"Day"}),e.jsx(T,{className:"font-semibold",children:"Time"}),e.jsx(T,{className:"font-semibold",children:"Location"}),e.jsx(T,{className:"font-semibold",children:"Trainer"}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Sessions"}),e.jsx(q,{children:"Number of sessions conducted"})]})}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Check-ins"}),e.jsx(q,{children:"Total check-ins across all sessions"})]})}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Class Average"}),e.jsx(q,{children:"Average attendees per session"})]})}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Empty Classes"}),e.jsx(q,{children:"Number of sessions with 0 attendance"})]})}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Fill Rate %"}),e.jsx(q,{children:"Average capacity utilization"})]})}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Revenue"}),e.jsx(q,{children:"Total revenue generated"})]})}),e.jsx(T,{className:"text-center font-semibold",children:e.jsxs(H,{children:[e.jsx(_,{children:"Late Cancellations"}),e.jsx(q,{children:"Average late cancellations per session"})]})})]})}),e.jsx($e,{children:h.classesArray.map((t,a)=>e.jsxs(se,{className:"hover:bg-gray-50/80",children:[e.jsx(x,{children:e.jsx(w,{variant:"outline",className:"bg-purple-50 text-purple-700 font-medium",children:t.className})}),e.jsx(x,{children:e.jsx(w,{variant:"outline",className:"bg-blue-50 text-blue-700",children:t.dayOfWeek})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:t.time})]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"truncate max-w-32",children:t.location})]})}),e.jsx(x,{children:e.jsx(w,{variant:"outline",className:"bg-green-50 text-green-700",children:t.trainerName})}),e.jsx(x,{className:"text-center font-medium",children:e.jsx(w,{variant:"default",className:"bg-gray-100 text-gray-700",children:t.sessions})}),e.jsx(x,{className:"text-center font-bold text-blue-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),t.attendees]})}),e.jsx(x,{className:"text-center font-bold text-green-600",children:t.classAverage.toFixed(1)}),e.jsx(x,{className:"text-center",children:t.emptyClasses>0?e.jsxs(w,{variant:"outline",className:"bg-red-50 text-red-700",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),t.emptyClasses]}):e.jsx(w,{variant:"outline",className:"bg-green-50 text-green-700",children:"0"})}),e.jsx(x,{className:"text-center",children:e.jsxs(w,{variant:t.fillRate>80?"default":t.fillRate>60?"secondary":"outline",className:t.fillRate>80?"bg-green-100 text-green-700":t.fillRate>60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:[t.fillRate.toFixed(1),"%"]})}),e.jsx(x,{className:"text-center font-medium",children:G(t.revenue)}),e.jsx(x,{className:"text-center",children:e.jsx(w,{variant:"outline",children:t.avgLateCancellations.toFixed(1)})})]},`${h.className}-${a}`))})]})})})]})},h.className))})})]})})},ds=({data:u,title:c,type:R,variant:v,initialCount:k=10})=>{const[l,p]=j.useState("classAverage"),[g,b]=j.useState(k),[C,M]=j.useState(R),[h,t]=j.useState(!1),a=j.useMemo(()=>{const s={};return u.forEach(o=>{let L;C==="classes"?h?L=`${o.cleanedClass}|${o.dayOfWeek}|${o.time}|${o.location}|${o.trainerName}`:L=`${o.cleanedClass}|${o.dayOfWeek}|${o.time}|${o.location}`:L=o.trainerName,L&&(s[L]||(s[L]={name:L,cleanedClass:o.cleanedClass||"",dayOfWeek:o.dayOfWeek||"",time:o.time||"",location:o.location||"",trainerName:o.trainerName||"",totalAttendance:0,avgFillRate:0,totalRevenue:0,sessions:0,classAverage:0}),s[L].totalAttendance+=o.checkedInCount,s[L].totalRevenue+=o.totalPaid,s[L].sessions+=1)}),Object.values(s).forEach(o=>{const K=u.filter($=>C==="classes"?h?$.cleanedClass===o.cleanedClass&&$.dayOfWeek===o.dayOfWeek&&$.time===o.time&&$.location===o.location&&$.trainerName===o.trainerName:$.cleanedClass===o.cleanedClass&&$.dayOfWeek===o.dayOfWeek&&$.time===o.time&&$.location===o.location:$.trainerName===o.trainerName).reduce(($,J)=>$+J.capacity,0);o.avgFillRate=K>0?o.totalAttendance/K*100:0,o.classAverage=o.sessions>0?o.totalAttendance/o.sessions:0}),Object.values(s).filter(o=>!(o.sessions<2||o.cleanedClass&&o.cleanedClass.toLowerCase().includes("hosted"))).sort((o,L)=>{let K,$;switch(l){case"attendance":K=o.totalAttendance,$=L.totalAttendance;break;case"fillRate":K=o.avgFillRate,$=L.avgFillRate;break;case"revenue":K=o.totalRevenue,$=L.totalRevenue;break;case"classAverage":default:K=o.classAverage,$=L.classAverage;break}return v==="top"?$-K:K-$})},[u,C,h,l,v]),r=a.slice(0,g),d=a.length>g,S=[{value:"classAverage",label:"Class Average",icon:B},{value:"attendance",label:"Total Attendance",icon:X},{value:"fillRate",label:"Fill Rate %",icon:hs},{value:"revenue",label:"Revenue",icon:je}],N=s=>{switch(l){case"attendance":return W(s.totalAttendance);case"fillRate":return`${s.avgFillRate.toFixed(1)}%`;case"revenue":return G(s.totalRevenue);case"classAverage":default:return s.classAverage.toFixed(1)}},y=s=>C==="classes"?h?`${s.cleanedClass} - ${s.dayOfWeek} ${s.time} (${s.trainerName})`:`${s.cleanedClass} - ${s.dayOfWeek} ${s.time}`:s.trainerName,D=s=>v==="top"?s===0?"bg-yellow-100 text-yellow-800 border-yellow-200":s===1?"bg-gray-100 text-gray-800 border-gray-200":s===2?"bg-orange-100 text-orange-800 border-orange-200":"bg-blue-50 text-blue-700 border-blue-200":"bg-red-50 text-red-700 border-red-200";return e.jsxs(z,{className:"bg-white shadow-sm border border-gray-200",children:[e.jsxs(ae,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(re,{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[v==="top"?e.jsx(Ce,{className:"w-5 h-5 text-green-600"}):e.jsx(Es,{className:"w-5 h-5 text-red-600"}),c]}),e.jsxs(qe,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",children:[S.find(s=>s.value===l)?.label,e.jsx(oe,{className:"w-4 h-4"})]})}),e.jsx(Ge,{className:"bg-white shadow-lg border z-50",align:"end",children:S.map(s=>e.jsxs(Xe,{onClick:()=>p(s.value),className:"cursor-pointer",children:[e.jsx(s.icon,{className:"w-4 h-4 mr-2"}),s.label]},s.value))})]})]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs(Qe,{type:"single",value:C,onValueChange:s=>s&&M(s),children:[e.jsx(Te,{value:"classes","aria-label":"Classes view",children:"Classes"}),e.jsx(Te,{value:"trainers","aria-label":"Trainers view",children:"Trainers"})]})}),C==="classes"&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qe,{type:"single",value:h?"with-trainer":"without-trainer",onValueChange:s=>t(s==="with-trainer"),children:[e.jsx(Te,{value:"without-trainer","aria-label":"Group without trainer",children:"Group by Class"}),e.jsx(Te,{value:"with-trainer","aria-label":"Group with trainer",children:"Include Trainer"})]})})]}),e.jsxs(U,{className:"p-0",children:[e.jsx("div",{className:"space-y-1 min-h-[600px] overflow-y-auto",children:r.map((s,n)=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border ${D(n)}`,children:n+1}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm mb-1 truncate",children:y(s)}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-1",children:[C==="classes"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",className:"text-xs px-1.5 py-0.5 bg-blue-50 text-blue-700 border-blue-200",children:s.location}),e.jsxs(w,{variant:"outline",className:"text-xs px-1.5 py-0.5 bg-purple-50 text-purple-700 border-purple-200",children:[s.sessions," sessions"]})]}),C==="trainers"&&e.jsxs(w,{variant:"outline",className:"text-xs px-1.5 py-0.5 bg-green-50 text-green-700 border-green-200",children:[s.sessions," classes taught"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l==="attendance"&&`${s.sessions} sessions`,l==="fillRate"&&`${W(s.totalAttendance)} attendees`,l==="revenue"&&`Avg: ${G(s.totalRevenue/s.sessions)}`,l==="classAverage"&&`${W(s.totalAttendance)} total attendees`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1",children:N(s)}),e.jsx(w,{variant:v==="top"?"default":"destructive",className:"text-xs",children:v==="top"?"High Performer":"Needs Focus"})]})]},s.name))}),d&&e.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>b(g+10),className:"w-full",children:["Show More (",a.length-g," remaining)"]})})]})]})},ba=({data:u})=>{const{filters:c,updateFilters:R,clearFilters:v}=ws(),[k,l]=j.useState(null),p=j.useMemo(()=>{const a=[...new Set(u.map(N=>N.trainerName).filter(Boolean))].sort(),r=[...new Set(u.map(N=>N.cleanedClass).filter(Boolean))].sort(),d=[...new Set(u.map(N=>N.dayOfWeek).filter(Boolean))].sort(),S=[...new Set(u.map(N=>N.time).filter(Boolean))].sort();return{trainers:a,classTypes:r,daysOfWeek:d,timeSlots:S}},[u]),g=[{key:"trainers",label:"Trainers",icon:X,options:p.trainers,values:c.trainers,description:"Filter by class instructors"},{key:"classTypes",label:"Class Types",icon:we,options:p.classTypes,values:c.classTypes,description:"Filter by class formats"},{key:"dayOfWeek",label:"Days of Week",icon:E,options:p.daysOfWeek,values:c.dayOfWeek,description:"Filter by day of week"},{key:"timeSlots",label:"Time Slots",icon:ne,options:p.timeSlots,values:c.timeSlots,description:"Filter by class times"}],b=(a,r)=>{const d=[...c[a]],S=d.indexOf(r);S>-1?d.splice(S,1):d.push(r),R({[a]:d})},C=(a,r)=>{R({dateRange:{...c.dateRange,[a]:r}})},M=a=>{R({[a]:[]})},h=g.reduce((a,r)=>a+r.values.length,0)+(c.dateRange.start?1:0)+(c.dateRange.end?1:0),t=({config:a})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a.icon,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("label",{className:"font-medium text-sm",children:a.label}),a.values.length>0&&e.jsx(w,{variant:"secondary",className:"text-xs min-w-[20px] text-center",children:a.values.length})]}),a.values.length>0&&e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>M(a.key),className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",children:"Clear"})]}),e.jsxs(Pe,{open:k===a.key,onOpenChange:r=>l(r?a.key:null),children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(F,{variant:"outline",className:"w-full justify-between text-left font-normal h-9",size:"sm",children:[e.jsx("span",{className:"truncate",children:a.values.length>0?`${a.values.length} selected`:`Select ${a.label.toLowerCase()}`}),e.jsx(oe,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(We,{className:"w-80 p-0",align:"start",children:e.jsxs(Hs,{children:[e.jsx(_s,{placeholder:`Search ${a.label.toLowerCase()}...`}),e.jsxs(qs,{children:[e.jsxs(Ys,{children:["No ",a.label.toLowerCase()," found."]}),e.jsx(Gs,{children:a.options.map(r=>e.jsx(Xs,{onSelect:()=>b(a.key,r),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:ee("flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a.values.includes(r)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ms,{className:"h-3 w-3"})}),e.jsx("span",{children:r})]})},r))})]})]})})]}),a.values.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.values.slice(0,3).map(r=>e.jsxs(w,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-destructive/10 min-w-[60px] max-w-[120px] truncate text-center",onClick:()=>b(a.key,r),children:[e.jsx("span",{className:"truncate",children:r}),e.jsx(ze,{className:"h-3 w-3 ml-1 flex-shrink-0"})]},r)),a.values.length>3&&e.jsxs(w,{variant:"outline",className:"text-xs min-w-[60px] text-center",children:["+",a.values.length-3," more"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.description})]});return e.jsxs(z,{className:"bg-background shadow-sm border",children:[e.jsx(ae,{className:"border-b pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(re,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-primary"}),"Session Filters"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h>0&&e.jsxs(w,{className:"bg-primary text-primary-foreground min-w-[60px] text-center",children:[h," Active"]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:v,disabled:h===0,className:"gap-1 h-8",children:[e.jsx(ze,{className:"h-4 w-4"}),"Clear All"]})]})]})}),e.jsx(U,{className:"p-6",children:e.jsxs(Ve,{defaultValue:"filters",className:"w-full",children:[e.jsxs(He,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(te,{value:"filters",children:"Filter Options"}),e.jsx(te,{value:"dateRange",children:"Date Range"})]}),e.jsx(le,{value:"filters",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map(a=>e.jsx(t,{config:a},a.key))})}),e.jsx(le,{value:"dateRange",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Start Date"]}),c.dateRange.start&&e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>C("start",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(Pe,{children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(F,{variant:"outline",className:"w-full justify-start text-left font-normal h-9",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),c.dateRange.start?cs(c.dateRange.start,"PPP"):"Select start date"]})}),e.jsx(We,{className:"w-auto p-0",align:"start",children:e.jsx(Ze,{mode:"single",selected:c.dateRange.start||void 0,onSelect:a=>C("start",a||null),disabled:a=>c.dateRange.end?a>c.dateRange.end:!1,initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"End Date"]}),c.dateRange.end&&e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>C("end",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(Pe,{children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(F,{variant:"outline",className:"w-full justify-start text-left font-normal h-9",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),c.dateRange.end?cs(c.dateRange.end,"PPP"):"Select end date"]})}),e.jsx(We,{className:"w-auto p-0",align:"start",children:e.jsx(Ze,{mode:"single",selected:c.dateRange.end||void 0,onSelect:a=>C("end",a||null),disabled:a=>c.dateRange.start?a<c.dateRange.start:!1,initialFocus:!0})})]})]})]})})]})})]})},Ae=[{id:"all",name:"All Locations",fullName:"All Locations"},{id:"kwality",name:"Kwality House, Kemps Corner",fullName:"Kwality House, Kemps Corner"},{id:"supreme",name:"Supreme HQ, Bandra",fullName:"Supreme HQ, Bandra"},{id:"kenkere",name:"Kenkere House",fullName:"Kenkere House"}],Na=j.memo(({location:u,isActive:c})=>e.jsxs("div",{className:"flex items-center gap-2",children:[u.id==="all"?e.jsx(Be,{className:"w-4 h-4"}):e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"font-bold",children:u.name})})]}));j.memo(({title:u,value:c,description:R})=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:c}),e.jsx("div",{className:"text-sm text-slate-300 font-medium",children:R})]}));const Da=()=>{const u=Us(),{data:c,loading:R,error:v,refetch:k}=vs(),[l,p]=j.useState("all"),[g,b]=j.useState(!1),C=ys(c||[]),M=j.useMemo(()=>{if(l==="all")return C;const a=Ae.find(r=>r.id===l);return a?C.filter(r=>{if(r.location===a.fullName)return!0;const d=r.location?.toLowerCase()||"";return a.fullName.toLowerCase(),!!(a.id==="kwality"&&d.includes("kwality")||a.id==="supreme"&&d.includes("supreme")||a.id==="kenkere"&&d.includes("kenkere"))}):C},[C,l]),h=j.useMemo(()=>Ae.slice(1).map(r=>{const d=(c||[]).filter(D=>{const s=D.location?.toLowerCase()||"";return r.fullName.toLowerCase(),r.id==="kwality"&&s.includes("kwality")||r.id==="supreme"&&s.includes("supreme")||r.id==="kenkere"&&s.includes("kenkere")?!0:D.location===r.fullName}),S=d.length,N=d.reduce((D,s)=>D+(s.checkedInCount||0),0),y=d.length>0?Math.round(d.reduce((D,s)=>D+(s.fillPercentage||0),0)/d.length):0;return{location:r.name.split(",")[0],sessions:W(S),attendance:N.toLocaleString(),fillRate:`${y}%`}}),[c]),t=j.useCallback(a=>{p(a)},[]);return R?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Js,{type:"full-page"})})}):v?e.jsx("div",{className:"min-h-screen bg-gray-50/30 flex items-center justify-center p-4",children:e.jsx(z,{className:`p-8 ${ye.card.background} ${ye.card.shadow} max-w-md`,children:e.jsxs(U,{className:"text-center space-y-4",children:[e.jsx(Je,{className:"w-12 h-12 text-red-600 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Connection Error"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:v})]}),e.jsxs(F,{onClick:k,className:"gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Retry Connection"]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-[500px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-indigo-600/20"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,_rgba(120,119,198,0.3),_transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_20%,_rgba(255,255,255,0.1),_transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_40%_40%,_rgba(120,119,198,0.2),_transparent_50%)]"})]}),e.jsx("div",{className:"relative px-8 py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(F,{onClick:()=>u("/"),variant:"outline",size:"sm",className:"gap-2 bg-white/10 backdrop-blur-sm border-white/20 text-white hover:bg-white/20 hover:border-white/30 transition-all duration-200",children:[e.jsx(zs,{className:"w-4 h-4"}),"Dashboard"]}),e.jsx(Qs,{sessionsData:M,defaultFileName:"sessions-data",variant:"outline",size:"sm"})]}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 border border-white/20",children:[e.jsx(B,{className:"w-5 h-5 text-blue-300"}),e.jsx("span",{className:"font-semibold text-white",children:"Session Analytics"})]}),e.jsx("h1",{className:"text-6xl md:text-7xl font-black bg-gradient-to-r from-white via-blue-100 to-indigo-200 bg-clip-text text-transparent",children:"Sessions Dashboard"}),e.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Comprehensive analysis of class performance, attendance patterns, and operational insights across all studio locations"}),e.jsx("div",{className:"flex items-center justify-center gap-12 mt-16",children:h.map((a,r)=>e.jsxs(Re.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:a.sessions}),e.jsx("div",{className:"text-sm text-slate-300 font-medium",children:a.location}),e.jsx("div",{className:"text-xs text-slate-400",children:"Sessions"})]}),r<h.length-1&&e.jsx("div",{className:"w-px h-16 bg-white/20"})]},a.location))}),e.jsx("div",{className:"flex items-center justify-center gap-12 mt-8",children:h.map((a,r)=>e.jsxs(Re.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white/90 mb-1",children:a.attendance}),e.jsx("div",{className:"text-xs text-slate-400",children:"Total Attendance"})]}),r<h.length-1&&e.jsx("div",{className:"w-px h-12 bg-white/20"})]},`attendance-${a.location}`))})]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[e.jsx(ba,{data:c||[]}),e.jsxs("div",{className:"flex justify-between items-center animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5 text-indigo-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Data Source: Sessions Sheet"}),e.jsx(w,{variant:"outline",className:"text-indigo-700 border-indigo-200",children:"149ILDqovzZA6FRUJKOwzutWdVqmqWBtWPfzG3A0zxTI"})]}),e.jsxs(F,{variant:"outline",size:"sm",className:"gap-2 text-indigo-700 border-indigo-200 hover:bg-indigo-50",onClick:()=>b(!0),children:[e.jsx(gs,{className:"w-4 h-4"}),"View Source Data"]})]}),e.jsx(z,{className:`${ye.card.background} ${ye.card.shadow} ${ye.card.border} overflow-hidden`,children:e.jsx(U,{className:"p-2",children:e.jsxs(Ve,{value:l,onValueChange:t,className:"w-full",children:[e.jsx(He,{className:"grid w-full grid-cols-4 bg-gradient-to-r from-slate-100 to-slate-200 p-2 rounded-2xl h-auto gap-2",children:Ae.map(a=>e.jsx(te,{value:a.id,className:"rounded-xl px-6 py-4 font-semibold text-sm transition-all duration-300",children:e.jsx(Na,{location:a,isActive:l===a.id})},a.id))}),Ae.map(a=>e.jsxs(le,{value:a.id,className:"space-y-8 mt-8",children:[e.jsx(ga,{data:M}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ds,{data:M,title:"Top Performing Classes",type:"classes",variant:"top",initialCount:10}),e.jsx(ds,{data:M,title:"Bottom Performing Classes",type:"classes",variant:"bottom",initialCount:10})]}),e.jsx(ua,{data:M}),e.jsx(ja,{data:M}),e.jsx(pa,{data:M})]},a.id))]})})})]}),e.jsx(Zs,{open:g,onOpenChange:b,sources:[{name:"Sessions",sheetName:"Sessions",spreadsheetId:"149ILDqovzZA6FRUJKOwzutWdVqmqWBtWPfzG3A0zxTI",data:c||[]}]})]})};export{Aa as S,Ra as U,Da as a,ee as c,ws as u};
