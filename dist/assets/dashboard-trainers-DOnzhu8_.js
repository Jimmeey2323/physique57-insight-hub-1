import{r as S,j as e,_ as Ue,h as P,w as W,an as qe,C as Ke,b as Pe,e as he,U as B,g as U,T as H,Z as de,f as ze,v as we,R as Ce,k as He,ab as We,i as _,u as Ve,F as Fe,X as Je,M as Xe,d as Ee,c as Re,V as fe,W as Ze,a6 as _e,a7 as Qe,a1 as es,a0 as ss,B as ts}from"./react-vendor-dqSXVcdP.js";import{Y as Ye}from"./dashboard-misc-CA4t7ooT.js";import{c as z,f as V,e as as,b as me}from"./utils-BhCMrGmG.js";import{C as R,j as E,k as Y,c as M,T as Ie,m as $e,n as te,o as xe,p as Ge,q as K,a1 as ns,B as I,r as Me,s as ke,t as G,d as oe,Z as rs,_ as ls,$ as os,a6 as is,a7 as cs,a8 as ds,a0 as ms,u as Q,a9 as xs,X as hs,S as ae,f as ne,g as re,h as le,i as A,W as ve,aa as je,L as ce,l as Ae}from"./ui-components-DsfbLwT7.js";import{c as D}from"./dashboard-classes-C0LoPzks.js";import{m as us}from"./animation-vendor-COY9SM-0.js";import{R as ue,P as gs,d as ps,e as vs,T as ge,B as Oe,C as be,X as Ne,Y as ye,c as Se,L as Be,b as pe}from"./chart-vendor-By6BsRZf.js";const Vs=({data:d,onRowClick:p,selectedMetric:f="revenue"})=>{const[j,w]=S.useState(f),u=S.useMemo(()=>{const l=[],x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date,t=s.getFullYear(),r=s.getMonth();for(let i=17;i>=0;i--){const v=new Date(t,r-i,1),c=v.getFullYear(),m=v.getMonth()+1,g=x[v.getMonth()];l.push({key:`${c}-${String(m).padStart(2,"0")}`,display:`${g} ${c}`,year:c,month:m,quarter:Math.ceil(m/3)})}return l},[]),h=l=>{if(!l)return null;const x=l.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(x){const[,t,r,i]=x;return new Date(parseInt(i),parseInt(r)-1,parseInt(t))}const s=new Date(l);return isNaN(s.getTime())?null:s},o=(l,x)=>{if(!l.length)return 0;const s=l.reduce((m,g)=>m+(g.paymentValue||0),0),t=l.length,r=new Set(l.map(m=>m.memberId)).size,i=l.length,v=l.reduce((m,g)=>m+(g.discountAmount||0),0),c=l.length>0?l.reduce((m,g)=>m+(g.discountPercentage||0),0)/l.length:0;switch(x){case"revenue":return s;case"transactions":return t;case"members":return r;case"units":return i;case"atv":return t>0?s/t:0;case"auv":return i>0?s/i:0;case"asv":return r>0?s/r:0;case"upt":return t>0?i/t:0;case"vat":return l.reduce((m,g)=>m+(g.paymentVAT||0),0);case"discountValue":return v;case"discountPercentage":return c;default:return 0}},n=(l,x)=>{switch(x){case"revenue":case"vat":case"discountValue":return V(l);case"atv":case"auv":case"asv":return V(Math.round(l));case"transactions":case"members":case"units":return z(l);case"upt":return l.toFixed(1);case"discountPercentage":return`${l.toFixed(1)}%`;default:return z(l)}},a=S.useMemo(()=>{const l=d.reduce((s,t)=>{const r=t.cleanedProduct||"Unknown";return s[r]||(s[r]=[]),s[r].push(t),s},{});return Object.entries(l).map(([s,t])=>{const r={};u.forEach(({key:g,year:N,month:C})=>{const k=t.filter(T=>{const F=h(T.paymentDate);return F?F.getFullYear()===N&&F.getMonth()+1===C:!1});r[g]=o(k,j)});const i=o(t,j),v=t.reduce((g,N)=>g+(N.paymentValue||0),0),c=t.length,m=new Set(t.map(g=>g.memberId)).size;return{product:s,metricValue:i,monthlyValues:r,rawData:t,name:s,grossRevenue:v,netRevenue:v,totalValue:v,totalCurrent:v,totalTransactions:c,totalCustomers:m,uniqueMembers:m,transactions:c,totalChange:u.length>=2?((r[u[u.length-1].key]||0)-(r[u[u.length-2].key]||0))/(r[u[u.length-2].key]||1)*100:0,months:u.reduce((g,{key:N,display:C})=>(g[C]={current:r[N]||0,change:0},g),{})}}).sort((s,t)=>t.metricValue-s.metricValue)},[d,j,u]),b=(l,x)=>{if(x===0&&l===0)return null;if(x===0)return e.jsx(P,{className:"w-3 h-3 text-green-500 inline ml-1"});const s=(l-x)/x*100;return s>5?e.jsx(P,{className:"w-3 h-3 text-green-500 inline ml-1"}):s<-5?e.jsx(W,{className:"w-3 h-3 text-red-500 inline ml-1"}):null},y=S.useMemo(()=>{const l={};return u.forEach(({key:x})=>{l[x]=a.reduce((s,t)=>s+(t.monthlyValues[x]||0),0)}),{product:"TOTAL",metricValue:o(d,j),monthlyValues:l}},[a,u,d,j]);return e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl rounded-xl",children:[e.jsx(E,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs(Y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-orange-600"}),"Product Performance Month-on-Month Analysis"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Monthly performance metrics by product category (",d.length," total records)"]})]})}),e.jsx(Ye,{value:j,onValueChange:w,className:"w-full"})]})}),e.jsx(M,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto rounded-lg",children:e.jsxs("table",{className:"min-w-full bg-white border-t border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gradient-to-r from-orange-700 to-orange-900 text-white font-semibold text-sm uppercase tracking-wider sticky top-0 z-20",children:e.jsxs("tr",{className:"text-white bg-indigo-900",children:[e.jsx("th",{className:"text-white font-semibold uppercase tracking-wider px-6 py-3 text-left rounded-tl-lg sticky left-0 z-30 bg-indigo-900",children:"Product"}),e.jsx("th",{className:"text-white font-semibold text-xs uppercase tracking-wider px-3 py-2 bg-indigo-900 min-w-24",children:"Contribution %"}),u.map(({key:l,display:x})=>e.jsx("th",{className:"text-white font-semibold text-xs uppercase tracking-wider px-3 py-2 border-l border-indigo-600 min-w-32 bg-indigo-900",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:x.split(" ")[0]}),e.jsx("span",{className:"text-xs text-yellow-300",children:x.split(" ")[1]})]})},l))]})}),e.jsxs("tbody",{children:[a.map((l,x)=>e.jsxs("tr",{onClick:()=>{const s=l.rawData||[],t=s.reduce((c,m)=>c+(m.paymentValue||0),0),r=s.length,i=new Set(s.map(c=>c.memberId||c.customerEmail)).size,v={...l,totalRevenue:t,grossRevenue:t,netRevenue:t,totalValue:t,totalCurrent:t,metricValue:t,transactions:r,totalTransactions:r,uniqueMembers:i,totalCustomers:i,rawData:s,filteredTransactionData:s,isDynamic:!0,calculatedFromFiltered:!0};p(v)},className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 sticky left-0 bg-white border-r border-gray-200 min-w-60",children:e.jsxs("div",{className:"flex items-center gap-4 min-w-60",children:[e.jsxs("span",{className:"font-bold text-slate-700",children:["#",x+1]}),e.jsx("span",{className:"text-zinc-950 font-bold",children:l.product})]})}),e.jsxs("td",{className:"px-3 py-3 text-center text-sm text-gray-900 font-mono",children:[(l.metricValue/y.metricValue*100).toFixed(1),"%"]}),u.map(({key:s,year:t,month:r,display:i},v)=>{const c=l.monthlyValues[s]||0,m=v>0&&l.monthlyValues[u[v-1].key]||0,g=y.monthlyValues[s]||0,N=g>0?c/g*100:0;return e.jsx("td",{className:"px-3 py-3 text-center text-sm text-gray-900 font-mono border-l border-gray-100 hover:bg-blue-50 cursor-pointer transition-colors",title:`Contribution: ${N.toFixed(1)}% of month total`,onClick:C=>{C.stopPropagation();const k=(l.rawData||[]).filter($=>{const q=h($.paymentDate);return q?q.getFullYear()===t&&q.getMonth()+1===r:!1}),T=k.reduce(($,q)=>$+(q.paymentValue||0),0),F=k.length,J=new Set(k.map($=>$.memberId||$.customerEmail)).size,O={...l,name:`${l.product} - ${i}`,totalRevenue:T,grossRevenue:T,netRevenue:T,totalValue:T,totalCurrent:T,metricValue:T,transactions:F,totalTransactions:F,uniqueMembers:J,totalCustomers:J,rawData:k,filteredTransactionData:k,isDynamic:!0,calculatedFromFiltered:!0,cellSpecific:!0,month:i,monthKey:s};p(O)},children:e.jsxs("div",{className:"flex items-center justify-center",children:[n(c,j),b(c,m)]})},s)})]},l.product)),e.jsxs("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-t-4 border-gray-900 font-bold bg-slate-100",children:[e.jsx("td",{className:"px-6 py-3 text-sm font-bold text-gray-900 sticky left-0 border-r border-gray-200 bg-slate-100 hover:bg-blue-100 cursor-pointer transition-colors",onClick:()=>{const l=d.reduce((r,i)=>r+(i.paymentValue||0),0),x=d.length,s=new Set(d.map(r=>r.memberId||r.customerEmail)).size;p({name:"All Products - Total",totalRevenue:l,grossRevenue:l,netRevenue:l,totalValue:l,totalCurrent:l,metricValue:l,transactions:x,totalTransactions:x,uniqueMembers:s,totalCustomers:s,rawData:d,filteredTransactionData:d,isDynamic:!0,calculatedFromFiltered:!0,isTotal:!0})},children:"TOTAL"}),u.map(({key:l,year:x,month:s,display:t})=>e.jsx("td",{className:"px-3 py-3 text-center text-sm text-indigo-900 font-mono font-bold border-l border-gray-200 bg-slate-200 hover:bg-blue-100 cursor-pointer transition-colors",onClick:()=>{const r=d.filter(g=>{const N=h(g.paymentDate);return N?N.getFullYear()===x&&N.getMonth()+1===s:!1}),i=r.reduce((g,N)=>g+(N.paymentValue||0),0),v=r.length,c=new Set(r.map(g=>g.memberId||g.customerEmail)).size,m={name:`All Products - ${t}`,totalRevenue:i,grossRevenue:i,netRevenue:i,totalValue:i,totalCurrent:i,metricValue:i,transactions:v,totalTransactions:v,uniqueMembers:c,totalCustomers:c,rawData:r,filteredTransactionData:r,isDynamic:!0,calculatedFromFiltered:!0,isTotal:!0,cellSpecific:!0,month:t,monthKey:l};p(m)},children:n(y.monthlyValues[l]||0,j)},l))]})]})]})})})]})},Es=({data:d,onRowClick:p,selectedMetric:f="revenue"})=>{const[j,w]=S.useState(f),u=S.useMemo(()=>{const l=[],x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date,t=s.getFullYear(),r=s.getMonth(),i=2024,v=0;for(let c=i;c<=t;c++){const m=c===i?v:0,g=c===t?r:11;for(let N=m;N<=g;N++){const C=x[N];l.push({key:`${c}-${String(N+1).padStart(2,"0")}`,display:`${C} ${c}`,year:c,month:N+1,quarter:Math.ceil((N+1)/3)})}}return l},[]),h=l=>{if(!l)return null;const x=l.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(x){const[,t,r,i]=x;return new Date(parseInt(i),parseInt(r)-1,parseInt(t))}const s=new Date(l);return isNaN(s.getTime())?null:s},o=(l,x)=>{if(!l.length)return 0;const s=l.reduce((m,g)=>m+(g.paymentValue||0),0),t=l.length,r=new Set(l.map(m=>m.memberId)).size,i=l.length,v=l.reduce((m,g)=>m+(g.discountAmount||0),0),c=l.length>0?l.reduce((m,g)=>m+(g.discountPercentage||0),0)/l.length:0;switch(x){case"revenue":return s;case"transactions":return t;case"members":return r;case"units":return i;case"atv":return t>0?s/t:0;case"auv":return i>0?s/i:0;case"asv":return r>0?s/r:0;case"upt":return t>0?i/t:0;case"vat":return l.reduce((m,g)=>m+(g.paymentVAT||0),0);case"netRevenue":return s-l.reduce((m,g)=>m+(g.paymentVAT||0),0);case"discountValue":return v;case"discountPercentage":return c;default:return 0}},n=(l,x)=>{switch(x){case"revenue":case"vat":case"netRevenue":case"discountValue":return V(l);case"atv":case"auv":case"asv":return V(Math.round(l));case"transactions":case"members":case"units":return z(l);case"upt":return l.toFixed(1);case"discountPercentage":return`${l.toFixed(1)}%`;default:return z(l)}},a=S.useMemo(()=>{const l=d.reduce((s,t)=>{const r=t.cleanedCategory||"Unknown";return s[r]||(s[r]=[]),s[r].push(t),s},{});return Object.entries(l).map(([s,t])=>{const r={};u.forEach(({key:g,year:N,month:C})=>{const k=t.filter(T=>{const F=h(T.paymentDate);return F?F.getFullYear()===N&&F.getMonth()+1===C:!1});r[g]=o(k,j)});const i=o(t,j),v=t.reduce((g,N)=>g+(N.paymentValue||0),0),c=t.length,m=new Set(t.map(g=>g.memberId)).size;return{category:s,metricValue:i,monthlyValues:r,rawData:t,name:s,grossRevenue:v,netRevenue:v,totalValue:v,totalCurrent:v,totalTransactions:c,totalCustomers:m,uniqueMembers:m,transactions:c,months:u.reduce((g,{key:N,display:C})=>(g[C]={current:r[N]||0,change:0},g),{})}}).sort((s,t)=>t.metricValue-s.metricValue)},[d,j,u]),b=(l,x,s="month")=>{if(x===0&&l===0)return null;if(x===0)return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3 text-green-500 inline"}),e.jsxs("span",{className:"text-green-600 text-xs",children:["New vs last ",s]})]});const t=(l-x)/x*100;return t>5?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3 text-green-500 inline"}),e.jsxs("span",{className:"text-green-600 text-xs",children:["+",t.toFixed(1),"% vs last ",s]})]}):t<-5?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3 text-red-500 inline"}),e.jsxs("span",{className:"text-red-600 text-xs",children:[t.toFixed(1),"% vs last ",s]})]}):e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-gray-500 text-xs",children:[t.toFixed(1),"% vs last ",s]})})},y=S.useMemo(()=>{const l={};return u.forEach(({key:x})=>{l[x]=a.reduce((s,t)=>s+(t.monthlyValues[x]||0),0)}),{category:"TOTAL",metricValue:o(d,j),monthlyValues:l}},[a,u,d,j]);return e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl rounded-xl",children:[e.jsx(E,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs(Y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-orange-600"}),"Category Performance"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Monthly performance metrics by category (",d.length," total records)"]})]})}),e.jsx(Ye,{value:j,onValueChange:w,className:"w-full"})]})}),e.jsx(M,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto rounded-lg",children:e.jsxs("table",{className:"min-w-full bg-white border-t border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gradient-to-r from-orange-700 to-orange-900 text-white font-semibold text-sm uppercase tracking-wider sticky top-0 z-20",children:e.jsxs("tr",{className:"bg-indigo-900",children:[e.jsx("th",{className:"text-white font-semibold uppercase tracking-wider px-6 py-3 text-left rounded-tl-lg sticky left-0 z-30 bg-violet-900",children:"Category"}),e.jsx("th",{className:"text-white font-semibold text-xs uppercase tracking-wider px-3 py-2 bg-violet-900 min-w-24",children:"Contribution %"}),u.map(({key:l,display:x})=>e.jsx("th",{className:"text-white font-semibold text-xs uppercase tracking-wider px-3 py-2 border-l border-indigo-600 min-w-32 bg-violet-900",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:x.split(" ")[0]}),e.jsx("span",{className:"text-xs text-yellow-300",children:x.split(" ")[1]})]})},l))]})}),e.jsxs("tbody",{children:[a.map(l=>e.jsxs("tr",{onClick:()=>p(l),className:"cursor-pointer border-b border-gray-100 transition-colors duration-200 bg-slate-50 hover:bg-blue-50",children:[e.jsx("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 sticky left-0 bg-white border-r border-gray-200 min-w-60",children:e.jsx("div",{className:"flex items-center gap-4 min-w-60",children:e.jsx("span",{className:"font-bold text-slate-700",children:l.category})})}),e.jsxs("td",{className:"px-3 py-3 text-center text-sm text-gray-900 font-mono",children:[(l.metricValue/y.metricValue*100).toFixed(1),"%"]}),u.map(({key:x,year:s,month:t,display:r},i)=>{const v=l.monthlyValues[x]||0,c=i>0&&l.monthlyValues[u[i-1].key]||0,m=y.monthlyValues[x]||0,g=m>0?v/m*100:0;return e.jsx("td",{className:"px-3 py-3 text-center text-sm text-gray-900 font-mono border-l border-gray-100 hover:bg-blue-100 cursor-pointer transition-colors group relative",onClick:N=>{N.stopPropagation();const C=(l.rawData||[]).filter(O=>{const $=h(O.paymentDate);return $?$.getFullYear()===s&&$.getMonth()+1===t:!1}),k=C.reduce((O,$)=>O+($.paymentValue||0),0),T=C.length,F=new Set(C.map(O=>O.memberId||O.customerEmail)).size,J={...l,name:`${l.category} - ${r}`,totalRevenue:k,grossRevenue:k,netRevenue:k,totalValue:k,totalCurrent:k,metricValue:k,transactions:T,totalTransactions:T,uniqueMembers:F,totalCustomers:F,rawData:C,filteredTransactionData:C,isDynamic:!0,calculatedFromFiltered:!0,cellSpecific:!0,month:r,monthKey:x};p(J)},children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{children:n(v,j)}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 absolute bg-slate-800 text-white px-2 py-1 rounded text-xs z-40 -mt-8",children:[b(v,c,"month"),g>0&&e.jsxs("div",{className:"text-blue-200",children:[g.toFixed(1),"% of month"]})]})]})},x)})]},l.category)),e.jsxs("tr",{className:"bg-gradient-to-r from-indigo-50 to-indigo-100 border-t-4 border-indigo-800 font-bold",children:[e.jsx("td",{className:"px-6 py-3 text-sm font-bold text-indigo-900 sticky left-0 border-r border-indigo-200 bg-slate-50 hover:bg-blue-100 cursor-pointer transition-colors",onClick:()=>{const l=d.reduce((r,i)=>r+(i.paymentValue||0),0),x=d.length,s=new Set(d.map(r=>r.memberId||r.customerEmail)).size;p({name:"All Categories - Total",totalRevenue:l,grossRevenue:l,netRevenue:l,totalValue:l,totalCurrent:l,metricValue:l,transactions:x,totalTransactions:x,uniqueMembers:s,totalCustomers:s,rawData:d,filteredTransactionData:d,isDynamic:!0,calculatedFromFiltered:!0,isTotal:!0})},children:"TOTAL"}),u.map(({key:l,year:x,month:s,display:t})=>e.jsx("td",{className:"px-3 py-3 text-center text-sm text-indigo-900 font-mono font-bold border-l border-indigo-200 hover:bg-blue-100 cursor-pointer transition-colors",onClick:()=>{const r=d.filter(g=>{const N=h(g.paymentDate);return N?N.getFullYear()===x&&N.getMonth()+1===s:!1}),i=r.reduce((g,N)=>g+(N.paymentValue||0),0),v=r.length,c=new Set(r.map(g=>g.memberId||g.customerEmail)).size,m={name:`All Categories - ${t}`,totalRevenue:i,grossRevenue:i,netRevenue:i,totalValue:i,totalCurrent:i,metricValue:i,transactions:v,totalTransactions:v,uniqueMembers:c,totalCustomers:c,rawData:r,filteredTransactionData:r,isDynamic:!0,calculatedFromFiltered:!0,isTotal:!0,cellSpecific:!0,month:t,monthKey:l};p(m)},children:n(y.monthlyValues[l]||0,j)},l))]})]})]})})})]})},Te=({data:d,columns:p,loading:f=!1,stickyHeader:j=!1,showFooter:w=!1,footerData:u,maxHeight:h="600px",className:o,headerGradient:n="from-slate-600 to-slate-700",onSort:a,sortField:b,sortDirection:y,onRowClick:l})=>{if(f)return e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const x=s=>{s.sortable&&a&&a(s.key)};return e.jsx("div",{className:D("relative overflow-auto rounded-xl",o),style:{maxHeight:h},children:e.jsxs(Ie,{className:"w-full table-fixed",children:[e.jsx($e,{className:D(j&&"sticky top-0 z-20","bg-gradient-to-r text-primary-foreground border-none shadow-sm",n),children:e.jsx(te,{className:"border-none",style:{height:"48px"},children:p.map(s=>e.jsx(xe,{className:D("font-bold text-primary-foreground px-4 text-sm whitespace-nowrap",s.align==="center"&&"text-center",s.align==="right"&&"text-right",s.sortable&&"cursor-pointer hover:bg-primary-foreground/10 transition-colors",s.className),style:{height:"48px",width:s.width||"auto"},onClick:()=>x(s),children:e.jsxs("div",{className:"flex items-center gap-2 h-full",children:[s.header,s.sortable&&b===s.key&&(y==="asc"?e.jsx(Ke,{className:"w-4 h-4"}):e.jsx(Pe,{className:"w-4 h-4"}))]})},s.key))})}),e.jsx(Ge,{children:d.map((s,t)=>e.jsx(te,{className:D("hover:bg-muted/40 transition-all duration-200 table-row-stripe",l&&"cursor-pointer hover:scale-[1.01] hover:shadow-sm"),style:{height:"40px"},onClick:()=>l?.(s),children:p.map(r=>e.jsx(K,{className:D("px-4 py-3 text-sm font-medium",r.align==="center"&&"text-center",r.align==="right"&&"text-right",r.className),style:{height:"40px"},children:e.jsx("div",{className:"flex items-center h-full",children:r.render?r.render(s[r.key],s):e.jsx("span",{className:"truncate",children:s[r.key]})})},r.key))},t))}),w&&u&&e.jsx(ns,{className:"sticky bottom-0 z-10 bg-primary/90 backdrop-blur-sm border-t border-border",children:e.jsx(te,{className:"hover:bg-primary/95 border-none",style:{height:"44px"},children:p.map(s=>e.jsx(K,{className:D("font-bold text-primary-foreground px-4 py-3 text-sm",s.align==="center"&&"text-center",s.align==="right"&&"text-right",s.className),style:{height:"44px"},children:e.jsx("div",{className:"flex items-center h-full",children:s.render?s.render(u[s.key],u):e.jsx("span",{className:"truncate",children:u[s.key]})})},s.key))})})]})})},js=({data:d,onRowClick:p})=>{const f=S.useMemo(()=>{const h=new Date().getFullYear(),o=h-1,n=d.reduce((a,b)=>{const[y,l]=(b.monthYear||"").split(" "),x=parseInt(l),s=b.trainerName;if(!isNaN(x)&&(x===h||x===o)){a[s]||(a[s]={trainerName:b.trainerName,location:b.location,currentYear:{sessions:0,revenue:0,customers:0,monthsActive:0},previousYear:{sessions:0,revenue:0,customers:0,monthsActive:0}});const t=x===h?a[s].currentYear:a[s].previousYear;t.sessions+=b.totalSessions,t.revenue+=b.totalPaid,t.customers+=b.totalCustomers,t.monthsActive+=1}return a},{});return Object.values(n).map(a=>{const b=a.currentYear.sessions>0?a.currentYear.customers/a.currentYear.sessions:0,y=a.previousYear.sessions>0?a.previousYear.customers/a.previousYear.sessions:0,l=a.currentYear.sessions>0?a.currentYear.revenue/a.currentYear.sessions:0,x=a.previousYear.sessions>0?a.previousYear.revenue/a.previousYear.sessions:0;return{trainerName:a.trainerName,location:a.location,currentSessions:a.currentYear.sessions,previousSessions:a.previousYear.sessions,sessionsGrowth:a.previousYear.sessions>0?(a.currentYear.sessions-a.previousYear.sessions)/a.previousYear.sessions*100:0,currentRevenue:a.currentYear.revenue,previousRevenue:a.previousYear.revenue,revenueGrowth:a.previousYear.revenue>0?(a.currentYear.revenue-a.previousYear.revenue)/a.previousYear.revenue*100:0,currentCustomers:a.currentYear.customers,previousCustomers:a.previousYear.customers,customersGrowth:a.previousYear.customers>0?(a.currentYear.customers-a.previousYear.customers)/a.previousYear.customers*100:0,currentAvgClassSize:b,previousAvgClassSize:y,classSizeGrowth:y>0?(b-y)/y*100:0,currentRevenuePerSession:l,previousRevenuePerSession:x,revenuePerSessionGrowth:x>0?(l-x)/x*100:0,currentMonthsActive:a.currentYear.monthsActive,previousMonthsActive:a.previousYear.monthsActive}}).filter(a=>a.currentSessions>0||a.previousSessions>0).sort((a,b)=>b.revenueGrowth-a.revenueGrowth)},[d]),j=h=>{p&&p(h.trainerName,{...h,type:"year-on-year-comparison"})},w=[{key:"trainerName",header:"Trainer",className:"font-semibold min-w-[160px]",render:(h,o)=>e.jsx("div",{children:e.jsx("div",{className:"font-medium text-slate-800",children:h})})},{key:"currentSessions",header:`${new Date().getFullYear()} Sessions`,align:"center",render:h=>e.jsx("span",{className:"font-semibold text-blue-600 text-sm ",children:z(h)})},{key:"previousSessions",header:`${new Date().getFullYear()-1} Sessions`,align:"center",render:h=>e.jsx("span",{className:"font-semibold text-gray-600 text-sm",children:z(h)})},{key:"sessionsGrowth",header:"Sessions Growth",align:"center",render:h=>e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[h>0?e.jsx(P,{className:"w-3 h-3 text-green-500"}):h<0?e.jsx(W,{className:"w-3 h-3 text-red-500"}):null,e.jsxs("span",{className:`font-semibold text-sm ${h>0?"text-green-600":h<0?"text-red-600":"text-gray-600"}`,children:[h.toFixed(1),"%"]})]})},{key:"currentRevenue",header:`${new Date().getFullYear()} Revenue`,align:"center",render:h=>e.jsx("span",{className:"font-semibold text-green-600 text-sm",children:V(h)})},{key:"previousRevenue",header:`${new Date().getFullYear()-1} Revenue`,align:"center",render:h=>e.jsx("span",{className:"font-semibold text-gray-600 text-sm",children:V(h)})},{key:"revenueGrowth",header:"Revenue Growth",align:"center",render:h=>e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[h>0?e.jsx(P,{className:"w-3 h-3 text-green-500"}):h<0?e.jsx(W,{className:"w-3 h-3 text-red-500"}):null,e.jsxs("span",{className:`font-semibold text-sm ${h>0?"text-green-600":h<0?"text-red-600":"text-gray-600"}`,children:[h.toFixed(1),"%"]})]})},{key:"currentAvgClassSize",header:`${new Date().getFullYear()} Avg Size`,align:"center",render:h=>e.jsx("span",{className:"font-semibold text-purple-600 text-sm",children:h.toFixed(1)})},{key:"previousAvgClassSize",header:`${new Date().getFullYear()-1} Avg Size`,align:"center",render:h=>e.jsx("span",{className:"font-semibold text-gray-600 text-sm",children:h.toFixed(1)})},{key:"classSizeGrowth",header:"Size Growth",align:"center",render:h=>e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[h>0?e.jsx(P,{className:"w-3 h-3 text-green-500"}):h<0?e.jsx(W,{className:"w-3 h-3 text-red-500"}):null,e.jsxs("span",{className:`font-semibold text-sm ${h>0?"text-green-600":h<0?"text-red-600":"text-gray-600"}`,children:[h.toFixed(1),"%"]})]})}],u={trainerName:"TOTAL",location:"All Locations",currentSessions:f.reduce((h,o)=>h+o.currentSessions,0),previousSessions:f.reduce((h,o)=>h+o.previousSessions,0),sessionsGrowth:0,currentRevenue:f.reduce((h,o)=>h+o.currentRevenue,0),previousRevenue:f.reduce((h,o)=>h+o.previousRevenue,0),revenueGrowth:0,currentCustomers:f.reduce((h,o)=>h+o.currentCustomers,0),previousCustomers:f.reduce((h,o)=>h+o.previousCustomers,0),customersGrowth:0,currentAvgClassSize:0,previousAvgClassSize:0,classSizeGrowth:0};return u.sessionsGrowth=u.previousSessions>0?(u.currentSessions-u.previousSessions)/u.previousSessions*100:0,u.revenueGrowth=u.previousRevenue>0?(u.currentRevenue-u.previousRevenue)/u.previousRevenue*100:0,u.customersGrowth=u.previousCustomers>0?(u.currentCustomers-u.previousCustomers)/u.previousCustomers*100:0,u.currentAvgClassSize=u.currentSessions>0?u.currentCustomers/u.currentSessions:0,u.previousAvgClassSize=u.previousSessions>0?u.previousCustomers/u.previousSessions:0,u.classSizeGrowth=u.previousAvgClassSize>0?(u.currentAvgClassSize-u.previousAvgClassSize)/u.previousAvgClassSize*100:0,e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsx(E,{className:"border-b border-gray-100 bg-gradient-to-r from-emerald-600 to-teal-600 text-white",children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Trainer Year-on-Year Performance Comparison",e.jsxs(I,{variant:"secondary",className:"bg-white/20 text-white",children:[new Date().getFullYear()," vs ",new Date().getFullYear()-1]})]})}),e.jsx(M,{className:"p-0",children:e.jsx(Te,{data:f,columns:w,onRowClick:j,headerGradient:"from-emerald-600 to-teal-600",showFooter:!0,footerData:u,stickyHeader:!0})})]})},fs=({data:d,onRowClick:p})=>{const[f,j]=S.useState({key:"totalRevenue",direction:"desc"}),w=S.useMemo(()=>{const o=d.reduce((n,a)=>{const b=a.trainerName;return n[b]||(n[b]={trainerName:a.trainerName,location:a.location,totalSessions:0,totalCustomers:0,totalRevenue:0,cycleSessions:0,barreSessions:0,strengthSessions:0,cycleRevenue:0,barreRevenue:0,strengthRevenue:0,avgClassSize:0,fillRate:0,utilizationRate:0,conversionRate:0,retentionRate:0,monthsActive:0,revenuePerSession:0,revenuePerCustomer:0,consistencyScore:0,performanceRating:"Excellent",topFormat:"Cycle",growthTrend:0}),n[b].totalSessions+=a.totalSessions,n[b].totalCustomers+=a.totalCustomers,n[b].totalRevenue+=a.totalPaid,n[b].cycleSessions+=a.cycleSessions,n[b].barreSessions+=a.barreSessions,n[b].strengthSessions+=a.strengthSessions,n[b].cycleRevenue+=a.cycleRevenue,n[b].barreRevenue+=a.barreRevenue,n[b].strengthRevenue+=a.strengthRevenue,n[b].monthsActive+=1,n},{});return Object.values(o).map(n=>{n.avgClassSize=n.totalSessions>0?n.totalCustomers/n.totalSessions:0,n.revenuePerSession=n.totalSessions>0?n.totalRevenue/n.totalSessions:0,n.revenuePerCustomer=n.totalCustomers>0?n.totalRevenue/n.totalCustomers:0,n.fillRate=Math.random()*30+70,n.utilizationRate=Math.random()*20+80,n.conversionRate=Math.random()*25+60,n.retentionRate=Math.random()*20+75,n.consistencyScore=Math.random()*25+75,n.growthTrend=Math.random()*40-20;const a={Cycle:n.cycleRevenue,Barre:n.barreRevenue,Strength:n.strengthRevenue};return n.topFormat=Object.entries(a).reduce((b,y)=>a[b[0]]>a[y[0]]?b:y)[0],n.totalRevenue>=5e4?n.performanceRating="Excellent":n.totalRevenue>=3e4?n.performanceRating="Good":n.totalRevenue>=15e3?n.performanceRating="Average":n.performanceRating="Needs Improvement",n}).sort((n,a)=>{if(f.key==="trainerName")return f.direction==="asc"?n.trainerName.localeCompare(a.trainerName):a.trainerName.localeCompare(n.trainerName);const b=n[f.key]||0,y=a[f.key]||0;return f.direction==="asc"?b-y:y-b})},[d,f]),u=o=>{p&&p(o.trainerName,{...o,type:"trainer-performance"})},h=[{key:"trainerName",header:"Trainer",className:"font-semibold min-w-[160px]",render:(o,n)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-800",children:o}),e.jsx("div",{className:"text-sm text-slate-500",children:n.location})]})},{key:"totalSessions",header:"Sessions",align:"center",render:o=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold text-blue-600 text-sm",children:z(o)}),e.jsx(U,{className:"w-3 h-3 text-blue-400 mt-0.5"})]})},{key:"totalCustomers",header:"Customers",align:"center",render:o=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold text-purple-600 text-sm",children:z(o)}),e.jsx(B,{className:"w-3 h-3 text-purple-400 mt-0.5"})]})},{key:"totalRevenue",header:"Revenue",align:"center",render:o=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold text-green-600 text-sm",children:V(o)}),e.jsx("div",{className:"text-xs text-green-500 mt-0.5",children:"Total"})]})},{key:"avgClassSize",header:"Avg Class Size",align:"center",render:o=>e.jsx("span",{className:"font-medium text-slate-700 text-sm",children:o.toFixed(1)})},{key:"revenuePerSession",header:"Revenue/Session",align:"center",render:o=>e.jsx("span",{className:"font-medium text-orange-600 text-sm",children:V(o)})},{key:"topFormat",header:"Top Format",align:"center",render:(o,n)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(I,{className:`
            ${o==="Cycle"?"bg-blue-100 text-blue-800":o==="Barre"?"bg-pink-100 text-pink-800":"bg-green-100 text-green-800"}
          `,children:o}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[o==="Cycle"?n.cycleSessions:o==="Barre"?n.barreSessions:n.strengthSessions," sessions"]})]})},{key:"fillRate",header:"Fill Rate",align:"center",render:o=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:`font-semibold ${o>=85?"text-green-600":o>=70?"text-yellow-600":"text-red-600"}`,children:[o.toFixed(1),"%"]}),e.jsx(H,{className:"w-3 h-3 text-slate-400 mt-1"})]})},{key:"conversionRate",header:"Conversion",align:"center",render:o=>e.jsxs("span",{className:`font-semibold ${o>=80?"text-green-600":o>=65?"text-yellow-600":"text-red-600"}`,children:[o.toFixed(1),"%"]})},{key:"performanceRating",header:"Rating",align:"center",render:(o,n)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(I,{className:`
            ${o==="Excellent"?"bg-green-100 text-green-800":o==="Good"?"bg-blue-100 text-blue-800":o==="Average"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}
          `,children:o}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[n.growthTrend>=0?e.jsx(P,{className:"w-3 h-3 text-green-500"}):e.jsx(P,{className:"w-3 h-3 text-red-500 rotate-180"}),Math.abs(n.growthTrend).toFixed(0),"%"]})]})}];return e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsx(E,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-600 to-indigo-600 text-white",children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Trainer Performance Detail Analysis",e.jsxs(I,{variant:"secondary",className:"bg-white/20 text-white",children:[w.length," Trainers"]})]})}),e.jsx(M,{className:"p-0",children:e.jsx(Te,{data:w,columns:h,onRowClick:u,headerGradient:"from-purple-600 to-indigo-600",showFooter:!1,stickyHeader:!0})})]})},bs=({data:d,onRowClick:p})=>{const[f,j]=S.useState({key:"efficiencyScore",direction:"desc"}),w=S.useMemo(()=>{const n=d.reduce((a,b)=>{const y=b.trainerName;return a[y]||(a[y]={trainerName:b.trainerName,location:b.location,totalSessions:0,nonEmptySessions:0,emptySessions:0,totalCustomers:0,totalRevenue:0,cycleSessions:0,barreSessions:0,strengthSessions:0,monthsActive:0,capacityUtilization:0,revenuePerHour:0,customerRetention:0,avgClassFill:0,efficiencyScore:0,productivityRank:"A",timeOptimization:0,resourceUtilization:0,impactScore:0,qualityIndex:0,growthMomentum:0,consistencyFactor:0}),a[y].totalSessions+=b.totalSessions,a[y].nonEmptySessions+=b.nonEmptySessions,a[y].emptySessions+=b.emptySessions,a[y].totalCustomers+=b.totalCustomers,a[y].totalRevenue+=b.totalPaid,a[y].cycleSessions+=b.cycleSessions,a[y].barreSessions+=b.barreSessions,a[y].strengthSessions+=b.strengthSessions,a[y].monthsActive+=1,a},{});return Object.values(n).map(a=>(a.capacityUtilization=a.totalSessions>0?a.nonEmptySessions/a.totalSessions*100:0,a.avgClassFill=a.nonEmptySessions>0?a.totalCustomers/a.nonEmptySessions:0,a.revenuePerHour=a.totalSessions>0?a.totalRevenue/(a.totalSessions*1):0,a.customerRetention=75+Math.random()*20,a.timeOptimization=80+Math.random()*15,a.resourceUtilization=a.capacityUtilization,a.impactScore=70+Math.random()*25,a.qualityIndex=75+Math.random()*20,a.growthMomentum=Math.random()*30-5,a.consistencyFactor=70+Math.random()*25,a.efficiencyScore=a.capacityUtilization*.25+a.revenuePerHour*.01+a.customerRetention*.2+a.timeOptimization*.15+a.impactScore*.2+a.qualityIndex*.15+a.consistencyFactor*.05,a.efficiencyScore>=90?a.productivityRank="S+":a.efficiencyScore>=85?a.productivityRank="A+":a.efficiencyScore>=80?a.productivityRank="A":a.efficiencyScore>=75?a.productivityRank="B+":a.efficiencyScore>=70?a.productivityRank="B":a.productivityRank="C",a)).sort((a,b)=>{if(f.key==="trainerName")return f.direction==="asc"?a.trainerName.localeCompare(b.trainerName):b.trainerName.localeCompare(a.trainerName);const y=a[f.key]||0,l=b[f.key]||0;return f.direction==="asc"?y-l:l-y})},[d,f]),u=n=>{p&&p(n.trainerName,{...n,type:"trainer-efficiency"})},h=[{key:"trainerName",header:"Trainer",className:"font-semibold min-w-[160px]",render:(n,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-800",children:n}),e.jsx("div",{className:"text-sm text-slate-500",children:a.location}),e.jsxs(I,{className:`mt-1 text-xs ${a.productivityRank==="S+"?"bg-purple-100 text-purple-800":a.productivityRank==="A+"?"bg-green-100 text-green-800":a.productivityRank==="A"?"bg-blue-100 text-blue-800":a.productivityRank==="B+"?"bg-yellow-100 text-yellow-800":a.productivityRank==="B"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:["Rank ",a.productivityRank]})]})},{key:"efficiencyScore",header:"Efficiency Score",align:"center",render:n=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`text-2xl font-bold ${n>=85?"text-green-600":n>=75?"text-blue-600":n>=65?"text-yellow-600":"text-red-600"}`,children:n.toFixed(0)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(de,{className:"w-3 h-3 text-yellow-500"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Score"})]})]})},{key:"capacityUtilization",header:"Capacity Usage",align:"center",render:(n,a)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`font-semibold ${n>=90?"text-green-600":n>=80?"text-blue-600":n>=70?"text-yellow-600":"text-red-600"}`,children:[n.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[a.nonEmptySessions,"/",a.totalSessions]}),e.jsx("div",{className:"w-12 h-1 bg-slate-200 rounded-full mt-1",children:e.jsx("div",{className:`h-full rounded-full ${n>=90?"bg-green-500":n>=80?"bg-blue-500":n>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(n,100)}%`}})})]})},{key:"revenuePerHour",header:"Revenue/Hour",align:"center",render:n=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold text-green-600",children:V(n)}),e.jsx(ze,{className:"w-3 h-3 text-green-400 mt-1"})]})},{key:"avgClassFill",header:"Avg Fill",align:"center",render:n=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold text-purple-600",children:n.toFixed(1)}),e.jsx("div",{className:"text-xs text-purple-500 mt-1",children:"customers"})]})},{key:"customerRetention",header:"Retention",align:"center",render:n=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:`font-semibold ${n>=90?"text-green-600":n>=80?"text-blue-600":n>=70?"text-yellow-600":"text-red-600"}`,children:[n.toFixed(1),"%"]}),e.jsx(H,{className:"w-3 h-3 text-slate-400 mt-1"})]})},{key:"timeOptimization",header:"Time Opt.",align:"center",render:n=>e.jsxs("span",{className:`font-semibold ${n>=90?"text-green-600":n>=85?"text-blue-600":n>=80?"text-yellow-600":"text-red-600"}`,children:[n.toFixed(0),"%"]})},{key:"qualityIndex",header:"Quality Index",align:"center",render:n=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`font-semibold ${n>=90?"text-green-600":n>=85?"text-blue-600":n>=80?"text-yellow-600":"text-red-600"}`,children:n.toFixed(0)}),e.jsx(we,{className:"w-3 h-3 text-slate-400 mt-1"})]})},{key:"growthMomentum",header:"Growth",align:"center",render:n=>e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[n>=0?e.jsx(P,{className:"w-3 h-3 text-green-500"}):e.jsx(W,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:`font-semibold ${n>=0?"text-green-600":"text-red-600"}`,children:[n>=0?"+":"",n.toFixed(1),"%"]})]})},{key:"impactScore",header:"Impact",align:"center",render:n=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`font-bold ${n>=90?"text-purple-600":n>=80?"text-blue-600":n>=70?"text-green-600":"text-yellow-600"}`,children:n.toFixed(0)}),e.jsx("div",{className:"text-xs text-slate-500",children:"score"})]})}],o=S.useMemo(()=>{const n=w.reduce((y,l)=>y+l.efficiencyScore,0)/w.length,a=w.filter(y=>y.efficiencyScore>=85).length,b=w.reduce((y,l)=>y+l.capacityUtilization,0)/w.length;return{avgEfficiency:n,topPerformers:a,avgCapacityUtilization:b}},[w]);return e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsxs(E,{className:"border-b border-gray-100 bg-gradient-to-r from-orange-600 to-red-600 text-white",children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Trainer Efficiency & Productivity Analysis",e.jsxs(I,{variant:"secondary",className:"bg-white/20 text-white",children:[w.length," Trainers"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 text-sm",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-white/80",children:"Avg Efficiency"}),e.jsx("div",{className:"text-xl font-bold",children:o.avgEfficiency.toFixed(0)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-white/80",children:"Top Performers"}),e.jsx("div",{className:"text-xl font-bold",children:o.topPerformers})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-white/80",children:"Avg Utilization"}),e.jsxs("div",{className:"text-xl font-bold",children:[o.avgCapacityUtilization.toFixed(1),"%"]})]})]})]}),e.jsx(M,{className:"p-0",children:e.jsx(Te,{data:w,columns:h,onRowClick:u,headerGradient:"from-orange-600 to-red-600",showFooter:!1,stickyHeader:!0})})]})},Ns=({value:d,onValueChange:p,className:f=""})=>e.jsx(Me,{value:d,onValueChange:p,className:f,children:e.jsxs(ke,{className:"grid w-full grid-cols-4 md:grid-cols-8 gap-1 h-auto p-2",children:[e.jsxs(G,{value:"totalSessions",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Sessions"})]}),e.jsxs(G,{value:"totalCustomers",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Members"})]}),e.jsxs(G,{value:"totalPaid",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Revenue"})]}),e.jsxs(G,{value:"classAverageExclEmpty",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Class"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Average"})]}),e.jsxs(G,{value:"emptySessions",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Empty"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Sessions"})]}),e.jsxs(G,{value:"conversion",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Conversion"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Rate"})]}),e.jsxs(G,{value:"retention",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"Retention"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Rate"})]}),e.jsxs(G,{value:"newMembers",className:"text-xs px-3 py-3 h-auto flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:"New"}),e.jsx("span",{className:"text-[10px] opacity-80",children:"Members"})]})]})}),ys=d=>d.map(p=>{const f=p.totalSessions||0,j=p.totalEmptySessions||0,w=p.totalNonEmptySessions||0,u=p.totalCustomers||0,h=p.totalPaid||0,o=p.cycleSessions||0,n=p.barreSessions||0,a=0,b=w>0?u/w:0,y=f>0?u/f:0,l=typeof p.conversion=="string"?parseFloat(p.conversion.replace("%",""))||0:Number(p.conversion)||0,x=typeof p.retention=="string"?parseFloat(p.retention.replace("%",""))||0:Number(p.retention)||0,s=f*20,t=s>0?u/s*100:0,r=f>0?w/f*100:0,i={Cycle:o,Barre:n,Strength:a},v=Object.entries(i).reduce((k,T)=>i[k[0]]>i[T[0]]?k:T)[0],c={Cycle:o>0?o/f*100:0,Barre:n>0?n/f*100:0,Strength:0},m=f>0?h/f:0,g=u>0?h/u:0,N=0,C=Math.min(100,w/Math.max(f,1)*100);return{trainerId:p.teacherId,trainerName:p.teacherName,trainerEmail:p.teacherEmail,location:p.location,monthYear:p.monthYear||"",totalSessions:f,emptySessions:j,nonEmptySessions:w,totalCustomers:u,totalPaid:h,cycleSessions:o,emptyCycleSessions:p.emptyCycleSessions||0,nonEmptyCycleSessions:p.nonEmptyCycleSessions||0,cycleCustomers:p.cycleCustomers||0,cycleRevenue:p.cyclePaid||0,strengthSessions:a,emptyStrengthSessions:0,nonEmptyStrengthSessions:0,strengthCustomers:0,strengthRevenue:0,barreSessions:n,emptyBarreSessions:p.emptyBarreSessions||0,nonEmptyBarreSessions:p.nonEmptyBarreSessions||0,barreCustomers:p.barreCustomers||0,barreRevenue:p.barrePaid||0,classAverageExclEmpty:b,classAverageInclEmpty:y,fillRate:t,capacity:s,utilizationRate:r,topFormat:v,formatDistribution:c,revenuePerSession:m,revenuePerCustomer:g,growthRate:N,consistencyScore:C,conversion:p.converted||0,retention:p.retained||0,uniqueKey:p.unique||"",newMembers:0,convertedMembers:p.converted||0,retainedMembers:p.retained||0,conversionRate:l,retentionRate:x}}),De=(d,p)=>{switch(p){case"totalSessions":return d.totalSessions;case"totalCustomers":return d.totalCustomers;case"totalPaid":return d.totalPaid;case"classAverageExclEmpty":return d.classAverageExclEmpty;case"classAverageInclEmpty":return d.classAverageInclEmpty;case"emptySessions":return d.emptySessions;case"nonEmptySessions":return d.nonEmptySessions;case"cycleSessions":return d.cycleSessions;case"cycleRevenue":return d.cycleRevenue;case"barreSessions":return d.barreSessions;case"barreRevenue":return d.barreRevenue;case"strengthSessions":return d.strengthSessions;case"strengthRevenue":return d.strengthRevenue;case"conversion":return d.conversion;case"retention":return d.retention;case"conversionRate":return d.conversionRate;case"retentionRate":return d.retentionRate;case"newMembers":return d.newMembers;case"convertedMembers":return d.convertedMembers;case"retainedMembers":return d.retainedMembers;case"fillRate":return d.fillRate;case"capacity":return d.capacity;case"utilizationRate":return d.utilizationRate;case"revenuePerSession":return d.revenuePerSession;case"revenuePerCustomer":return d.revenuePerCustomer;case"growthRate":return d.growthRate;case"consistencyScore":return d.consistencyScore;default:return 0}},ws=({data:d,defaultMetric:p="totalSessions",onRowClick:f})=>{const[j,w]=S.useState(p),[u,h]=S.useState(new Set),o=S.useMemo(()=>{const s={},t=new Set;d.forEach(i=>{s[i.trainerName]||(s[i.trainerName]={}),s[i.trainerName][i.monthYear]=i,t.add(i.monthYear)});const r=Array.from(t).sort((i,v)=>{const c=m=>{if(m.includes("/")){const[g,N]=m.split("/");return new Date(parseInt(N),parseInt(g)-1)}else{const g=m.split("-"),C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(g[0]),k=parseInt(g[1]);return new Date(k,C)}};return c(v).getTime()-c(i).getTime()});return{trainerGroups:s,months:r}},[d]),n=(s,t)=>{switch(t){case"totalPaid":case"cycleRevenue":case"barreRevenue":return V(s);case"retention":case"conversion":return`${s.toFixed(1)}%`;case"classAverageExclEmpty":case"classAverageInclEmpty":return s.toFixed(1);default:return z(s)}},a=(s,t)=>t===0?s>0?100:0:(s-t)/t*100,b=s=>{const t=new Set(u);t.has(s)?t.delete(s):t.add(s),h(t)},y=s=>{const t=o.trainerGroups[s];f&&f(s,{name:s,monthlyData:t,months:o.months})},l=S.useMemo(()=>{const s={};return o.months.forEach(t=>{let r=0;Object.values(o.trainerGroups).forEach(i=>{i[t]&&(r+=De(i[t],j))}),s[t]=r}),s},[o,j]),x=S.useMemo(()=>{const s=Object.values(l),t=s.reduce((v,c)=>v+c,0),r=s.length>0?t/s.length:0,i=s.length>=2?a(s[0],s[1]):0;return{total:t,average:r,growth:i}},[l]);return d.length?e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsx(E,{className:"pb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-lg",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(he,{className:"w-6 h-6"}),"Month-on-Month Trainer Analysis"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(I,{className:"bg-white/20 text-white border-white/30",children:"Individual Monthly Columns"})})]}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Individual month performance for ",Object.keys(o.trainerGroups).length," trainers • ",o.months.length," months tracked • Sorted by most recent"]}),e.jsx(Ns,{value:j,onValueChange:w})]})}),e.jsxs(M,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ie,{children:[e.jsx($e,{className:"sticky top-0 z-20 bg-gradient-to-r from-slate-50 to-slate-100",children:e.jsxs(te,{className:"border-b-2",children:[e.jsx(xe,{className:"font-bold text-slate-700 sticky left-0 bg-gradient-to-r from-slate-50 to-slate-100 z-30 min-w-[200px]",children:"Trainer"}),o.months.map(s=>e.jsx(xe,{className:"text-center font-bold text-slate-700 min-w-[140px]",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:s.split("-")[0]||s.split("/")[0]}),e.jsx("span",{className:"text-slate-500 text-xs",children:s.split("-")[1]||s.split("/")[1]})]})},s)),e.jsx(xe,{className:"text-center font-bold text-slate-700 min-w-[100px]",children:"MoM Change"}),e.jsx(xe,{className:"text-center font-bold text-slate-700 min-w-[120px]",children:"Total"})]})}),e.jsxs(Ge,{children:[e.jsxs(te,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b-2 font-bold",children:[e.jsx(K,{className:"font-bold text-blue-800 sticky left-0 bg-gradient-to-r from-blue-50 to-purple-50 z-10",children:"TOTAL"}),o.months.map(s=>e.jsx(K,{className:"text-center font-bold text-blue-800",children:n(l[s]||0,j)},`total-${s}`)),e.jsx(K,{className:"text-center",children:e.jsxs(I,{className:D("flex items-center gap-1",x.growth>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[x.growth>=0?e.jsx(P,{className:"w-3 h-3"}):e.jsx(W,{className:"w-3 h-3"}),Math.abs(x.growth).toFixed(1),"%"]})}),e.jsx(K,{className:"text-center font-bold text-blue-800",children:n(x.total,j)})]}),Object.entries(o.trainerGroups).map(([s,t])=>{const r=u.has(s),i=o.months.map(m=>t[m]?De(t[m],j):0),v=i.reduce((m,g)=>m+g,0),c=i.length>=2?a(i[0],i[1]):0;return e.jsxs(Ce.Fragment,{children:[e.jsxs(te,{className:"hover:bg-slate-50/50 transition-colors border-b cursor-pointer",onClick:()=>y(s),children:[e.jsx(K,{className:"font-medium text-slate-800 sticky left-0 bg-white z-10 border-r",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{variant:"ghost",size:"sm",onClick:m=>{m.stopPropagation(),b(s)},className:"p-1 h-6 w-6",children:r?e.jsx(Pe,{className:"w-3 h-3"}):e.jsx(He,{className:"w-3 h-3"})}),e.jsx("span",{className:"text-sm",children:s})]})}),i.map((m,g)=>e.jsx(K,{className:"text-center font-mono text-sm",children:n(m,j)},`${s}-${g}`)),e.jsx(K,{className:"text-center",children:e.jsxs(I,{className:D("flex items-center gap-1 w-fit mx-auto",c>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[c>=0?e.jsx(P,{className:"w-3 h-3"}):e.jsx(W,{className:"w-3 h-3"}),Math.abs(c).toFixed(1),"%"]})}),e.jsx(K,{className:"text-center font-bold text-slate-700",children:n(v,j)})]}),r&&e.jsx(te,{className:"bg-gradient-to-r from-blue-50/50 to-purple-50/50 animate-fade-in",children:e.jsx(K,{colSpan:o.months.length+3,className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-slate-600 text-xs font-medium",children:"Average per Month"}),e.jsx("p",{className:"font-bold text-slate-800 text-lg",children:n(v/o.months.length,j)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-slate-600 text-xs font-medium",children:"Best Month"}),e.jsx("p",{className:"font-bold text-green-600 text-lg",children:n(Math.max(...i),j)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-slate-600 text-xs font-medium",children:"Consistency Score"}),e.jsxs("p",{className:"font-bold text-blue-600 text-lg",children:[i.length>1?(100-i.reduce((m,g,N)=>{if(N===0)return m;const C=Math.abs((g-i[N-1])/Math.max(i[N-1],1))*100;return m+C},0)/(i.length-1)).toFixed(0):"100","%"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[e.jsx("p",{className:"text-slate-600 text-xs font-medium",children:"Growth Trend"}),e.jsxs("p",{className:D("font-bold text-lg",c>=0?"text-green-600":"text-red-600"),children:[c>=0?"+":"",c.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Fill Rate:"}),e.jsxs("span",{className:"font-bold",children:[(Math.random()*30+70).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Utilization:"}),e.jsxs("span",{className:"font-bold",children:[(Math.random()*20+80).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Revenue/Session:"}),e.jsxs("span",{className:"font-bold",children:["$",(Math.random()*100+200).toFixed(0)]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:"Class Formats"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"Top Format:"}),e.jsx("span",{className:"font-bold",children:"Cycle"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"Cycle:"}),e.jsxs("span",{className:"font-bold",children:[(Math.random()*30+40).toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"Barre:"}),e.jsxs("span",{className:"font-bold",children:[(Math.random()*30+30).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Member Engagement"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Retention:"}),e.jsxs("span",{className:"font-bold",children:[(Math.random()*20+75).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Conversion:"}),e.jsxs("span",{className:"font-bold",children:[(Math.random()*15+60).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Avg LTV:"}),e.jsxs("span",{className:"font-bold",children:["$",(Math.random()*500+800).toFixed(0)]})]})]})]})]})]})})})]},s)})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-white border-t p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h4",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600"}),"Monthly Performance Summary"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Object.keys(o.trainerGroups).length}),e.jsx("div",{className:"text-sm text-slate-600",children:"Active Trainers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:n(x.total,j)}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Total ",j]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n(x.average,j)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Monthly Average"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:D("text-2xl font-bold",x.growth>=0?"text-green-600":"text-red-600"),children:[x.growth>=0?"+":"",x.growth.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Recent Growth"})]})]})]})]})]}):e.jsx(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:e.jsx(M,{className:"p-6",children:e.jsx("p",{className:"text-center text-slate-600",children:"No trainer data available for month-on-month comparison"})})})},Ss=({isOpen:d,onClose:p,trainerName:f,trainerData:j})=>{const[w,u]=S.useState(!1),h=s=>{const t=s.split("").reduce((i,v)=>(i=(i<<5)-i+v.charCodeAt(0),i&i),0);return`https://api.dicebear.com/7.x/avataaars/svg?seed=${Math.abs(t)%10}&backgroundColor=b6e3f4,c0aede,d1d4f9`},o=S.useMemo(()=>{if(!j)return null;const s=j.totalSessions||j.currentSessions||0,t=j.totalRevenue||j.currentRevenue||0,r=j.totalCustomers||j.currentCustomers||0,i=s>0?r/s:0,v=s>0?t/s:0,c=r>0?t/r:0,m=s*12,g=m>0?r/m*100:0,N=j.previousSessions||0,C=j.previousRevenue||0,k=j.previousCustomers||0,T=N>0?(s-N)/N*100:0,F=C>0?(t-C)/C*100:0,J=k>0?(r-k)/k*100:0,O=[],$=new Date().getMonth();for(let q=5;q>=0;q--){const ie=new Date;ie.setMonth($-q);const X=ie.toLocaleDateString("en-US",{month:"short"}),L=(Math.random()-.5)*.3+1;O.push({month:X,sessions:Math.round(s/6*L),revenue:Math.round(t/6*L),customers:Math.round(r/6*L),fillRate:Math.max(50,Math.min(100,g*L)),retention:Math.max(60,Math.min(95,80+(Math.random()-.5)*20)),conversion:Math.max(50,Math.min(85,70+(Math.random()-.5)*15))})}return{actualSessions:s,actualRevenue:t,actualCustomers:r,avgClassSize:i,revenuePerSession:v,revenuePerCustomer:c,fillRate:g,sessionGrowth:T,revenueGrowth:F,customerGrowth:J,monthlyData:O}},[j]),n=S.useMemo(()=>{if(!o)return 0;const s=Math.min(o.fillRate/95*100,100),t=Math.min(o.actualRevenue/3e4*100,100),r=Math.min(o.actualSessions/100*100,100),i=Math.min(o.avgClassSize/15*100,100);return s*.3+t*.3+r*.25+i*.15},[o]),a=[{name:"Fill Rate",value:o?.fillRate||0,color:"#3B82F6",target:85,description:"Class capacity utilization"},{name:"Revenue Efficiency",value:o?Math.min(o.revenuePerSession/300*100,100):0,color:"#10B981",target:80,description:"Revenue per session performance"},{name:"Client Engagement",value:o?Math.min(o.avgClassSize/12*100,100):0,color:"#F59E0B",target:75,description:"Average class size vs capacity"},{name:"Consistency",value:o?Math.max(60,100-Math.abs(o.sessionGrowth-10)):0,color:"#8B5CF6",target:70,description:"Session delivery consistency"}],b=["#3B82F6","#10B981","#F59E0B","#8B5CF6"],y=[{name:"Cycle",value:j?.cycleSessions||Math.round((o?.actualSessions||0)*.4),percentage:40,color:"#3B82F6"},{name:"Barre",value:j?.barreSessions||Math.round((o?.actualSessions||0)*.35),percentage:35,color:"#10B981"},{name:"Strength",value:j?.strengthSessions||Math.round((o?.actualSessions||0)*.25),percentage:25,color:"#F59E0B"}],x=(s=>s>=90?{label:"Exceptional",color:"bg-emerald-100 text-emerald-800",icon:"🏆"}:s>=80?{label:"Excellent",color:"bg-green-100 text-green-800",icon:"⭐"}:s>=70?{label:"Good",color:"bg-blue-100 text-blue-800",icon:"👍"}:s>=60?{label:"Average",color:"bg-yellow-100 text-yellow-800",icon:"📊"}:{label:"Needs Improvement",color:"bg-red-100 text-red-800",icon:"📈"})(n);return o?e.jsxs(e.Fragment,{children:[e.jsx(rs,{open:d,onOpenChange:p,children:e.jsxs(ls,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[e.jsx(os,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(is,{className:"w-16 h-16 border-2 border-blue-200",children:[e.jsx(cs,{src:h(f)}),e.jsx(ds,{className:"text-lg font-bold bg-blue-100 text-blue-800",children:f.split(" ").map(s=>s[0]).join("")})]}),e.jsxs("div",{children:[e.jsx(ms,{className:"text-3xl font-bold text-slate-800",children:f}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs(I,{className:x.color,children:[x.icon," ",x.label]}),e.jsxs(I,{variant:"outline",className:"text-slate-600",children:["Performance Score: ",n.toFixed(0),"/100"]}),e.jsx(I,{variant:"outline",className:"text-slate-600",children:j.location||"All Locations"})]})]})]})})}),e.jsxs(Me,{defaultValue:"overview",className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-4 bg-slate-100",children:[e.jsx(G,{value:"overview",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Overview"}),e.jsx(G,{value:"performance",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Performance"}),e.jsx(G,{value:"trends",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Trends"}),e.jsx(G,{value:"insights",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Insights"})]}),e.jsxs(Q,{value:"overview",className:"space-y-6 mt-6",children:[e.jsxs(us.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(R,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Total Sessions"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:z(o.actualSessions)}),e.jsxs("div",{className:`text-xs ${o.sessionGrowth>=0?"text-green-600":"text-red-600"}`,children:[o.sessionGrowth>=0?"+":"",o.sessionGrowth.toFixed(1),"% vs last period"]})]})]})})}),e.jsx(R,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:e.jsx(B,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Total Members"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:z(o.actualCustomers)}),e.jsxs("div",{className:`text-xs ${o.customerGrowth>=0?"text-green-600":"text-red-600"}`,children:[o.customerGrowth>=0?"+":"",o.customerGrowth.toFixed(1),"% growth rate"]})]})]})})}),e.jsx(R,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Total Revenue"}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:V(o.actualRevenue)}),e.jsxs("div",{className:`text-xs ${o.revenueGrowth>=0?"text-green-600":"text-red-600"}`,children:[o.revenueGrowth>=0?"+":"",o.revenueGrowth.toFixed(1),"% vs target"]})]})]})})}),e.jsx(R,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-600 rounded-lg",children:e.jsx(H,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Fill Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-900",children:[o.fillRate.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-orange-600",children:["Avg: ",o.avgClassSize.toFixed(1)," per class"]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{className:"h-full",children:[e.jsx(E,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-blue-600"}),"Performance Metrics"]})}),e.jsx(M,{children:e.jsx(ue,{width:"100%",height:280,children:e.jsxs(gs,{children:[e.jsx(ps,{data:a,cx:"50%",cy:"50%",innerRadius:60,outerRadius:110,paddingAngle:5,dataKey:"value",children:a.map((s,t)=>e.jsx(vs,{fill:b[t%b.length]},`cell-${t}`))}),e.jsx(ge,{formatter:s=>`${Number(s).toFixed(1)}%`})]})})})]}),e.jsxs(R,{className:"h-full",children:[e.jsx(E,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-600"}),"Class Format Distribution"]})}),e.jsx(M,{children:e.jsx(ue,{width:"100%",height:280,children:e.jsxs(Oe,{data:y,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(Ne,{dataKey:"name"}),e.jsx(ye,{}),e.jsx(ge,{formatter:s=>`${s} sessions`}),e.jsx(Se,{dataKey:"value",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]})]})]}),e.jsxs(Q,{value:"performance",className:"space-y-6 mt-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((s,t)=>e.jsx(R,{children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:s.name}),e.jsxs("span",{className:"text-lg font-bold",style:{color:s.color},children:[s.value.toFixed(1),"%"]})]}),e.jsx(xs,{value:s.value,className:"h-3"}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Target: ",s.target,"% | ",s.description]})]})})},s.name))}),e.jsxs(R,{children:[e.jsx(E,{children:e.jsx(Y,{children:"Key Performance Indicators"})}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(_,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:V(o.revenuePerSession)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Revenue/Session"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(B,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:o.avgClassSize.toFixed(1)}),e.jsx("div",{className:"text-sm text-green-600",children:"Avg Class Size"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx(H,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:V(o.revenuePerCustomer)}),e.jsx("div",{className:"text-sm text-purple-600",children:"Revenue/Customer"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx(P,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-800",children:[o.revenueGrowth.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-orange-600",children:"Revenue Growth"})]})]})})]})]}),e.jsx(Q,{value:"trends",className:"space-y-6 mt-6",children:e.jsxs(R,{children:[e.jsx(E,{children:e.jsx(Y,{children:"6-Month Performance Trends"})}),e.jsx(M,{children:e.jsx(ue,{width:"100%",height:400,children:e.jsxs(Be,{data:o.monthlyData,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(Ne,{dataKey:"month"}),e.jsx(ye,{}),e.jsx(ge,{}),e.jsx(pe,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,name:"Revenue"}),e.jsx(pe,{type:"monotone",dataKey:"sessions",stroke:"#10B981",strokeWidth:2,name:"Sessions"}),e.jsx(pe,{type:"monotone",dataKey:"customers",stroke:"#F59E0B",strokeWidth:2,name:"Customers"})]})})})]})}),e.jsx(Q,{value:"insights",className:"space-y-6 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(E,{children:e.jsx(Y,{className:"text-green-700",children:"Strengths"})}),e.jsx(M,{children:e.jsxs("ul",{className:"space-y-2",children:[o.fillRate>80&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Strong class fill rate performance"})]}),o.revenueGrowth>0&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Positive revenue growth trend"})]}),o.avgClassSize>8&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Good average class size"})]})]})})]}),e.jsxs(R,{children:[e.jsx(E,{children:e.jsx(Y,{className:"text-orange-700",children:"Growth Opportunities"})}),e.jsx(M,{children:e.jsxs("ul",{className:"space-y-2",children:[o.fillRate<75&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{children:"Focus on improving class fill rates"})]}),o.revenuePerSession<250&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{children:"Opportunity to increase revenue per session"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{children:"Consider specialized class offerings"})]})]})})]})]})})]})]})}),e.jsx(hs,{open:w,onOpenChange:u,sources:[{name:"Trainer Performance",sheetName:"Payroll Data",spreadsheetId:"trainer-performance-sheet",data:o.monthlyData}]})]}):null},Cs=({data:d,onFiltersChange:p,isCollapsed:f,onToggleCollapse:j})=>{const[w,u]=S.useState("all"),[h,o]=S.useState("all"),[n,a]=S.useState("all"),b=Array.from(new Set(d.map(t=>t.location))).filter(Boolean),y=Array.from(new Set(d.map(t=>t.teacherName))).filter(Boolean),l=Array.from(new Set(d.map(t=>t.monthYear))).filter(Boolean).sort().reverse();S.useEffect(()=>{p({location:w==="all"?"":w,trainer:h==="all"?"":h,month:n==="all"?"":n})},[w,h,n,p]);const x=()=>{u("all"),o("all"),a("all")},s=w!=="all"||h!=="all"||n!=="all";return f?e.jsx(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filters"}),s&&e.jsxs(I,{variant:"secondary",className:"text-xs",children:[[w,h,n].filter(t=>t!=="all").length," active"]})]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:j,className:"text-blue-600 hover:text-blue-700",children:"Show Filters"})]})})}):e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsx(E,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-blue-600"}),"Advanced Filters"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsxs(oe,{variant:"outline",size:"sm",onClick:x,className:"text-slate-600 hover:text-slate-700",children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),"Clear All"]}),e.jsx(oe,{variant:"ghost",size:"sm",onClick:j,className:"text-blue-600 hover:text-blue-700",children:"Hide Filters"})]})]})}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-blue-600"}),"Location"]}),e.jsxs(ae,{value:w,onValueChange:u,children:[e.jsx(ne,{children:e.jsx(re,{placeholder:"All Locations"})}),e.jsxs(le,{children:[e.jsx(A,{value:"all",children:"All Locations"}),b.map(t=>e.jsx(A,{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-blue-600"}),"Trainer"]}),e.jsxs(ae,{value:h,onValueChange:o,children:[e.jsx(ne,{children:e.jsx(re,{placeholder:"All Trainers"})}),e.jsxs(le,{children:[e.jsx(A,{value:"all",children:"All Trainers"}),y.map(t=>e.jsx(A,{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-blue-600"}),"Month"]}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsx(ne,{children:e.jsx(re,{placeholder:"All Months"})}),e.jsxs(le,{children:[e.jsx(A,{value:"all",children:"All Months"}),l.map(t=>e.jsx(A,{value:t,children:t},t))]})]})]})]})})]})},Rs=({data:d,onTrainerClick:p})=>{const[f,j]=S.useState("revenue"),[w,u]=S.useState("top"),[h,o]=S.useState(5),n=S.useMemo(()=>{const s=d.reduce((i,v)=>{i[v.trainerName]||(i[v.trainerName]={name:v.trainerName,location:v.location,totalRevenue:0,totalSessions:0,totalCustomers:0,emptySessions:0,avgClassSize:0,efficiency:0,conversionRate:0,retentionRate:0,records:0});const c=i[v.trainerName];return c.totalRevenue+=v.totalPaid,c.totalSessions+=v.totalSessions,c.totalCustomers+=v.totalCustomers,c.emptySessions+=v.emptySessions,c.conversionRate+=v.conversionRate,c.retentionRate+=v.retentionRate,c.records+=1,i},{}),r=Object.values(s).map(i=>({...i,avgClassSize:i.totalSessions>0?i.totalCustomers/i.totalSessions:0,efficiency:i.totalSessions>0?i.totalRevenue/i.totalSessions:0,conversionRate:i.conversionRate/i.records,retentionRate:i.retentionRate/i.records})).sort((i,v)=>{switch(f){case"revenue":return v.totalRevenue-i.totalRevenue;case"sessions":return v.totalSessions-i.totalSessions;case"customers":return v.totalCustomers-i.totalCustomers;case"efficiency":return v.efficiency-i.efficiency;case"classAverage":return v.avgClassSize-i.avgClassSize;case"conversion":return v.conversionRate-i.conversionRate;case"retention":return v.retentionRate-i.retentionRate;case"emptySessions":return v.emptySessions-i.emptySessions;default:return v.totalRevenue-i.totalRevenue}});return w==="bottom"?r.reverse().slice(0,h):w==="top"?r.slice(0,h):r},[d,f,w,h]),a=s=>{switch(f){case"revenue":return V(s.totalRevenue);case"sessions":return z(s.totalSessions);case"customers":return z(s.totalCustomers);case"efficiency":return V(s.efficiency);case"classAverage":return s.avgClassSize.toFixed(1);case"conversion":return s.conversionRate.toFixed(1)+"%";case"retention":return s.retentionRate.toFixed(1)+"%";case"emptySessions":return z(s.emptySessions);default:return V(s.totalRevenue)}},b=()=>{switch(f){case"revenue":return _;case"sessions":return U;case"customers":return B;case"efficiency":return de;case"classAverage":return B;case"conversion":return P;case"retention":return H;case"emptySessions":return U;default:return _}},y=s=>s===1?e.jsx(Ze,{className:"w-5 h-5 text-yellow-600"}):s===2?e.jsx(fe,{className:"w-5 h-5 text-gray-400"}):s===3?e.jsx(_e,{className:"w-5 h-5 text-amber-600"}):e.jsx(we,{className:"w-4 h-4 text-blue-600"}),l=s=>s===1?"from-yellow-400 to-yellow-600":s===2?"from-gray-300 to-gray-500":s===3?"from-amber-400 to-amber-600":"from-blue-400 to-blue-600",x=b();return e.jsxs(R,{className:"bg-gradient-to-br from-white via-purple-50/30 to-indigo-50/30 border-0 shadow-xl hover:shadow-2xl transition-all duration-300",children:[e.jsx(E,{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-t-lg",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx(fe,{className:"w-6 h-6"}),"Trainer Rankings & Performance"]}),e.jsx(I,{className:"bg-white/20 text-white border-white/30",children:"Interactive Rankings"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("div",{className:"flex flex-wrap bg-white/10 backdrop-blur-sm rounded-lg p-1 gap-1",children:[{key:"revenue",label:"Revenue",icon:_},{key:"sessions",label:"Sessions",icon:U},{key:"customers",label:"Members",icon:B},{key:"efficiency",label:"Efficiency",icon:de},{key:"classAverage",label:"Class Avg",icon:B},{key:"conversion",label:"Conversion",icon:P},{key:"retention",label:"Retention",icon:H},{key:"emptySessions",label:"Empty Sessions",icon:U}].map(({key:s,label:t,icon:r})=>e.jsxs(oe,{variant:f===s?"default":"ghost",size:"sm",onClick:()=>j(s),className:D("text-xs font-medium transition-all duration-200",f===s?"bg-white text-purple-600 shadow-sm hover:bg-gray-50":"text-white hover:bg-white/20"),children:[e.jsx(r,{className:"w-3 h-3 mr-1"}),t]},s))}),e.jsx("div",{className:"flex bg-white/10 backdrop-blur-sm rounded-lg p-1",children:[{key:"top",label:"Top Performers"},{key:"bottom",label:"Growth Opportunities"},{key:"all",label:"All Trainers"}].map(({key:s,label:t})=>e.jsx(oe,{variant:w===s?"default":"ghost",size:"sm",onClick:()=>u(s),className:D("text-xs font-medium transition-all duration-200",w===s?"bg-white text-purple-600 shadow-sm hover:bg-gray-50":"text-white hover:bg-white/20"),children:t},s))}),e.jsx("div",{className:"flex bg-white/10 backdrop-blur-sm rounded-lg p-1",children:[5,10,15].map(s=>e.jsx(oe,{variant:h===s?"default":"ghost",size:"sm",onClick:()=>o(s),className:D("text-xs font-medium transition-all duration-200",h===s?"bg-white text-purple-600 shadow-sm hover:bg-gray-50":"text-white hover:bg-white/20"),children:s},s))})]})]})}),e.jsxs(M,{className:"p-6",children:[e.jsx("div",{className:"space-y-3",children:n.map((s,t)=>{const r=t+1,i=r<=3;return e.jsxs("div",{onClick:()=>p?.(s.name,s),className:D("group relative overflow-hidden rounded-xl border transition-all duration-300 cursor-pointer","hover:shadow-lg hover:scale-[1.02] hover:border-purple-300",i?"bg-gradient-to-r from-white via-yellow-50/50 to-white border-yellow-200 shadow-md":"bg-white hover:bg-purple-50/30 border-gray-200"),children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:D("flex items-center justify-center w-12 h-12 rounded-full font-bold text-white shadow-lg",`bg-gradient-to-br ${l(r)}`),children:i?y(r):e.jsxs("span",{className:"text-lg",children:["#",r]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:s.name}),i&&e.jsxs(I,{className:"bg-yellow-100 text-yellow-800 text-xs animate-pulse",children:[e.jsx(Ve,{className:"w-3 h-3 mr-1"}),"Top Performer"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),s.location]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),z(s.totalSessions)," sessions"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),s.avgClassSize.toFixed(1)," avg size"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(x,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-bold text-xl text-gray-900",children:a(s)})]}),e.jsxs("div",{className:"text-xs text-gray-500 capitalize",children:[f," Leader"]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-3 h-3 text-green-600"}),e.jsxs("span",{className:"text-xs text-green-600 font-medium",children:[s.conversionRate.toFixed(1),"% conv"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-3 h-3 text-blue-600"}),e.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:[s.retentionRate.toFixed(1),"% ret"]})]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/5 to-indigo-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},s.name)})}),n.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No trainer data available for rankings"})]})]})]})},Ms=({data:d})=>{const p=Ce.useMemo(()=>{if(!d.length)return null;const j=new Set(d.map(s=>s.trainerName)).size,w=d.reduce((s,t)=>s+t.totalSessions,0),u=d.reduce((s,t)=>s+t.totalPaid,0),h=d.reduce((s,t)=>s+t.totalCustomers,0),o=w>0?h/w:0,n=j>0?u/j:0,a=w>0?u/w:0,b=d.reduce((s,t)=>s+t.nonEmptySessions,0),y=w>0?b/w*100:0,l=d.length>0?d.reduce((s,t)=>s+t.conversionRate,0)/d.length:0,x=d.length>0?d.reduce((s,t)=>s+t.retentionRate,0)/d.length:0;return{totalTrainers:j,totalSessions:w,totalRevenue:u,totalCustomers:h,avgClassSize:o,avgRevenue:n,avgRevenuePerSession:a,utilizationRate:y,avgConversionRate:l,avgRetentionRate:x}},[d]);if(!p)return null;const f=[{title:"Active Trainers",value:z(p.totalTrainers),subtitle:"Total instructors",icon:B,gradient:"from-blue-500 to-cyan-600",bgGradient:"from-blue-50 to-cyan-50",borderColor:"border-blue-200",change:"+5.2%",changeType:"positive",details:[{label:"Avg Sessions/Trainer",value:(p.totalSessions/p.totalTrainers).toFixed(1)},{label:"Avg Revenue/Trainer",value:V(p.avgRevenue)}]},{title:"Total Sessions",value:z(p.totalSessions),subtitle:"Classes conducted",icon:U,gradient:"from-green-500 to-emerald-600",bgGradient:"from-green-50 to-emerald-50",borderColor:"border-green-200",change:"+12.8%",changeType:"positive",details:[{label:"Utilization Rate",value:`${p.utilizationRate.toFixed(1)}%`},{label:"Avg Class Size",value:p.avgClassSize.toFixed(1)}]},{title:"Total Revenue",value:V(p.totalRevenue),subtitle:"Generated income",icon:_,gradient:"from-purple-500 to-violet-600",bgGradient:"from-purple-50 to-violet-50",borderColor:"border-purple-200",change:"+8.7%",changeType:"positive",details:[{label:"Revenue/Session",value:V(p.avgRevenuePerSession)},{label:"Revenue/Customer",value:V(p.totalRevenue/p.totalCustomers)}]},{title:"Total Members",value:z(p.totalCustomers),subtitle:"Class attendees",icon:H,gradient:"from-orange-500 to-red-500",bgGradient:"from-orange-50 to-red-50",borderColor:"border-orange-200",change:"+15.3%",changeType:"positive",details:[{label:"Members/Session",value:p.avgClassSize.toFixed(1)},{label:"Total Unique",value:z(p.totalCustomers)}]},{title:"Efficiency Score",value:`${p.utilizationRate.toFixed(1)}%`,subtitle:"Session utilization",icon:de,gradient:"from-indigo-500 to-purple-600",bgGradient:"from-indigo-50 to-purple-50",borderColor:"border-indigo-200",change:"+3.2%",changeType:"positive",details:[{label:"Fill Rate",value:`${p.utilizationRate.toFixed(1)}%`},{label:"Performance",value:"Excellent"}]},{title:"Conversion Rate",value:`${p.avgConversionRate.toFixed(1)}%`,subtitle:"Member conversion",icon:P,gradient:"from-teal-500 to-green-600",bgGradient:"from-teal-50 to-green-50",borderColor:"border-teal-200",change:"+2.1%",changeType:"positive",details:[{label:"Retention Rate",value:`${p.avgRetentionRate.toFixed(1)}%`},{label:"Performance",value:"Strong"}]}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((j,w)=>{const u=j.icon;return e.jsxs(R,{className:D("group relative overflow-hidden bg-gradient-to-br border-0 shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-[1.02] cursor-pointer",j.bgGradient,j.borderColor),style:{animationDelay:`${w*100}ms`,animation:"fade-in-up 0.6s ease-out forwards"},children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/10 to-transparent"}),e.jsx("div",{className:"absolute -top-10 -right-10 w-20 h-20 bg-white/20 rounded-full"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-white/10 rounded-full"})]}),e.jsxs(E,{className:"relative pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:D("p-3 rounded-xl bg-gradient-to-br shadow-lg transform group-hover:scale-110 transition-transform duration-300",j.gradient),children:e.jsx(u,{className:"w-6 h-6 text-white"})}),e.jsxs(I,{className:D("flex items-center gap-1 bg-white/80 backdrop-blur-sm border-0 shadow-sm",j.changeType==="positive"?"text-green-700":"text-red-700"),children:[j.changeType==="positive"?e.jsx(P,{className:"w-3 h-3"}):e.jsx(W,{className:"w-3 h-3"}),j.change]})]}),e.jsx(Y,{className:"text-sm font-medium text-gray-600 mt-4",children:j.title})]}),e.jsx(M,{className:"relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 group-hover:text-gray-800 transition-colors",children:j.value}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:j.subtitle})]}),e.jsx("div",{className:"space-y-2 opacity-70 group-hover:opacity-100 transition-opacity duration-300",children:j.details.map((h,o)=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600",children:[h.label,":"]}),e.jsx("span",{className:"font-semibold text-gray-700",children:h.value})]},o))}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:D("h-full bg-gradient-to-r rounded-full transition-all duration-1000 ease-out",j.gradient),style:{width:`${Math.min(90,Math.random()*40+50)}%`,animationDelay:`${w*200+500}ms`}})})})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},j.title)})})},Le=document.createElement("style");Le.textContent=`
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
`;document.head.appendChild(Le);const Ys=()=>{const{data:d,isLoading:p,error:f}=as(),[j,w]=S.useState("month-on-month"),[u,h]=S.useState(null),[o,n]=S.useState(null),[a,b]=S.useState(!0),[y,l]=S.useState("All Locations"),[x,s]=S.useState({location:"",trainer:"",month:""}),t=S.useMemo(()=>{if(!d||d.length===0)return[];let c=ys(d);return y!=="All Locations"&&(c=c.filter(m=>m.location===y)),x.location&&(c=c.filter(m=>m.location===x.location)),x.trainer&&(c=c.filter(m=>m.trainerName===x.trainer)),x.month&&(c=c.filter(m=>m.monthYear===x.month)),c},[d,x,y]),r=(c,m)=>{h(c),n(m)},i=()=>{h(null),n(null)};S.useMemo(()=>{if(!t.length)return null;const c=new Set(t.map(T=>T.trainerName)).size,m=t.reduce((T,F)=>T+F.totalSessions,0),g=t.reduce((T,F)=>T+F.totalPaid,0),N=t.reduce((T,F)=>T+F.totalCustomers,0),C=m>0?N/m:0,k=c>0?g/c:0;return{totalTrainers:c,totalSessions:m,totalRevenue:g,totalCustomers:N,avgClassSize:C,avgRevenue:k}},[t]),S.useMemo(()=>{if(!t.length)return{top:[],bottom:[]};const c=t.reduce((N,C)=>(N[C.trainerName]||(N[C.trainerName]={name:C.trainerName,totalSessions:0,totalRevenue:0,totalCustomers:0,location:C.location}),N[C.trainerName].totalSessions+=C.totalSessions,N[C.trainerName].totalRevenue+=C.totalPaid,N[C.trainerName].totalCustomers+=C.totalCustomers,N),{}),g=[...Object.values(c)].sort((N,C)=>C.totalRevenue-N.totalRevenue);return{top:g.slice(0,5),bottom:g.slice(-5).reverse()}},[t]);const v=S.useMemo(()=>{if(!t.length)return[];const c=t.reduce((m,g)=>{const N=g.monthYear;return m[N]||(m[N]={month:N,sessions:0,revenue:0,customers:0}),m[N].sessions+=g.totalSessions,m[N].revenue+=g.totalPaid,m[N].customers+=g.totalCustomers,m},{});return Object.values(c).sort((m,g)=>m.month.localeCompare(g.month))},[t]);return p?e.jsx(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-slate-600",children:"Loading trainer performance data..."})]})})}):f?e.jsx(R,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200 shadow-xl",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-700",children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsxs("span",{children:["Error loading trainer data: ",f]})]})})}):t.length?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(R,{className:"bg-white shadow-xl border-0",children:[e.jsx(E,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-600"}),"Location Performance"]})}),e.jsx(M,{children:e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["All Locations",...Array.from(new Set(t.map(c=>c.location)))].map(c=>e.jsx("button",{onClick:()=>l(c),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${y===c?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:c},c))})})]}),e.jsx(Cs,{data:d||[],onFiltersChange:s,isCollapsed:a,onToggleCollapse:()=>b(!a)})]}),e.jsx(Ms,{data:t}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsx(E,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-600"}),"Monthly Performance Trends"]})}),e.jsx(M,{children:e.jsx(ue,{width:"100%",height:300,children:e.jsxs(Be,{data:v,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(Ne,{dataKey:"month"}),e.jsx(ye,{}),e.jsx(ge,{}),e.jsx(pe,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,name:"Revenue"}),e.jsx(pe,{type:"monotone",dataKey:"sessions",stroke:"#10B981",strokeWidth:2,name:"Sessions"})]})})})]}),e.jsxs(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:[e.jsx(E,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-600"}),"Sessions vs Revenue"]})}),e.jsx(M,{children:e.jsx(ue,{width:"100%",height:300,children:e.jsxs(Oe,{data:v,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(Ne,{dataKey:"month"}),e.jsx(ye,{}),e.jsx(ge,{}),e.jsx(Se,{dataKey:"sessions",fill:"#10B981",name:"Sessions"}),e.jsx(Se,{dataKey:"customers",fill:"#8B5CF6",name:"Customers"})]})})})]})]}),e.jsx(Rs,{data:t,onTrainerClick:r}),e.jsxs(Me,{value:j,onValueChange:w,className:"space-y-4",children:[e.jsxs(ke,{className:"grid w-full grid-cols-4 bg-white border border-gray-200 p-1 rounded-xl shadow-sm h-14",children:[e.jsxs(G,{value:"month-on-month",className:"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-blue-700",children:[e.jsx(Re,{className:"w-4 h-4"}),"Month-on-Month"]}),e.jsxs(G,{value:"year-on-year",className:"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-emerald-600 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-emerald-700",children:[e.jsx(P,{className:"w-4 h-4"}),"Year-on-Year"]}),e.jsxs(G,{value:"efficiency-analysis",className:"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-orange-600 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-orange-700",children:[e.jsx(H,{className:"w-4 h-4"}),"Efficiency"]}),e.jsxs(G,{value:"performance-detail",className:"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-purple-600 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-purple-700",children:[e.jsx(we,{className:"w-4 h-4"}),"Performance"]})]}),e.jsxs(Q,{value:"month-on-month",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ve,{payrollData:d||[],defaultFileName:"month-on-month-trainer-analysis",size:"sm",variant:"outline"})}),e.jsx(ws,{data:t,defaultMetric:"totalSessions",onRowClick:r}),e.jsx(je,{pageId:"month-on-month-trainer",title:"Month-on-Month Analysis Notes"})]}),e.jsxs(Q,{value:"year-on-year",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ve,{payrollData:d||[],defaultFileName:"year-on-year-trainer-analysis",size:"sm",variant:"outline"})}),e.jsx(js,{data:t,onRowClick:r}),e.jsx(je,{pageId:"year-on-year-trainer",title:"Year-on-Year Analysis Notes"})]}),e.jsxs(Q,{value:"efficiency-analysis",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ve,{payrollData:d||[],defaultFileName:"trainer-efficiency-analysis",size:"sm",variant:"outline"})}),e.jsx(bs,{data:t,onRowClick:r}),e.jsx(je,{pageId:"efficiency-analysis-trainer",title:"Efficiency Analysis Notes"})]}),e.jsxs(Q,{value:"performance-detail",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ve,{payrollData:d||[],defaultFileName:"trainer-performance-detail",size:"sm",variant:"outline"})}),e.jsx(fs,{data:t,onRowClick:r}),e.jsx(je,{pageId:"performance-detail-trainer",title:"Performance Detail Notes"})]})]}),u&&o&&e.jsx(Ss,{isOpen:!!u,onClose:i,trainerName:u,trainerData:o})]}):e.jsx(R,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl",children:e.jsx(M,{className:"p-6",children:e.jsx("p",{className:"text-center text-slate-600",children:"No trainer performance data available"})})})},Is=({data:d,onDrillDown:p})=>{const[f,j]=S.useState({type:"class",metric:"fillRate",period:"current",minSessions:3}),[w,u]=S.useState(!0),[h,o]=S.useState(!0),n=S.useMemo(()=>{if(!d||d.length===0)return[];const r=d.reduce((v,c)=>{let m="";switch(f.type){case"class":m=c.cleanedClass||"Unknown";break;case"trainer":m=c.trainerName||"Unknown";break;case"location":m=c.location||"Unknown";break;case"timeSlot":m=c.time||"Unknown";break;case"dayOfWeek":m=c.dayOfWeek||"Unknown";break;default:m="Unknown"}return v[m]||(v[m]=[]),v[m].push(c),v},{});return Object.entries(r).filter(([,v])=>v.length>=f.minSessions).map(([v,c])=>{const m=c.length,g=c.reduce((Z,se)=>Z+(se.checkedInCount||0),0),N=c.reduce((Z,se)=>Z+(se.capacity||0),0),C=c.reduce((Z,se)=>Z+(se.totalPaid||0),0),k=N>0?g/N*100:0,T=m>0?g/m:0,F=m>0?C/m:0,J=c.map(Z=>Z.checkedInCount||0),O=T,$=J.reduce((Z,se)=>Z+Math.pow(se-O,2),0)/J.length,q=Math.sqrt($),ie=O>0?Math.max(0,100-q/O*100):0,X=Math.random()*20-10;let L,ee;switch(f.metric){case"fillRate":L=k,ee=me(k);break;case"revenue":L=C,ee=V(C);break;case"attendance":L=g,ee=z(g);break;case"consistency":L=ie,ee=me(ie);break;case"growth":L=X,ee=`${X>0?"+":""}${X.toFixed(1)}%`;break;default:L=k,ee=me(k)}return{id:`${f.type}-${v}`,name:v,value:L,displayValue:ee,trend:X>2?"up":X<-2?"down":"neutral",change:X,rank:0,totalItems:0,details:{sessions:c,totalSessions:m,totalAttendance:g,totalCapacity:N,totalRevenue:C,fillRate:k,avgAttendance:T,avgRevenue:F,consistency:ie,growth:X}}}).sort((v,c)=>c.value-v.value).map((v,c,m)=>({...v,rank:c+1,totalItems:m.length}))},[d,f]),a=S.useMemo(()=>n.slice(0,5),[n]),b=S.useMemo(()=>n.slice(-5).reverse(),[n]),y=S.useMemo(()=>n.length===0?0:n.reduce((r,i)=>r+i.value,0)/n.length,[n]),l=S.useCallback(r=>{p&&p({title:`${r.name} - Performance Analysis`,type:f.type,metric:f.metric,performanceData:r,sessions:r.details.sessions,breakdown:r.details})},[p,f]),x=r=>{switch(r){case"fillRate":return H;case"revenue":return _;case"attendance":return B;case"consistency":return U;case"growth":return P;default:return he}},s=r=>{switch(r){case"class":return we;case"trainer":return Ee;case"location":return ts;case"timeSlot":return ze;case"dayOfWeek":return Re;default:return he}},t=({item:r,isTop:i=!0})=>{const v=s(f.type),c=r.value>y;return e.jsx(R,{className:D("cursor-pointer transition-all duration-300 hover:shadow-lg border",i?c?"border-green-200 bg-green-50 hover:border-green-300":"border-blue-200 bg-blue-50 hover:border-blue-300":"border-red-200 bg-red-50 hover:border-red-300",h&&r.rank<=3&&"ring-2 ring-yellow-400 ring-opacity-50"),onClick:()=>l(r),children:e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:D("p-2 rounded-lg",i?c?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"),children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:r.name})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(I,{variant:"secondary",className:D("text-xs",r.rank<=3?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-slate-100 text-slate-600"),children:["#",r.rank]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:r.displayValue}),w&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"text-slate-500",children:["vs avg: ",typeof y=="number"?me(y):y]}),e.jsxs("div",{className:D("flex items-center gap-1",r.trend==="up"?"text-green-600":r.trend==="down"?"text-red-600":"text-slate-500"),children:[r.trend==="up"?e.jsx(es,{className:"w-3 h-3"}):r.trend==="down"?e.jsx(ss,{className:"w-3 h-3"}):null,Math.abs(r.change).toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[r.details.totalSessions," sessions • ",z(r.details.totalAttendance)," attendance"]})]})]})})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{className:"bg-white border-slate-200",children:[e.jsx(E,{className:"border-b border-slate-100",children:e.jsx(Y,{className:"text-lg font-semibold text-slate-900",children:"Performance Analytics Controls"})}),e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-sm font-medium text-slate-700",children:"Analysis Type"}),e.jsxs(ae,{value:f.type,onValueChange:r=>j(i=>({...i,type:r})),children:[e.jsx(ne,{children:e.jsx(re,{})}),e.jsxs(le,{children:[e.jsx(A,{value:"class",children:"Class Analysis"}),e.jsx(A,{value:"trainer",children:"Trainer Analysis"}),e.jsx(A,{value:"location",children:"Location Analysis"}),e.jsx(A,{value:"timeSlot",children:"Time Slot Analysis"}),e.jsx(A,{value:"dayOfWeek",children:"Day of Week Analysis"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-sm font-medium text-slate-700",children:"Metric"}),e.jsxs(ae,{value:f.metric,onValueChange:r=>j(i=>({...i,metric:r})),children:[e.jsx(ne,{children:e.jsx(re,{})}),e.jsxs(le,{children:[e.jsx(A,{value:"fillRate",children:"Fill Rate"}),e.jsx(A,{value:"revenue",children:"Revenue"}),e.jsx(A,{value:"attendance",children:"Attendance"}),e.jsx(A,{value:"consistency",children:"Consistency"}),e.jsx(A,{value:"growth",children:"Growth"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-sm font-medium text-slate-700",children:"Period"}),e.jsxs(ae,{value:f.period,onValueChange:r=>j(i=>({...i,period:r})),children:[e.jsx(ne,{children:e.jsx(re,{})}),e.jsxs(le,{children:[e.jsx(A,{value:"current",children:"Current Period"}),e.jsx(A,{value:"monthToMonth",children:"Month to Month"}),e.jsx(A,{value:"weekToWeek",children:"Week to Week"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"text-sm font-medium text-slate-700",children:"Min Sessions"}),e.jsxs(ae,{value:f.minSessions.toString(),onValueChange:r=>j(i=>({...i,minSessions:parseInt(r)})),children:[e.jsx(ne,{children:e.jsx(re,{})}),e.jsxs(le,{children:[e.jsx(A,{value:"1",children:"1+ Sessions"}),e.jsx(A,{value:"3",children:"3+ Sessions"}),e.jsx(A,{value:"5",children:"5+ Sessions"}),e.jsx(A,{value:"10",children:"10+ Sessions"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{id:"show-comparisons",checked:w,onCheckedChange:u}),e.jsx(ce,{htmlFor:"show-comparisons",className:"text-sm text-slate-700",children:"Show Comparisons"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{id:"highlight-top",checked:h,onCheckedChange:o}),e.jsx(ce,{htmlFor:"highlight-top",className:"text-sm text-slate-700",children:"Highlight Top 3"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(R,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(he,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:n.length})]})]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[f.type.charAt(0).toUpperCase()+f.type.slice(1),"s being analyzed"]})]})}),e.jsx(R,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:Ce.createElement(x(f.metric),{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-green-900",children:["Average ",f.metric]}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:typeof y=="number"?f.metric.includes("Rate")||f.metric==="consistency"?me(y):f.metric==="revenue"?V(y):z(y):y})]})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Performance benchmark"})]})}),e.jsx(R,{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border-yellow-200",children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-xl",children:e.jsx(fe,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Top Performer"}),e.jsx("p",{className:"text-lg font-bold text-yellow-800 truncate",children:a[0]?.name||"N/A"})]})]}),e.jsx("p",{className:"text-sm text-yellow-700",children:a[0]?.displayValue||"No data"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{className:"bg-white border-slate-200",children:[e.jsx(E,{className:"border-b border-slate-100",children:e.jsxs(Y,{className:"flex items-center gap-2 text-green-700",children:[e.jsx(P,{className:"w-5 h-5"}),"Top Performers"]})}),e.jsxs(M,{className:"p-4 space-y-3",children:[a.map(r=>e.jsx(t,{item:r,isTop:!0},r.id)),a.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No data available for current filters"})]})]}),e.jsxs(R,{className:"bg-white border-slate-200",children:[e.jsx(E,{className:"border-b border-slate-100",children:e.jsxs(Y,{className:"flex items-center gap-2 text-red-700",children:[e.jsx(W,{className:"w-5 h-5"}),"Improvement Opportunities"]})}),e.jsxs(M,{className:"p-4 space-y-3",children:[b.map(r=>e.jsx(t,{item:r,isTop:!1},r.id)),b.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No data available for current filters"})]})]})]})]})};export{Es as C,Ys as E,Is as I,Vs as P};
