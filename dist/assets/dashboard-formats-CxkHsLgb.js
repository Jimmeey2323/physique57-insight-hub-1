import{r as S,j as e,g as A,T as B,i as T,U as D,h as L,F as ye,X as me,C as ve,b as we,M as te,c as E,d as ae,Z as O,Y as V,N as ee,O as se,w as Ce,s as U,V as le,v as Se,a6 as ke,e as xe,E as he}from"./react-vendor-CYideCN0.js";import{C as b,j as w,k as C,c as f,a as Re,b as Pe,B as P,d as q,e as Be,L as z,S as J,f as K,g as W,h as H,i as Y,D as De,r as ue,s as je,t as M,u as $,_ as Fe,$ as Ae,a0 as Te,a1 as Ie}from"./ui-components-Cek3D08m.js";import{b as o,a as X,f as Z}from"./utils-Bswz-ULp.js";import{R as G,B as re,C as ne,X as ie,Y as ce,T as _,a as oe,c as Q,P as Ee,d as Me,e as $e}from"./chart-vendor-DyOsfj4e.js";const Le={"Power Cycle":"#8B5CF6",Barre:"#06B6D4",Strength:"#10B981"},es=({data:n})=>{const p=S.useMemo(()=>{const r=n.sessions.reduce((s,c)=>{const x=c.cleanedClass||"Unknown";let a="Other";return x.toLowerCase().includes("cycle")||x.toLowerCase().includes("spinning")?a="Power Cycle":x.toLowerCase().includes("barre")?a="Barre":(x.toLowerCase().includes("strength")||x.toLowerCase().includes("weights"))&&(a="Strength"),s[a]||(s[a]={category:a,sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),s[a].sessions+=1,s[a].totalAttendance+=c.checkedInCount||0,s[a].totalCapacity+=c.capacity||0,s[a].uniqueInstructors.add(c.instructor),s},{});return n.payroll.forEach(s=>{s.cycleSessions>0&&(r["Power Cycle"]||(r["Power Cycle"]={category:"Power Cycle",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),r["Power Cycle"].revenue+=s.cyclePaid||0),s.barreSessions>0&&(r.Barre||(r.Barre={category:"Barre",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),r.Barre.revenue+=s.barrePaid||0),s.strengthSessions>0&&(r.Strength||(r.Strength={category:"Strength",sessions:0,totalAttendance:0,totalCapacity:0,revenue:0,uniqueInstructors:new Set}),r.Strength.revenue+=s.strengthPaid||0)}),Object.values(r).filter(s=>["Power Cycle","Barre","Strength"].includes(s.category)).map(s=>({...s,avgAttendance:s.sessions>0?s.totalAttendance/s.sessions:0,fillRate:s.totalCapacity>0?s.totalAttendance/s.totalCapacity*100:0,instructorCount:s.uniqueInstructors.size,revenuePerSession:s.sessions>0?s.revenue/s.sessions:0}))},[n.sessions,n.payroll]),t=S.useMemo(()=>p.map(r=>({category:r.category,sessions:r.sessions,attendance:r.totalAttendance,avgAttendance:r.avgAttendance,fillRate:r.fillRate,revenue:r.revenue,instructors:r.instructorCount,color:Le[r.category]||"#9CA3AF"})),[p]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(A,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"PowerCycle vs Barre vs Strength Analysis"}),e.jsx("p",{className:"text-gray-600 font-normal",children:"Comprehensive performance comparison across class formats"})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(r=>e.jsx(b,{className:"bg-white shadow-xl border-0 overflow-hidden",children:e.jsx(f,{className:"p-0",children:e.jsxs("div",{className:"p-6 text-white relative overflow-hidden",style:{backgroundColor:r.color},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 transform translate-x-8 -translate-y-8 opacity-20",children:e.jsx(A,{className:"w-20 h-20"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:r.category}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Sessions"}),e.jsx("span",{className:"font-bold",children:o(r.sessions)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Total Attendance"}),e.jsx("span",{className:"font-bold",children:o(r.attendance)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Avg per Session"}),e.jsx("span",{className:"font-bold",children:r.avgAttendance.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Fill Rate"}),e.jsx("span",{className:"font-bold",children:X(r.fillRate)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Revenue"}),e.jsx("span",{className:"font-bold",children:Z(r.revenue)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Instructors"}),e.jsx("span",{className:"font-bold",children:r.instructors})]})]})]})]})})},r.category))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-purple-600"}),"Sessions & Attendance Comparison"]})}),e.jsx(f,{children:e.jsx(G,{width:"100%",height:300,children:e.jsxs(re,{data:t,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"category"}),e.jsx(ce,{}),e.jsx(_,{}),e.jsx(oe,{}),e.jsx(Q,{dataKey:"sessions",fill:"#8B5CF6",name:"Sessions"}),e.jsx(Q,{dataKey:"attendance",fill:"#06B6D4",name:"Total Attendance"})]})})})]}),e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),"Revenue Comparison"]})}),e.jsx(f,{children:e.jsx(G,{width:"100%",height:300,children:e.jsxs(re,{data:t,children:[e.jsx(ne,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"category"}),e.jsx(ce,{}),e.jsx(_,{formatter:r=>Z(r)}),e.jsx(oe,{}),e.jsx(Q,{dataKey:"revenue",fill:"#10B981",name:"Revenue ($)"})]})})})]}),e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),"Fill Rate Distribution"]})}),e.jsx(f,{children:e.jsx(G,{width:"100%",height:300,children:e.jsxs(Ee,{children:[e.jsx(Me,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:r=>`${r.category}: ${X(r.fillRate)}`,outerRadius:80,fill:"#8884d8",dataKey:"fillRate",children:t.map((r,s)=>e.jsx($e,{fill:r.color},`cell-${s}`))}),e.jsx(_,{formatter:r=>[`${r.toFixed(1)}%`,"Fill Rate"]})]})})})]}),e.jsxs(b,{className:"bg-white shadow-xl border-0",children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-orange-600"}),"Performance Summary"]})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-4",children:t.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-l-4",style:{borderLeftColor:r.color,backgroundColor:`${r.color}10`},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:r.category}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[o(r.sessions)," sessions"]}),e.jsxs("span",{children:[o(r.attendance)," attendees"]}),e.jsxs("span",{children:[X(r.fillRate)," fill rate"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:Z(r.revenue)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.instructors," instructors"]})]})]},r.category))})})]})]})]})},Oe=({data:n,selectedLocation:p,onLocationChange:t,selectedTimeframe:r,onTimeframeChange:s,selectedTrainer:c,onTrainerChange:x,dateRange:a={start:null,end:null},onDateRangeChange:l=()=>{}})=>{const[d,y]=S.useState(!1),m=S.useMemo(()=>{const g=[...new Set(n.map(R=>R.location))].filter(Boolean).sort(),k=[...new Set(n.map(R=>R.teacherName))].filter(Boolean).sort(),I=[...new Set(n.map(R=>R.monthYear))].filter(Boolean).sort();return{locations:g,trainers:k,monthYears:I}},[n]),N=[{value:"all",label:"All Time"},{value:"3m",label:"Last 3 Months"},{value:"6m",label:"Last 6 Months"},{value:"1y",label:"Last 12 Months"},{value:"custom",label:"Custom Date Range"}],i=p!=="all"||r!=="all"||c!=="all"||a.start||a.end,u=[p!=="all"?1:0,r!=="all"?1:0,c!=="all"?1:0,a.start?1:0,a.end?1:0].filter(g=>g>0).length,v=()=>{t("all"),s("all"),x("all"),l({start:null,end:null})};return e.jsx(b,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl overflow-hidden",children:e.jsxs(Re,{open:d,onOpenChange:y,children:[e.jsx(Pe,{asChild:!0,children:e.jsx(w,{className:"cursor-pointer hover:bg-gray-50/50 transition-colors bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(C,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"PowerCycle vs Barre vs Strength Filters"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Customize your comprehensive analysis"})]}),i&&e.jsxs(P,{className:"bg-white/20 text-white border-white/30",children:[u," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(q,{variant:"outline",size:"sm",onClick:g=>{g.stopPropagation(),v()},className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),"Clear All"]}),d?e.jsx(ve,{className:"w-4 h-4"}):e.jsx(we,{className:"w-4 h-4"})]})]})})}),e.jsx(Be,{children:e.jsxs(f,{className:"p-8 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h4",{className:"text-lg font-semibold text-slate-800",children:"Advanced Filter Options"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"location-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),"Location"]}),e.jsxs(J,{value:p,onValueChange:t,children:[e.jsx(K,{id:"location-select",className:"bg-white border-slate-200",children:e.jsx(W,{placeholder:"Select location"})}),e.jsxs(H,{className:"bg-white border-slate-200",children:[e.jsx(Y,{value:"all",children:"All Locations"}),m.locations.map(g=>e.jsx(Y,{value:g,children:g},g))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"timeframe-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-blue-500"}),"Timeframe"]}),e.jsxs(J,{value:r,onValueChange:s,children:[e.jsx(K,{id:"timeframe-select",className:"bg-white border-slate-200",children:e.jsx(W,{placeholder:"Select timeframe"})}),e.jsx(H,{className:"bg-white border-slate-200",children:N.map(g=>e.jsx(Y,{value:g.value,children:g.label},g.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"trainer-select",className:"text-slate-700 flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-purple-500"}),"Trainer"]}),e.jsxs(J,{value:c,onValueChange:x,children:[e.jsx(K,{id:"trainer-select",className:"bg-white border-slate-200",children:e.jsx(W,{placeholder:"Select trainer"})}),e.jsxs(H,{className:"bg-white border-slate-200",children:[e.jsx(Y,{value:"all",children:"All Trainers"}),m.trainers.map(g=>e.jsx(Y,{value:g,children:g},g))]})]})]}),r==="custom"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{className:"text-slate-700 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-orange-500"}),"Custom Date Range"]}),e.jsx(De,{value:{from:a.start||void 0,to:a.end||void 0},onChange:g=>l({start:g?.from||null,end:g?.to||null}),className:"w-full"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p!=="all"&&e.jsxs(P,{variant:"secondary",className:"bg-green-100 text-green-800",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),p]}),r!=="all"&&e.jsxs(P,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),N.find(g=>g.value===r)?.label]}),c!=="all"&&e.jsxs(P,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),c]}),(a.start||a.end)&&e.jsxs(P,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Custom Range"]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:[n.length," total records available"]})]})})]})})]})})},qe=({data:n,onItemClick:p})=>{const t=S.useMemo(()=>{if(!n.length)return null;const s={totalSessions:n.reduce((j,h)=>j+(h.cycleSessions||0),0),emptySessions:n.reduce((j,h)=>j+(h.emptyCycleSessions||0),0),nonEmptySessions:n.reduce((j,h)=>j+(h.nonEmptyCycleSessions||0),0),totalCustomers:n.reduce((j,h)=>j+(h.cycleCustomers||0),0),totalRevenue:n.reduce((j,h)=>j+(h.cyclePaid||0),0)},c={totalSessions:n.reduce((j,h)=>j+(h.barreSessions||0),0),emptySessions:n.reduce((j,h)=>j+(h.emptyBarreSessions||0),0),nonEmptySessions:n.reduce((j,h)=>j+(h.nonEmptyBarreSessions||0),0),totalCustomers:n.reduce((j,h)=>j+(h.barreCustomers||0),0),totalRevenue:n.reduce((j,h)=>j+(h.barrePaid||0),0)},x={totalSessions:n.reduce((j,h)=>j+(h.strengthSessions||0),0),emptySessions:n.reduce((j,h)=>j+(h.emptyStrengthSessions||0),0),nonEmptySessions:n.reduce((j,h)=>j+(h.nonEmptyStrengthSessions||0),0),totalCustomers:n.reduce((j,h)=>j+(h.strengthCustomers||0),0),totalRevenue:n.reduce((j,h)=>j+(h.strengthPaid||0),0)},a=s.totalSessions+c.totalSessions+x.totalSessions,l=s.totalRevenue+c.totalRevenue+x.totalRevenue,d=s.totalCustomers+c.totalCustomers+x.totalCustomers,y=s.emptySessions+c.emptySessions+x.emptySessions,m=n.reduce((j,h)=>j+(h.new||0),0),N=n.reduce((j,h)=>j+(h.converted||0),0),i=n.reduce((j,h)=>j+(h.retained||0),0),u=s.totalSessions>0?(s.totalSessions-s.emptySessions)/s.totalSessions*100:0,v=c.totalSessions>0?(c.totalSessions-c.emptySessions)/c.totalSessions*100:0,g=x.totalSessions>0?(x.totalSessions-x.emptySessions)/x.totalSessions*100:0,k=s.nonEmptySessions>0?s.totalCustomers/s.nonEmptySessions:0,I=c.nonEmptySessions>0?c.totalCustomers/c.nonEmptySessions:0,R=x.nonEmptySessions>0?x.totalCustomers/x.nonEmptySessions:0;return{powerCycle:s,barre:c,strength:x,totals:{sessions:a,revenue:l,customers:d,emptySessions:y,new:m,converted:N,retained:i},fillRates:{powerCycle:u,barre:v,strength:g},averages:{powerCycle:k,barre:I,strength:R}}},[n]);if(!t)return null;const r=[{title:"PowerCycle Sessions",value:o(t.powerCycle.totalSessions),icon:O,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"sessions",value:t.powerCycle.totalSessions}},{title:"PowerCycle Revenue",value:`₹${o(t.powerCycle.totalRevenue)}`,icon:T,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"revenue",value:t.powerCycle.totalRevenue}},{title:"PowerCycle Fill Rate",value:`${t.fillRates.powerCycle.toFixed(1)}%`,icon:B,color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100",data:{type:"powercycle",metric:"fillRate",value:t.fillRates.powerCycle}},{title:"Barre Sessions",value:o(t.barre.totalSessions),icon:A,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"sessions",value:t.barre.totalSessions}},{title:"Barre Revenue",value:`₹${o(t.barre.totalRevenue)}`,icon:T,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"revenue",value:t.barre.totalRevenue}},{title:"Barre Fill Rate",value:`${t.fillRates.barre.toFixed(1)}%`,icon:B,color:"from-pink-500 to-pink-600",bgColor:"from-pink-50 to-pink-100",data:{type:"barre",metric:"fillRate",value:t.fillRates.barre}},{title:"Strength Sessions",value:o(t.strength.totalSessions),icon:V,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"sessions",value:t.strength.totalSessions}},{title:"Strength Revenue",value:`₹${o(t.strength.totalRevenue)}`,icon:T,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"revenue",value:t.strength.totalRevenue}},{title:"Strength Fill Rate",value:`${t.fillRates.strength.toFixed(1)}%`,icon:B,color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100",data:{type:"strength",metric:"fillRate",value:t.fillRates.strength}},{title:"Total New Members",value:o(t.totals.new),icon:ee,color:"from-purple-500 to-purple-600",bgColor:"from-purple-50 to-purple-100",data:{type:"overall",metric:"new",value:t.totals.new}},{title:"Total Converted",value:o(t.totals.converted),icon:se,color:"from-indigo-500 to-indigo-600",bgColor:"from-indigo-50 to-indigo-100",data:{type:"overall",metric:"converted",value:t.totals.converted}},{title:"Total Retained",value:o(t.totals.retained),icon:D,color:"from-teal-500 to-teal-600",bgColor:"from-teal-50 to-teal-100",data:{type:"overall",metric:"retained",value:t.totals.retained}}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map((s,c)=>e.jsx(b,{className:`bg-gradient-to-br ${s.bgColor} border-0 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group`,onClick:()=>p(s.data),children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${s.color} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s.icon,{className:"w-6 h-6 text-white"})}),e.jsx(P,{variant:"secondary",className:"bg-white/50 text-gray-700",children:s.data.type.charAt(0).toUpperCase()+s.data.type.slice(1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value})]})]})},c))}),e.jsxs(b,{className:"bg-gradient-to-br from-white via-gray-50/30 to-blue-50/20 border-0 shadow-xl",children:[e.jsx(w,{children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(A,{className:"w-6 h-6 text-blue-600"}),"Format Performance Summary"]})}),e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(O,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-900",children:"PowerCycle"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:o(t.powerCycle.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",o(t.powerCycle.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:t.averages.powerCycle.toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border border-pink-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(A,{className:"w-5 h-5 text-pink-600"}),e.jsx("h4",{className:"font-semibold text-pink-900",children:"Barre"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:o(t.barre.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",o(t.barre.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:t.averages.barre.toFixed(1)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(V,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-semibold text-green-900",children:"Strength Lab"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:o(t.strength.totalSessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",o(t.strength.totalRevenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Avg/Session:"}),e.jsx("span",{className:"font-medium",children:t.averages.strength.toFixed(1)})]})]})]})]})})]})]})},de=({data:n,onItemClick:p,showDetailed:t=!1})=>{const r=S.useMemo(()=>{if(!n.length)return null;const a={sessions:n.reduce((i,u)=>i+(u.cycleSessions||0),0),emptySessions:n.reduce((i,u)=>i+(u.emptyCycleSessions||0),0),customers:n.reduce((i,u)=>i+(u.cycleCustomers||0),0),revenue:n.reduce((i,u)=>i+(u.cyclePaid||0),0)},l={sessions:n.reduce((i,u)=>i+(u.barreSessions||0),0),emptySessions:n.reduce((i,u)=>i+(u.emptyBarreSessions||0),0),customers:n.reduce((i,u)=>i+(u.barreCustomers||0),0),revenue:n.reduce((i,u)=>i+(u.barrePaid||0),0)},d={sessions:n.reduce((i,u)=>i+(u.strengthSessions||0),0),emptySessions:n.reduce((i,u)=>i+(u.emptyStrengthSessions||0),0),customers:n.reduce((i,u)=>i+(u.strengthCustomers||0),0),revenue:n.reduce((i,u)=>i+(u.strengthPaid||0),0)},y={...a,nonEmptySessions:a.sessions-a.emptySessions,fillRate:a.sessions>0?(a.sessions-a.emptySessions)/a.sessions*100:0,avgCustomersPerSession:a.sessions-a.emptySessions>0?a.customers/(a.sessions-a.emptySessions):0,revenuePerSession:a.sessions>0?a.revenue/a.sessions:0,revenuePerCustomer:a.customers>0?a.revenue/a.customers:0},m={...l,nonEmptySessions:l.sessions-l.emptySessions,fillRate:l.sessions>0?(l.sessions-l.emptySessions)/l.sessions*100:0,avgCustomersPerSession:l.sessions-l.emptySessions>0?l.customers/(l.sessions-l.emptySessions):0,revenuePerSession:l.sessions>0?l.revenue/l.sessions:0,revenuePerCustomer:l.customers>0?l.revenue/l.customers:0},N={...d,nonEmptySessions:d.sessions-d.emptySessions,fillRate:d.sessions>0?(d.sessions-d.emptySessions)/d.sessions*100:0,avgCustomersPerSession:d.sessions-d.emptySessions>0?d.customers/(d.sessions-d.emptySessions):0,revenuePerSession:d.sessions>0?d.revenue/d.sessions:0,revenuePerCustomer:d.customers>0?d.revenue/d.customers:0};return{powerCycle:y,barre:m,strength:N}},[n]);if(!r)return null;const s=(a,l=!0)=>{const d={powerCycle:r.powerCycle[a],barre:r.barre[a],strength:r.strength[a]};return Object.entries(d).sort(([,m],[,N])=>l?N-m:m-N)[0][0]},c=(a,l)=>{switch(l){case"percentage":return`${a.toFixed(1)}%`;case"currency":return`₹${o(a)}`;case"decimal":return a.toFixed(1);default:return o(a)}},x=[{key:"sessions",label:"Total Sessions",icon:E,type:"number",higherIsBetter:!0},{key:"revenue",label:"Total Revenue",icon:T,type:"currency",higherIsBetter:!0},{key:"customers",label:"Total Customers",icon:D,type:"number",higherIsBetter:!0},{key:"fillRate",label:"Fill Rate",icon:B,type:"percentage",higherIsBetter:!0},{key:"emptySessions",label:"Empty Sessions",icon:Ce,type:"number",higherIsBetter:!1},{key:"avgCustomersPerSession",label:"Avg Customers/Session",icon:D,type:"decimal",higherIsBetter:!0},...t?[{key:"revenuePerSession",label:"Revenue/Session",icon:T,type:"currency",higherIsBetter:!0},{key:"revenuePerCustomer",label:"Revenue/Customer",icon:T,type:"currency",higherIsBetter:!0},{key:"nonEmptySessions",label:"Non-Empty Sessions",icon:E,type:"number",higherIsBetter:!0}]:[]];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{className:"bg-gradient-to-br from-white via-yellow-50/30 to-amber-50/20 border-0 shadow-xl",children:[e.jsx(w,{className:"bg-gradient-to-r from-yellow-500 to-amber-500 text-white",children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(L,{className:"w-6 h-6"}),"Performance Comparison Dashboard"]})}),e.jsx(f,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(r).map(([a,l])=>e.jsxs("div",{className:`bg-gradient-to-br ${a==="powerCycle"?"from-blue-50 to-blue-100 border-blue-200":a==="barre"?"from-pink-50 to-pink-100 border-pink-200":"from-green-50 to-green-100 border-green-200"} rounded-xl p-4 border cursor-pointer hover:shadow-lg transition-all duration-300`,onClick:()=>p({type:"format",format:a,data:l}),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a==="powerCycle"&&e.jsx(O,{className:"w-6 h-6 text-blue-600"}),a==="barre"&&e.jsx(A,{className:"w-6 h-6 text-pink-600"}),a==="strength"&&e.jsx(V,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:`font-bold text-lg ${a==="powerCycle"?"text-blue-900":a==="barre"?"text-pink-900":"text-green-900"}`,children:a==="powerCycle"?"PowerCycle":a==="barre"?"Barre":"Strength Lab"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sessions:"}),e.jsx("span",{className:"font-medium",children:o(l.sessions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Revenue:"}),e.jsxs("span",{className:"font-medium",children:["₹",o(l.revenue)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Fill Rate:"}),e.jsxs("span",{className:"font-medium",children:[l.fillRate.toFixed(1),"%"]})]})]})]},a))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(a=>{const l=s(a.key,a.higherIsBetter);return e.jsxs(b,{className:"bg-white border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>p({type:"metric",metric:a.key,data:r}),children:[e.jsx(w,{className:"pb-3",children:e.jsxs(C,{className:"text-sm font-medium flex items-center gap-2 text-gray-700",children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]})}),e.jsx(f,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"PowerCycle"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:c(r.powerCycle[a.key],a.type)}),l==="powerCycle"&&e.jsxs(P,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Barre"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:c(r.barre[a.key],a.type)}),l==="barre"&&e.jsxs(P,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Strength"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:c(r.strength[a.key],a.type)}),l==="strength"&&e.jsxs(P,{className:"bg-green-100 text-green-800 text-xs",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Winner"]})]})]})]})})]},a.key)})})]})},Ve=({data:n,onItemClick:p})=>{const[t,r]=S.useState("revenue"),[s,c]=S.useState("all"),x=[{key:"revenue",label:"Total Revenue",icon:T,description:"Highest earning trainers",higherIsBetter:!0},{key:"sessions",label:"Total Sessions",icon:E,description:"Most active trainers",higherIsBetter:!0},{key:"customers",label:"Total Customers",icon:D,description:"Highest customer engagement",higherIsBetter:!0},{key:"fillRate",label:"Fill Rate",icon:B,description:"Best session utilization",higherIsBetter:!0},{key:"emptySessions",label:"Empty Sessions",icon:U,description:"Least empty sessions",higherIsBetter:!1},{key:"newMembers",label:"New Members",icon:ee,description:"Most new member acquisitions",higherIsBetter:!0},{key:"conversion",label:"Conversion Rate",icon:se,description:"Best conversion performance",higherIsBetter:!0},{key:"retention",label:"Retention Rate",icon:D,description:"Best member retention",higherIsBetter:!0},{key:"avgCustomers",label:"Avg Customers/Session",icon:B,description:"Best session efficiency",higherIsBetter:!0}],a=S.useMemo(()=>{if(!n.length)return[];const m=n.map(i=>{const u=i.totalSessions||0,v=i.totalEmptySessions||0,g=i.totalPaid||0,k=i.totalCustomers||0,I=i.new||0;i.converted,i.retained;const R=i.cyclePaid||0,j=i.barrePaid||0,h=i.strengthPaid||0,F=i.cycleSessions||0,ge=i.barreSessions||0,pe=i.strengthSessions||0,Ne=i.cycleCustomers||0,be=i.barreCustomers||0,fe=i.strengthCustomers||0;return{...i,revenue:s==="all"?g:s==="powercycle"?R:s==="barre"?j:h,sessions:s==="all"?u:s==="powercycle"?F:s==="barre"?ge:pe,customers:s==="all"?k:s==="powercycle"?Ne:s==="barre"?be:fe,emptySessions:s==="all"?v:s==="powercycle"?i.emptyCycleSessions||0:s==="barre"?i.emptyBarreSessions||0:i.emptyStrengthSessions||0,fillRate:u>0?(u-v)/u*100:0,newMembers:I,conversion:parseFloat(i.conversion?.replace("%","")||"0"),retention:parseFloat(i.retention?.replace("%","")||"0"),avgCustomers:u-v>0?k/(u-v):0,lateCancellation:0}}),N=x.find(i=>i.key===t);return N?m.filter(i=>i[t]>0).sort((i,u)=>{const v=i[t],g=u[t];return N.higherIsBetter?g-v:v-g}):[]},[n,t,s]),l=m=>{switch(m){case 1:return e.jsx(le,{className:"w-5 h-5 text-yellow-500"});case 2:return e.jsx(ke,{className:"w-5 h-5 text-gray-400"});case 3:return e.jsx(Se,{className:"w-5 h-5 text-amber-600"});default:return e.jsxs("span",{className:"w-5 h-5 flex items-center justify-center text-sm font-bold text-gray-500",children:["#",m]})}},d=(m,N)=>{switch(N){case"revenue":return`₹${o(m)}`;case"fillRate":case"conversion":case"retention":return`${m.toFixed(1)}%`;case"avgCustomers":return m.toFixed(1);default:return o(m)}},y=x.find(m=>m.key===t);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(w,{children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(le,{className:"w-6 h-6 text-yellow-500"}),"Trainer Rankings & Performance"]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(q,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>c("all"),children:"All Formats"}),e.jsx(q,{variant:s==="powercycle"?"default":"outline",size:"sm",onClick:()=>c("powercycle"),className:"bg-blue-500 hover:bg-blue-600 text-white",children:"PowerCycle"}),e.jsx(q,{variant:s==="barre"?"default":"outline",size:"sm",onClick:()=>c("barre"),className:"bg-pink-500 hover:bg-pink-600 text-white",children:"Barre"}),e.jsx(q,{variant:s==="strength"?"default":"outline",size:"sm",onClick:()=>c("strength"),className:"bg-green-500 hover:bg-green-600 text-white",children:"Strength Lab"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:x.map(m=>e.jsxs(q,{variant:t===m.key?"default":"outline",size:"sm",onClick:()=>r(m.key),className:"flex items-center gap-2 text-xs",children:[e.jsx(m.icon,{className:"w-4 h-4"}),m.label]},m.key))})]})]}),e.jsxs(b,{className:"bg-white border border-gray-200 shadow-lg",children:[e.jsxs(w,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3",children:[y?.icon&&e.jsx(y.icon,{className:"w-5 h-5"}),y?.label," Rankings",e.jsx(P,{variant:"secondary",className:"ml-auto",children:s==="all"?"All Formats":s==="powercycle"?"PowerCycle":s==="barre"?"Barre":"Strength Lab"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:y?.description})]}),e.jsx(f,{className:"p-0",children:e.jsx("div",{className:"space-y-1",children:a.slice(0,15).map((m,N)=>e.jsxs("div",{className:`flex items-center justify-between p-4 hover:bg-gray-50 cursor-pointer border-l-4 ${N===0?"border-yellow-400 bg-yellow-50/30":N===1?"border-gray-400 bg-gray-50/30":N===2?"border-amber-400 bg-amber-50/30":"border-transparent"}`,onClick:()=>p({type:"trainer",trainer:m,rank:N+1,metric:t,format:s}),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8",children:l(N+1)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.teacherName}),e.jsx("p",{className:"text-sm text-gray-600",children:m.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg",children:d(m[t],t)}),e.jsx("div",{className:"text-sm text-gray-500",children:m.totalSessions>0&&`${m.totalSessions} sessions`})]})]},m.unique))})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.slice(0,3).map((m,N)=>e.jsx(b,{className:`cursor-pointer hover:shadow-lg transition-all duration-300 ${N===0?"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200":N===1?"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200":"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200"}`,onClick:()=>p({type:"trainer",trainer:m,rank:N+1,metric:t,format:s}),children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l(N+1),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:m.teacherName}),e.jsx("p",{className:"text-sm text-gray-600",children:m.location})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:d(m[t],t)}),e.jsx("div",{className:"text-sm text-gray-600",children:y?.label}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[m.totalSessions," sessions"]}),e.jsxs("span",{children:[m.totalCustomers," customers"]})]})]})]})},m.unique))})]})},Ye=({data:n,onItemClick:p})=>e.jsxs(b,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(w,{children:e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3 text-blue-900",children:[e.jsx(O,{className:"w-5 h-5"}),"PowerCycle Detailed Analytics"]})}),e.jsx(f,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-blue-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-blue-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-blue-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:n.map((t,r)=>{const s=t.cycleSessions||0,c=t.emptyCycleSessions||0,x=t.cycleCustomers||0,a=t.cyclePaid||0,l=s>0?(s-c)/s*100:0,d=s>0?a/s:0,y=s-c>0?x/(s-c):0;return e.jsxs("tr",{className:"border-b border-blue-100 hover:bg-blue-50 cursor-pointer",onClick:()=>p({type:"powercycle-trainer",trainer:t,metrics:{sessions:s,emptySessions:c,customers:x,revenue:a,fillRate:l,revenuePerSession:d,avgCustomers:y}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900",children:t.teacherName}),e.jsx("div",{className:"text-sm text-blue-600",children:t.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:o(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:o(c)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(P,{variant:l>=80?"default":l>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),l.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:o(x)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",o(a)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",o(d)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:y.toFixed(1)})})]},t.unique)})})]})})})]}),ze=({data:n,onItemClick:p})=>e.jsxs(b,{className:"bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsx(w,{children:e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3 text-pink-900",children:[e.jsx(A,{className:"w-5 h-5"}),"Barre Detailed Analytics"]})}),e.jsx(f,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-pink-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-pink-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-pink-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:n.map((t,r)=>{const s=t.barreSessions||0,c=t.emptyBarreSessions||0,x=t.barreCustomers||0,a=t.barrePaid||0,l=s>0?(s-c)/s*100:0,d=s>0?a/s:0,y=s-c>0?x/(s-c):0;return e.jsxs("tr",{className:"border-b border-pink-100 hover:bg-pink-50 cursor-pointer",onClick:()=>p({type:"barre-trainer",trainer:t,metrics:{sessions:s,emptySessions:c,customers:x,revenue:a,fillRate:l,revenuePerSession:d,avgCustomers:y}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-pink-900",children:t.teacherName}),e.jsx("div",{className:"text-sm text-pink-600",children:t.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:o(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:o(c)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(P,{variant:l>=80?"default":l>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),l.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"font-medium",children:o(x)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",o(a)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",o(d)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:y.toFixed(1)})})]},t.unique)})})]})})})]}),Ue=({data:n,onItemClick:p})=>e.jsxs(b,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(w,{children:e.jsxs(C,{className:"text-lg font-bold flex items-center gap-3 text-green-900",children:[e.jsx(V,{className:"w-5 h-5"}),"Strength Lab Detailed Analytics"]})}),e.jsx(f,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-green-200",children:[e.jsx("th",{className:"text-left p-3 font-semibold text-green-800",children:"Trainer"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Total Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Empty Sessions"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Fill Rate"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Customers"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Revenue"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Revenue/Session"}),e.jsx("th",{className:"text-right p-3 font-semibold text-green-800",children:"Avg Customers"})]})}),e.jsx("tbody",{children:n.map((t,r)=>{const s=t.strengthSessions||0,c=t.emptyStrengthSessions||0,x=t.strengthCustomers||0,a=t.strengthPaid||0,l=s>0?(s-c)/s*100:0,d=s>0?a/s:0,y=s-c>0?x/(s-c):0;return e.jsxs("tr",{className:"border-b border-green-100 hover:bg-green-50 cursor-pointer",onClick:()=>p({type:"strength-trainer",trainer:t,metrics:{sessions:s,emptySessions:c,customers:x,revenue:a,fillRate:l,revenuePerSession:d,avgCustomers:y}}),children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:t.teacherName}),e.jsx("div",{className:"text-sm text-green-600",children:t.location})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:o(s)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:o(c)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(P,{variant:l>=80?"default":l>=60?"secondary":"destructive",className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),l.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:o(x)})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium",children:["₹",o(a)]})]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"font-medium",children:["₹",o(d)]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"font-medium",children:y.toFixed(1)})})]},t.unique)})})]})})})]}),Je=({data:n,onItemClick:p})=>{const[t,r]=S.useState("powercycle"),s=n.filter(a=>(a.cycleSessions||0)>0),c=n.filter(a=>(a.barreSessions||0)>0),x=n.filter(a=>(a.strengthSessions||0)>0);return e.jsx("div",{className:"space-y-6",children:e.jsxs(b,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(w,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx(xe,{className:"w-6 h-6"}),"Detailed Format Analytics"]})}),e.jsx(f,{className:"p-6",children:e.jsxs(ue,{value:t,onValueChange:r,className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-3 bg-gray-100 p-1 rounded-lg",children:[e.jsxs(M,{value:"powercycle",className:"text-sm font-medium",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"PowerCycle"]}),e.jsxs(M,{value:"barre",className:"text-sm font-medium",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Barre"]}),e.jsxs(M,{value:"strength",className:"text-sm font-medium",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Strength Lab"]})]}),e.jsx($,{value:"powercycle",className:"mt-6",children:e.jsx(Ye,{data:s,onItemClick:p})}),e.jsx($,{value:"barre",className:"mt-6",children:e.jsx(ze,{data:c,onItemClick:p})}),e.jsx($,{value:"strength",className:"mt-6",children:e.jsx(Ue,{data:x,onItemClick:p})})]})})]})})},Ke=({data:n,onItemClick:p})=>e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Comprehensive Charts"]})}),e.jsx(f,{children:e.jsx("p",{children:"Charts coming soon..."})})]}),We=({data:n,onItemClick:p})=>e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Deep Insights"]})}),e.jsx(f,{children:e.jsx("p",{children:"Insights section simplified and coming soon..."})})]}),He=({isOpen:n,onClose:p,data:t,allData:r})=>{if(!t)return null;const s=()=>{const l=t.trainer;if(!l)return null;const d=l.totalSessions||0,y=l.totalEmptySessions||0,m=l.totalCustomers||0,N=l.totalPaid||0,i=d>0?(d-y)/d*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),l.teacherName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.location," • ",l.monthYear]})]}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o(d)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Sessions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",o(N)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o(m)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[i.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fill Rate"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(b,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(C,{className:"text-sm flex items-center gap-2 text-blue-800",children:[e.jsx(O,{className:"w-4 h-4"}),"PowerCycle"]})}),e.jsxs(f,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.cycleSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.emptyCycleSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.cycleCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-blue-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",o(l.cyclePaid||0)]})]})]})]}),e.jsxs(b,{className:"bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(C,{className:"text-sm flex items-center gap-2 text-pink-800",children:[e.jsx(A,{className:"w-4 h-4"}),"Barre"]})}),e.jsxs(f,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.barreSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.emptyBarreSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.barreCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-pink-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",o(l.barrePaid||0)]})]})]})]}),e.jsxs(b,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(C,{className:"text-sm flex items-center gap-2 text-green-800",children:[e.jsx(V,{className:"w-4 h-4"}),"Strength Lab"]})}),e.jsxs(f,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Sessions:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.strengthSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Empty:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.emptyStrengthSessions||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Customers:"}),e.jsx("span",{className:"text-sm font-medium",children:o(l.strengthCustomers||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-green-600",children:"Revenue:"}),e.jsxs("span",{className:"text-sm font-medium",children:["₹",o(l.strengthPaid||0)]})]})]})]})]}),e.jsxs(b,{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200",children:[e.jsx(w,{children:e.jsxs(C,{className:"text-sm flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-600"}),"Performance Metrics"]})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:o(l.new||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"New Members"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:o(l.converted||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Converted"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:o(l.retained||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Retained"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:l.conversion||"0%"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Conversion Rate"})]})]})]})})]})]})},c=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Metric Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Detailed breakdown of ",t.metric]})]})}),x=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Format Analysis"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Detailed breakdown of ",t.format]})]})}),a=()=>t.type?.includes("trainer")?`${t.trainer?.teacherName||"Trainer"} - Detailed Analysis`:t.type==="metric"?`${t.metric} - Metric Analysis`:t.type==="format"?`${t.format} - Format Analysis`:"Detailed Analysis";return e.jsx(Fe,{open:n,onOpenChange:p,children:e.jsxs(Ae,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Te,{children:e.jsxs(Ie,{className:"flex items-center justify-between",children:[a(),e.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(me,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"mt-4",children:[t.type?.includes("trainer")&&s(),t.type==="metric"&&c(),t.type==="format"&&x()]})]})})},Xe=({data:n})=>{const[p,t]=S.useState("dashboard"),[r,s]=S.useState("all"),[c,x]=S.useState("all"),[a,l]=S.useState("all"),[d,y]=S.useState({start:null,end:null}),[m,N]=S.useState(null),i=S.useMemo(()=>{if(!n)return[];let v=[...n];if(r!=="all"&&(v=v.filter(g=>g.location===r)),a!=="all"&&(v=v.filter(g=>g.teacherName===a)),c!=="all"){if(c==="custom"&&(d.start||d.end))v=v.filter(g=>{if(!g.monthYear)return!1;const[k,I]=g.monthYear.split(" "),R=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(k),j=new Date(parseInt(I),R,1);let h=!0;if(d.start){const F=new Date(d.start);F.setDate(1),h=h&&j>=F}if(d.end){const F=new Date(d.end);F.setMonth(F.getMonth()+1,0),h=h&&j<=F}return h});else if(c!=="custom"){const g=new Date;let k=new Date;switch(c){case"3m":k.setMonth(g.getMonth()-3);break;case"6m":k.setMonth(g.getMonth()-6);break;case"1y":k.setFullYear(g.getFullYear()-1);break}c!=="all"&&(v=v.filter(I=>{if(!I.monthYear)return!1;const[R,j]=I.monthYear.split(" "),h=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(R),F=new Date(parseInt(j),h,1);return F>=k&&F<=g}))}}return v},[n,r,c,a,d]),u=v=>{N(v)};return!n||n.length===0?e.jsx(b,{className:"bg-yellow-50 border-yellow-200",children:e.jsx(f,{className:"p-6",children:e.jsx("p",{className:"text-yellow-600",children:"No PowerCycle vs Barre vs Strength Lab data available"})})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(Oe,{data:n,selectedLocation:r,onLocationChange:s,selectedTimeframe:c,onTimeframeChange:x,selectedTrainer:a,onTrainerChange:l,dateRange:d,onDateRangeChange:y}),e.jsx(qe,{data:i,onItemClick:u}),e.jsxs(ue,{value:p,onValueChange:t,className:"w-full",children:[e.jsxs(b,{className:"bg-gradient-to-br from-white via-blue-50/30 to-purple-50/20 border-0 shadow-xl",children:[e.jsx(w,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsxs(C,{className:"text-xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(O,{className:"w-5 h-5"})}),"PowerCycle vs Barre vs Strength Lab Dashboard"]})}),e.jsx(f,{className:"p-4",children:e.jsxs(je,{className:"grid w-full grid-cols-6 bg-gray-100 p-1 rounded-lg",children:[e.jsxs(M,{value:"dashboard",className:"text-sm font-medium",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsxs(M,{value:"comparison",className:"text-sm font-medium",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Comparison"]}),e.jsxs(M,{value:"rankings",className:"text-sm font-medium",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Rankings"]}),e.jsxs(M,{value:"analytics",className:"text-sm font-medium",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Detailed Analytics"]}),e.jsxs(M,{value:"charts",className:"text-sm font-medium",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Charts"]}),e.jsxs(M,{value:"insights",className:"text-sm font-medium",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Insights"]})]})})]}),e.jsx($,{value:"dashboard",className:"space-y-8",children:e.jsx(de,{data:i,onItemClick:u})}),e.jsx($,{value:"comparison",className:"space-y-8",children:e.jsx(de,{data:i,onItemClick:u,showDetailed:!0})}),e.jsx($,{value:"rankings",className:"space-y-8",children:e.jsx(Ve,{data:i,onItemClick:u})}),e.jsx($,{value:"analytics",className:"space-y-8",children:e.jsx(Je,{data:i,onItemClick:u})}),e.jsx($,{value:"charts",className:"space-y-8",children:e.jsx(Ke,{data:i,onItemClick:u})}),e.jsx($,{value:"insights",className:"space-y-8",children:e.jsx(We,{data:i,onItemClick:u})})]}),m&&e.jsx(He,{isOpen:!!m,onClose:()=>N(null),data:m,allData:i})]})},ss=({data:n})=>e.jsx(Xe,{data:n||[]});export{es as P,ss as a};
